"use strict";const ns={};Array.prototype.removeEmpty=function(){return this.filter(Boolean)},Array.prototype.combine=function(e){return this.removeEmpty().join(e)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(e){e.a=function(...l){if(l){if(2===l.length&&"string"==typeof l[0]&&"string"==typeof l[1])return e.a({label:l[0],href:l[1]});if(2===l.length&&"string"==typeof l[0]&&e.core.isFunction(l[1]))return e.a({label:l[0],onclick:l[1]});if(1===l.length&&"string"==typeof l[0])return e.a({label:l[0]});if(1===l.length&&"object"==typeof l[0]){var t=l[0];return(t=$.extend({},{id:null,style:null,class:null,color:null,onclick:null,href:"javascript:void(0)",icon:null,label:null,elems:null,tooltip:null},t)).title&&console.warn("A has title"),e.tooltip(t.tooltip,{tag:"a",id:t.id,class:[t.color?`link-${t.color}`:null,t.class?t.class:null],attr:{href:t.href?t.href:null,onclick:t.onclick?t.onclick:null},style:t.style,elems:t.elems?t.elems:[t.icon?e.icon(t.icon):null,t.label?{tag:"span",class:t.icon?"ms-2":null,elems:t.label}:null].removeEmpty()})}console.error("Unsupported argument")}else console.error("Unsupported argument")}}(ns),function(e){e.accordion=function(l){return l=$.extend({},{id:null,flush:!1,autoclose:!0,item:null},l),Array.isArray(l.item)?(l.id=l.id?l.id:e.core.UUID(),l.item.find((e=>!0===e.active))||(l.item[0].active=!0),{tag:"div",attr:{id:l.id},class:["accordion",l.flush?"accordion-flush":null].combine(" "),elems:l.item.map((function(t,n){return(t=$.extend({},{id:null,label:null,icon:null,active:!1,elems:null},t)).id=t.id?t.id:e.core.UUID(),{tag:"div",class:"accordion-item",elems:[{tag:"h2",class:"accordion-header",attr:{id:`${t.id}-head`},elems:{tag:"button",class:["accordion-button",t.active?null:"collapsed"].combine(" "),attr:{type:"button","data-bs-toggle":"collapse","data-bs-target":`#${t.id}-body`,"aria-expanded":t.active?"true":"false","aria-controls":`${t.id}-body`},elems:t.label||t.icon?[t.icon?e.icon(t.icon):null,t.icon?{tag:"span",class:"ms-2",elems:t.label}:t.label]:null}},{tag:"div",class:["accordion-collapse","collapse",t.active?"show":null].combine(" "),attr:{id:`${t.id}-body`,"aria-labelledby":`${t.id}-head`,"data-bs-parent":l.autoclose?`#${l.id}`:null},elems:{tag:"div",class:"accordion-body",elems:t.elems}}]}}))}):null}}(ns),function(e){const l={name:null,sender:null,data:null,dataType:null,cache:!0,contentType:"application/json"},t={url:"",obj:null,sender:null,progress:null};var n={ajax:function(e){return e=$.extend({},l,e),new Promise(((l,t)=>{$.ajax(`./api/${e.name}`,{async:!0,cache:e.cache,type:e.type,dataType:e.data?e.dataType:null,contentType:e.data?e.contentType:null,data:e.data?JSON.stringify(e.data):null,success:e=>{l(e)},error:e=>{t(e.responseText?e.responseText:e.statusText?e.statusText:"Error")}})}))},ajaxMultipart:e=>(e=$.extend({},t,e),new Promise(((l,t)=>{for(var n=new FormData,a=0;a<e.obj.length;a++)for(var o=0;o<$(e.obj[a]).length;o++)for(var s=0;s<$(e.obj[a])[o].files.length;s++)n.append("file",$(e.obj[a])[o].files[s]),1;$.ajax({xhr:()=>{var l=new window.XMLHttpRequest;return l.upload.addEventListener("progress",(function(l){if(l.lengthComputable&&"function"==typeof e.progress){var t=parseInt(l.loaded/l.total*100,10);e.progress(t)}}),!1),l},url:"./api/file",data:n,async:e.async,cache:e.cache,contentType:!1,processData:!1,type:"POST",success:e=>{l(e)},error:e=>{t(e.responseText?e.responseText:e.statusText?e.statusText:"Error")}})}))),ajaxDownload:function(e){return new Promise(((l,t)=>{try{window.location=`./api/${e.name}?q=${JSON.stringify(e.data)}`,l(!0)}catch(e){t(e)}}))}};e.api={get:e=>(e=$.extend({},{type:"GET"},e),n.ajax(e)),post:e=>(e=$.extend({},{type:"POST"},e),n.ajax(e)),put:e=>(e=$.extend({},{type:"PUT"},e),n.ajax(e)),delete:e=>(e=$.extend({},{type:"DELETE"},e),n.ajax(e)),upload:e=>n.ajaxMultipart(e),download:e=>(e=$.extend({},{type:"GET"},e),n.ajaxDownload(e)),option:l=>(l=$.extend({},{db:null,sender:null,emptylabel:null,fieldkey:"_id",fieldname:"name"},l),new Promise(((t,n)=>{l.db?e.api.post({sender:l.sender,name:`list/${l.db}`,data:{field:{[l.fieldkey]:1,[l.fieldname]:1},sort:{[l.fieldname]:1}}}).then((e=>{var n=e.data?e.data.map((e=>({value:e[l.fieldkey],label:e[l.fieldname]}))):[];null!==l.emptylabel&&n.unshift({value:"",label:l.emptylabel}),t(n)})).catch((e=>{n(e)})):n("Database name required")})))}}(ns),function(e){e.alert={container:function(...l){if(l&&2===l.length){var t=function(...l){if(l&&l.length>0){var t=null,n=null;if(1===l.length?t=l[0]:l.length>1&&(n=l[0],t=l[1]),n){var a=e.sIcon(n);return a?{bgcolor:a.bgcolor,textcolor:a.textcolor,elems:{tag:"div",class:"row g-0",elems:[{tag:"div",class:"col-auto align-self-start me-3",elems:e.icon({icon:a.icon,size:"lg"})},{tag:"div",class:"col align-self-center",elems:t}]}}:{textcolor:null,bgcolor:n,elems:t}}return{textcolor:null,bgcolor:null,elems:t}}}(l[0],l[1]);return e.alert.container({color:t?.bgcolor,elems:t?.elems})}if(l&&1===l.length&&"object"==typeof l){var n=$.extend({},{id:null,class:null,dismissible:!1,animation:!0,color:null,elems:null},l[0]);return n.id=n.id?n.id:e.core.UUID(),{tag:"div",attr:{id:n.id,role:"alert"},class:["alert",n.color?`alert-${n.color}`:null,n.dismissible?"alert-dismissible show":null,n.animation&&n.dismissible?"fade":null,n.class].combine(" "),elems:[{tag:"div",elems:n.elems},n.dismissible?{tag:"button",class:"btn-close",attr:{"data-bs-dismiss":"alert","aria-label":"Close"}}:null].removeEmpty()}}console.error("Unsupported argument")},link:function(e,l){return{tag:"a",class:"alert-link",attr:{href:l||"javascript:void"},elems:e}},header:function(e){return{tag:"h4",class:"heading",elems:e}}}}(ns),function(e){e.badge=function(l){return"object"==typeof l?{tag:"span",class:["badge",(l=$.extend({},{id:null,class:null,label:null,pill:!1,notification:!1,color:"secondary",border:null,darktext:!1,asst:null,tooltip:null,tooltipplace:null},l)).class?l.class:null,l.color?`bg-${l.color}`:null,l.darktext?"text-dark":null,l.pill?"rounded-pill":null,l.notification?"position-absolute top-0 start-100 translate-middle":null,l.notification&&!l.label?"p-2":null,l.border?`border border-${l.border}`:null,l.label?null:"rounded-circle"],attr:{id:l.id},elems:[l.label?l.label.toString():"",l.asst?{tag:"span",class:"visually-hidden",elems:l.asst}:null]}:e.badge({label:l})}}(ns),function(e){e.breadcrumb=function(l){if("object"==typeof l){(l=$.extend({},{id:null,class:null,item:null,divider:"url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"},l)).id=l.id?l.id:e.core.UUID();var t=null;return l.item&&(Array.isArray(l.item)||(l.item=[l.item]),t=l.item.map((function(e,l){return"object"!=typeof e&&(e={label:e}),{tag:"li",class:["breadcrumb-item",(e=$.extend({},{href:null,label:null,active:!1},e)).active?"active":null],attr:{"aria-current":e.active?"page":null},elems:e.active?e.label:{tag:"a",attr:{href:e.href?e.href:"javascript:void(0)",onclick:e.onclick},elems:e.label}}}))),{tag:"nav",class:l.class,attr:{id:l.id,"aria-label":"breadcrumb",style:l.divider?`--bs-breadcrumb-divider: ${l.divider};`:null},elems:{tag:"ol",class:"breadcrumb",elems:t}}}return e.breadcrumb({items:l})}}(ns),function(e){e.btngroup=function(l){return Array.isArray(l)||"string"==typeof l?e.btngroup({elems:l}):{tag:"div",class:[(l=$.extend({},{class:null,label:null,elems:null,vertical:!1,weight:null},l)).vertical?"btn-group-vertical":"btn-group",l.weight?`btn-group-${l.weight}`:null,l.class],attr:{role:"group","aria-label":l.label?l.label:null},elems:l.elems}}}(ns),function(e){e.btntoolbar=function(l){return Array.isArray(l)||"string"==typeof l?e.btntoolbar({elems:l}):{tag:"div",class:["btn-toolbar",(l=$.extend({},{class:null,label:null,gap:2,elems:null},l)).gap?`gap-${l.gap}`:null,l.class],attr:{role:"toolbar","aria-label":l.label?l.label:null},elems:l.elems}}}(ns),function(e){var l={codeprocess:function(e){return e&&(e=(e=(e=e.replace(/({{).+?(}})/gi,"<code>$&</code>")).replace(/{{/gi,"")).replace(/}}/gi,"")),e},build:function(e,t){return t?"string"==typeof t?(e.innerHTML=e.innerHTML+l.codeprocess(t),e):Array.isArray(t)&&t.length>0?(t.forEach((t=>{if(t)if("string"==typeof t)e.innerHTML=e.innerHTML+l.codeprocess(t);else if(t.tag){var n=document.createElement(t.tag);n=l.attr(n,t.id,t.attr,t.class,t.style,t.data),t.elems&&(n=l.build(n,t.elems)),e.appendChild(n)}else t.elems&&(e=l.build(e,t.elems))})),e):l.build(e,[t]):e},attr:function(l,t,n,a,o,s){if(t&&l.setAttribute("id",t),n&&Object.keys(n).forEach((t=>{!n[t]&&""!==n[t]||null===n[t]||(e.core.isFunction(n[t])&&t.startsWith("on")?l.addEventListener(t.startsWith("on")?t.substr(2):t,(function(e){n[t](e.currentTarget,e)})):l.setAttribute(t,n[t]))})),a&&null!==a)if(Array.isArray(a)){var i=a.combine(" ");i&&(l.classList=i)}else l.classList=a;return o&&Object.keys(o).forEach((e=>{o[e]&&null!==o[e]&&(l.style[e]=o[e])})),s&&Object.keys(s).forEach((e=>{s[e]&&l.setAttribute(`data-${e}`,s[e])})),l}};e.build={html:function(e){var t=document.createElement("div");return(t=l.build(t,e)).innerHTML},obj:function(e){var t=document.createElement("div");return(t=l.build(t,e)).childNodes},append:function(e,t){return Array.isArray(e)?e[0]=l.build(e[0],t):e=l.build(e,t),e},prepend:function(l,t){var n=e.build.obj(t);return n&&n.length>0?Array.isArray(l)?$(n[0]).insertBefore(l[0]):$(n[0]).insertBefore(l):l},replace:function(l,t){var n=e.build.obj(t);return n&&n.length>0?Array.isArray(l)?l[0].replaceWith(n[0]):l.replaceWith(n[0]):l},init:function(e){console.time("ns.init"),$(e).find("img[data-ns-src]").get().forEach((e=>{$(e).attr("src",$(e).attr("data-ns-src")),$(e).removeAttr("data-ns-src")})),$(e).find('[data-bs-toggle="tooltip"]').get().forEach((e=>{new bootstrap.Tooltip(e)})),$(e).find('[data-bs-toggle="popover"]').get().forEach((e=>{new bootstrap.Popover(e)})),console.timeEnd("ns.init")}}}(ns),function(e){e.button=function(l){if(l){if("string"==typeof l)return e.button({label:l});(l=$.extend({},{id:null,name:null,class:null,style:null,label:null,labelshow:null,nowarp:!1,value:null,checked:!1,disabled:!1,size:null,weight:null,onclick:null,href:null,icon:null,largeicon:!1,outline:!1,border:!0,rounded:!0,color:null,textcolor:null,type:"button",data:null,badge:null,relativeposition:!1,asst:null,hascontainer:!0,tooltip:null},l)).option&&console.warn("Button has option"),l.id=l.id?l.id:e.core.UUID();var t=[];return l.icon&&t.push({tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:e.icon(l.icon)}),l.label&&t.push({tag:"span",class:[l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option&&!l.segmenttoggle||l.badge?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null].removeEmpty(),elems:l.label}),l.asst&&t.push({tag:"span",class:"visually-hidden",elems:l.asst}),l.badge&&t.push(e.badge(l.badge)),(t="checkbox"===l.type||"radio"===l.type?[{tag:"input",class:"btn-check",attr:{id:l.id,autocomplete:"off",type:l.type,name:l.name,checked:l.checked?"":null,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null}},l.label||l.icon?e.tooltip(l.tooltip,{tag:"label",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{for:l.id},style:l.style,elems:t.slice()}):null]:l.segmenttoggle?[e.tooltip(l.tooltip,{tag:l.href?"a":"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{type:l.type,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null,href:l.href},style:l.style,elems:t.slice()}),{tag:"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.relativeposition?"position-relative":null],data:l.data,attr:{id:l.id,name:l.name,type:l.type,disabled:l.disabled,onclick:l.onclick},style:l.style,elems:{tag:"span",class:"visually-hidden",elems:"Toggle Dropdown"}}]:[e.tooltip(l.tooltip,{tag:l.href?"a":"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.relativeposition?"position-relative":null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{id:l.id,name:l.name,type:l.type,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null,onclick:l.onclick,href:l.href},elems:t.slice()})])&&"object"==typeof t?Array.isArray(t)?1===t.length?t[0]:{elems:t}:t:{elems:t}}}}(ns),function(e){e.card={container:function(l){return Array.isArray(l)||"string"==typeof l?e.card.container({elems:l}):{tag:"div",class:["card",(l=$.extend({},{id:null,class:null,style:null,elems:null,align:null,color:null,textcolor:null,bordercolor:null,border:!0},l)).class,l.align?`text-${l.align}`:null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null,l.border?null:"border-0"],style:l.style,elems:l.elems}},header:function(l){return Array.isArray(l)||"string"==typeof l?e.card.header({elems:l}):{tag:"div",class:["card-header",(l=$.extend({},{class:null,elems:null,color:null,textcolor:null,bordercolor:null},l)).class,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null],elems:l.elems}},body:function(l){return Array.isArray(l)||"string"==typeof l?e.card.body({elems:l}):{tag:"div",class:["card-body",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},footer:function(l){return Array.isArray(l)||"string"==typeof l?e.card.footer({elems:l}):{tag:"div",class:["card-footer",(l=$.extend({},{class:null,muted:!0,color:null,textcolor:null,bordercolor:null,elems:null},l)).class,l.muted?"text-muted":null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null],elems:l.elems}},group:function(l){return Array.isArray(l)||"string"==typeof l?e.card.group({elems:l}):{tag:"div",class:["card-group",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},title:function(l){return Array.isArray(l)||"string"==typeof l?e.card.title({elems:l}):{tag:"h5",class:["card-title",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},subtitle:function(l){return Array.isArray(l)||"string"==typeof l?e.card.subtitle({elems:l}):{tag:"h6",class:["card-subtitle mb-2",(l=$.extend({},{class:null,elems:null,muted:!0,textcolor:null},l)).class,l.textcolor?`text-${l.textcolor}`:null,l.muted?"text-muted":null],elems:l.elems}},link:function(l){return Array.isArray(l)||"string"==typeof l?e.card.subtitle({elems:l}):{tag:"a",class:["card-link",(l=$.extend({},{class:null,elems:null,href:"javascript:void(0)",onclick:null},l)).class],attr:{href:l.href?l.href:null,onclick:l.onclick?l.onclick:null},elems:l.elems}},text:function(l){return Array.isArray(l)||"string"==typeof l?e.card.text({elems:l}):{tag:"p",class:["card-text",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},textsmall:function(l){return Array.isArray(l)||"string"==typeof l?e.card.textsmall({elems:l}):{tag:"p",class:["card-text",(l=$.extend({},{class:null,muted:!0,elems:null,textcolor:null},l)).muted?"text-muted":null,l.textcolor?`text-${l.textcolor}`:null,l.class],elems:{tag:"small",elems:l.elems}}},img:function(l){return"string"==typeof l?e.card.img({src:l}):{tag:"img",class:[(l=$.extend({},{class:null,placement:"top",src:null,alt:null},l)).class,"full"===l.placement?"card-img":null,"top"===l.placement?"card-img-top":null,"bottom"===l.placement?"card-img-bottom":null,"left"===l.placement?"img-fluid rounded-start":null,"right"===l.placement?"img-fluid rounded-end":null],attr:{src:l.src?l.src:null,alt:l.alt?l.alt:null}}},imgoverlay:function(l){return Array.isArray(l)||"string"==typeof l?e.card.imgoverlay({elems:l}):{tag:"div",class:["card-img-overlay",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},horizontal:function(e){return{tag:"div",class:["row",(e=$.extend({},{size:"col-md-4",left:null,right:null,textcolor:null,gap:"0"},e)).textcolor?`text-${e.textcolor}`:null,e.gap?`g-${e.gap}`:null],elems:[{tag:"div",class:e.size,elems:e.left},{tag:"div",class:"col",elems:e.right}]}}}}(ns),function(e){e.carousel=function(l){return"string"==typeof l?e.carousel([l]):Array.isArray(l)?e.carousel({item:l}):(l=$.extend({},{id:null,class:null,style:null,control:!1,touch:!0,slide:!0,fade:!1,indicators:!1,dark:!1,item:null},l)).item&&l.item.length>0?(l.id=l.id||e.core.UUID(),{tag:"div",id:l.id,class:["carousel",l.slide?"slide":null,l.fade?"carousel-fade":null,l.dark?"carousel-dark":null,l.class],style:l.style,attr:{"data-bs-ride":"carousel","data-bs-touch":l.touch?null:"false","data-bs-interval":l.touch?null:"false"},elems:[l.indicators?{tag:"div",class:"carousel-indicators",elems:l.item.map((function(e,t){return"string"==typeof e&&(e={src:e}),e=$.extend({},{class:null,src:null,alt:null,caption:null,text:null,interval:0},e),{tag:"button",class:[0===t?"active":null].removeEmpty(),attr:{type:"button","aria-current":0===t?"true":null,"aria-label":e.caption?e.caption:e.alt?e.alt:`Slide ${t+1}`,"data-bs-slide-to":`${t}`,"data-bs-target":`${l.id}`}}}))}:null,{tag:"div",class:"carousel-inner",elems:l.item.map((function(e,t){return"string"==typeof e&&(e={src:e}),{tag:"div",class:["carousel-item",0===t?"active":null],attr:{"data-bs-interval":(e=$.extend({},{class:null,src:null,alt:null,caption:null,text:null,interval:0},e)).interval&&l.touch?e.interval:null},elems:[{tag:"img",class:["d-block w-100",e.class],attr:{alt:e.alt?e.alt:e.caption?e.caption:null,src:e.src}},e.caption||e.text?{tag:"div",class:"carousel-caption d-none d-md-block",elems:[e.caption?{tag:"h5",elems:e.caption}:null,e.text?{tag:"p",elems:e.text}:null].removeEmpty()}:null].removeEmpty()}}))},l.control?{tag:"button",class:"carousel-control-prev",attr:{type:"button","data-bs-target":`#${l.id}`,"data-bs-slide":"prev"},elems:[{tag:"span",class:"carousel-control-prev-icon",attr:{"aria-hidden":"true"}},{tag:"span",class:"visually-hidden",elems:"Previous"}]}:null,l.control?{tag:"button",class:"carousel-control-next",attr:{type:"button","data-bs-target":`#${l.id}`,"data-bs-slide":"next"},elems:[{tag:"span",class:"carousel-control-next-icon",attr:{"aria-hidden":"true"}},{tag:"span",class:"visually-hidden",elems:"Next"}]}:null]}):void 0}}(ns),function(e){e.close=function(e){return{tag:"button",class:["btn-close",(e=$.extend({},{id:null,class:null,white:!1,disabled:!1},e)).white?"btn-close-white":null,e.class],data:e.data,attr:{id:e.id,type:"button",disabled:e.disabled?"":null,"aria-label":"Close"}}}}(ns),function(e){e.collapse={toggle:function(l){if((l=$.extend({},{target:null,active:!1,id:null,label:null,icon:null,class:null,color:null,textcolor:null,outline:!1,disabled:!1,nowarp:!1,rounded:!0,border:!0,size:null,weight:null},l)).target)return{tag:"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null],attr:{id:l.id,type:"button",disabled:l.disabled?"":null,"aria-controls":l.target,"aria-expanded":l.active?"true":"false","data-bs-target":l.target,"data-bs-toggle":"collapse"},elems:[l.icon?e.icon(l.icon):null,l.label?{tag:"span",class:l.icon?"ms-2":null,elems:l.label}:null]};console.error("ns.collapse.toggle target not provided")},container:function(l){if(l){if(Array.isArray(l))return e.collapse.container({elems:l});if("object"==typeof l)return(l=$.extend({},{id:null,class:null,elems:null},l)).id=l.id?l.id:e.core.UUID(),{tag:"div",attr:{id:l.id},class:["collapse",l.class],elems:l.elems};console.error("Unsupported argument")}else console.error("Unsupported argument")}}}(ns),function(e){e.cont={singlecolumn:function(e){return{tag:"div",class:"container-fluid p-0",elems:{tag:"div",class:"row row-cols-1 g-2",elems:Array.isArray(e)?e.map((function(e){return{tag:"div",class:"col",elems:e}})):{tag:"div",class:"col",elems:e}}}},stack:function(e){return{tag:"div",class:"container-fluid p-0",elems:{tag:"div",class:"row row-cols-auto g-2",elems:Array.isArray(e)?e.map((function(e){return{tag:"div",class:"col",elems:e}})):{tag:"div",class:"col",elems:e}}}},div:function(l,t){return l&&"string"==typeof l?e.cont.tag({tag:"div",class:l,elems:t}):e.cont.tag({tag:"div",elems:l})},ul:function(l,t){return l&&"string"==typeof l?e.cont.tag({tag:"ul",class:l,elems:t}):e.cont.tag({tag:"ul",elems:l})},ol:function(l,t){return l&&"string"==typeof l?e.cont.tag({tag:"ol",class:l,elems:t}):e.cont.tag({tag:"ol",elems:l})},li:function(l,t){return l&&"string"==typeof l?e.cont.tag({tag:"li",class:l,elems:t}):e.cont.tag({tag:"li",elems:l})},listgroup:function(l,t){return l&&"string"==typeof l?e.cont.ul(["list-group",l].combine(" "),t):e.cont.ul("list-group",l)},listitem:function(l,t){return l&&"string"==typeof l?e.cont.ul(["list-group-item",l].combine(" "),t):e.cont.ul("list-group-item",l)},mxauto:function(l,t){return l&&"string"==typeof l?e.cont.div(["mx-auto",l].combine(" "),t):e.cont.div("mx-auto",l)},btngroup:function(e,l){return e&&"string"==typeof e?{tag:"div",class:["btn-group",e].combine(" "),attr:{role:"group"},elems:l}:{tag:"div",class:"btn-group",attr:{role:"group"},elems:e}},btngroupvertical:function(e,l){return e&&"string"==typeof e?{tag:"div",class:["btn-group-vertical",e].combine(" "),attr:{role:"group"},elems:l}:{tag:"div",class:"btn-group-vertical",attr:{role:"group"},elems:e}},inputgroup:function(l,t){return l&&"string"==typeof l?e.cont.div(["input-group",l].combine(" "),t):e.cont.div("input-group",l)},grid:function(e,l){return{tag:"div",class:"container",elems:{tag:"div",class:["row",e].combine(" "),elems:l.map(((e,l)=>({tag:"div",class:"col",elems:e})))}}},flex:function(l,t){return"string"==typeof l?e.cont.flex({class:l},t):{tag:"div",class:(l=$.extend({},{class:null,elems:null},l)).class?l.class:"d-flex",elems:t}},tag:function(e){return"a"!==(e=$.extend({},{tag:"div",id:null,name:null,class:null,onclick:null,href:null,attr:null,data:null,elems:null},e)).tag||e.href||(e.href="javascript:void(0);"),e.attr||(e.name||e.id||e.onclick||e.href)&&(e.attr={}),["name","id","onclick","href"].forEach((l=>{e[l]&&(e.attr[l]=e[l],delete e[l])})),{tag:e.tag,class:e.class,attr:e.attr,elems:e.elems}}}}(ns),function(e){e.container=function(...l){if(l){if(3===l.length&&"string"==typeof l[0]&&"string"==typeof l[1])return e.container({tag:l[0],class:l[1],elems:l[2]});if(2===l.length&&"string"==typeof l[0])return e.container({tag:"div",class:l[0],elems:l[1]});if(1===l.length&&"object"==typeof l[0]){var t=l[0];return{tag:(t=$.extend({},{tag:"div",style:null,attr:null,class:null,elems:null},t)).tag,class:t.class,style:t.style,attr:t.attr,elems:t.elems}}console.error("Unsupported argument")}else console.error("Unsupported argument")}}(ns),function(e){e.core={errorHandler:function(e){e&&console.error(e)},copyToClipboard:function(l,t){navigator.clipboard.writeText(l),e.toast("/",t||"Copied to clipboard")},theme:function(e){var l=document.getElementById("nstheme");e?(l.href=`https://cdn.jsdelivr.net/npm/bootswatch@5.1.1/dist/${e}/bootstrap.min.css`,l.removeAttribute("disabled")):l.setAttribute("disabled","disabled")},multipleClassSupport:function(e,l){return e?Array.isArray(e)?e.map((function(e){return l.replace("$1",e)})).join(" "):l.replace("$1",e):null},isFunction:function(e){return e instanceof Function},createEnum:function(l){const t={};if(Array.isArray(l))for(const n of l)"string"==typeof n?t[e.core.camelCase(n)]=n:"object"==typeof n?n.hasPropety("key")&&(n.hasPropety("value")?t[e.core.camelCase(n.key)]=n.value:t[e.core.camelCase(n.key)]=n):t[`_${e.core.camelCase(n)}`]=n;else"object"==typeof l&&Object.keys(l).forEach((l=>{t[e.core.camelCase(l)]=value[l]}));return Object.freeze(t)},camelCase:function(e){return e.toLowerCase().replace(/-(.)/g,(function(e,l){return l.toUpperCase()}))},isHTML:function(e){if("string"==typeof e)return/<\/?[a-z][\s\S]*>/i.test(e)},groupBy:function(e,l){const t=new Map;return e.forEach((e=>{const n=l(e),a=t.get(n);a?a.push(e):t.set(n,[e])})),t},dataChangeOnly:function(e,l){var t={};return l&&Object.keys(l).forEach((n=>{l[n]!=e[n]&&(t[n]=l[n])})),t},UUID:function(){return"el-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0;return("x"===e?l:3&l|8).toString(16)}))},parseBool:function(e){if(!e)return!1;switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}},rndBetween:function(e,l){return Math.floor(Math.random()*(l-e+1)+e)},pad:function(e,l,t){return t=t||"0",(e+="").length>=l?e:new Array(l-e.length+1).join(t)+e},entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},escapeHTML:function(l){return String(l).replace(/[&<>"'`=\/]/g,(function(l){return e.core.entityMap[l]}))},highlight:function(l,t){l&&($(l).addClass("ns-highlight"),setTimeout((function(e){$(e).removeClass("ns-highlight")}),t||12e3,l),e.core.focus(l))},focus:function(e){var l=$("#navbar").outerHeight();l=l||0,console.log("Navbar height : "+l),$([document.documentElement,document.body]).animate({scrollTop:$(e).offset().top+l-50},300)},validate:function(l){var t=$(l).find("[name]");t&&$.each(t,(function(l,t){$(t).attr("required")&&(e.core.getvalue(t)?$(t).removeClass("is-invalid").addClass("is-valid"):$(t).addClass("is-invalid").removeClass("is-valid"))}));var n=$(l).find(".is-invalid");return!(n&&n.length>0)},getvalue:function(e){switch($(e).attr("type")){case"checkbox":case"radio":return $(e).is(":checked")?$(e).val():null;case"range":case"number":return"any"===$(e).attr("step")?parseFloat($(e).val()):parseInt($(e).val(),10);case"date":let l=$(e).val();return l?moment(l,"YYYY-MM-DD").format("YYYY-MM-DD"):null;case"datetime-local":let t=$(e).val();return t?moment(t,"YYYY-MM-DDTHH:mm").format("YYYY-MM-DDTHH:mm"):null;case"time":let n=$(e).val();return n?moment(n,"HH:mm").format("HH:mm"):null;case"month":let a=$(e).val();return a?moment(a,"YYYY-MM").format("YYYY-MM"):null;case"week":let o=$(e).val();return o?moment(o,"YYYY-Www").format("YYYY-Www"):null;default:let s=$(e).val();return s||null}}}}(ns);var ns_global_data={};!function(e){e.data={set:function(e,l){ns_global_data[e]=l},get:function(e){return ns_global_data[e]},clear:function(e){e?fn_data.isexist(e)&&delete ns_global_data[e]:ns_global_data={}},isexist:function(e){return!!ns_global_data[e]}}}(ns),function(e){const l=[{key:"okay",value:["Okay"]},{key:"close",value:["Close"]},{key:"cancel",value:["Cancel"]},{key:"okayonly",value:["Okay"]},{key:"closeonly",value:["Close"]},{key:"cancelonly",value:["Cancel"]},{key:"savechangesclose",value:["Save changes","Close"]},{key:"understandclose",value:["Understand","Close"]},{key:"sendmessageclose",value:["Send message","Close"]},{key:"searchcancel",value:["Search","Cancel"]},{key:"sortcancel",value:["Sort","Cancel"]},{key:"yesno",value:["Yes","No"]},{key:"yescancel",value:["Yes","Cancel"]},{key:"yesclose",value:["Yes","Close"]},{key:"yescontinueno",value:["Yes, continue","No"]},{key:"yescontinuecancel",value:["Yes, continue","Cancel"]},{key:"yescontinueclose",value:["Yes, continue","Close"]},{key:"yessaveno",value:["Yes, save","No"]},{key:"yessavecancel",value:["Yes, save","Cancel"]},{key:"yessaveclose",value:["Yes, save","Close"]},{key:"yesdeleteno",value:["Yes, delete","No"]},{key:"yesdeletecancel",value:["Yes, delete","Cancel"]},{key:"yesdeleteclose",value:["Yes, delete","Close"]},{key:"continueno",value:["Continue","No"]},{key:"continuecancel",value:["Continue","Cancel"]},{key:"continueclose",value:["Continue","Close"]},{key:"saveno",value:["Save","No"]},{key:"savecancel",value:["Save","Cancel"]},{key:"saveclose",value:["Save","Close"]},{key:"deleteno",value:["Delete","No"]},{key:"deletecancel",value:["Delete","Cancel"]},{key:"deleteclose",value:["Delete","Close"]},{key:"okaycancel",value:["Okay","Cancel"]},{key:"okayclose",value:["Okay","Close"]},{key:"okaycontinuecancel",value:["Okay, Continue","Cancel"]},{key:"okaycontinueclose",value:["Okay, Continue","Close"]},{key:"okaysavecancel",value:["Okay, save","Cancel"]},{key:"okaysaveclose",value:["Okay, save","Close"]},{key:"okaydeletecancel",value:["Okay, Delete","Cancel"]},{key:"okaydeleteclose",value:["Okay, Delete","Close"]},{key:"yesnocancel",value:["Yes","No","Cancel"]},{key:"yesnoclose",value:["Yes","No","Close"]},{key:"yescontinuenocancel",value:["Yes, continue","No","Cancel"]},{key:"yescontinuenoclose",value:["Yes, continue","No","Close"]},{key:"yessavenocancel",value:["Yes, save","No","Cancel"]},{key:"yessavenoclose",value:["Yes, save","No","Close"]},{key:"yesdeletenocancel",value:["Yes, delete","No","Cancel"]},{key:"yesdeletenoclose",value:["Yes, delete","No","Close"]},{key:"continuenocancel",value:["Continue","No","Cancel"]},{key:"continuenoclose",value:["Continue","No","Close"]},{key:"savenocancel",value:["Save","No","Cancel"]},{key:"savenoclose",value:["Save","No","Close"]},{key:"deletenocancel",value:["Delete","No","Cancel"]},{key:"deletenoclose",value:["Delete","No","Close"]}];var t={build:function(l){if("string"==typeof(l=$.extend({},{id:null,class:null,static:!0,elems:null,title:null,icon:null,footer:null,button:null,show:!1,animate:!0,scrollable:!0,center:!0,size:null,fullscreen:!1,hastab:!1,focus:!0},l)).button)return l.button=t.dlgbtn(l.button),l.button||(l.button=[]),t.build(l);if(Array.isArray(l.button)){l.id=l.id?l.id:e.core.UUID();var n=[],a=[],o=[],s=[],i=[];(l.title||l.icon)&&(l.icon&&("string"==typeof l.icon?n.push({elems:e.icon({icon:l.icon,class:"me-2"})}):n.push({elems:e.icon(l.icon)})),l.title&&n.push({tag:"span",class:"text-capitalize",elems:l.title}),(l.title||l.icon)&&(n=[{tag:"h5",class:"modal-title",elems:n.slice()}]),n.push({tag:"button",class:"btn-close",attr:{type:"button","data-bs-dismiss":"modal"}}),n=[{tag:"div",class:"modal-header",elems:n.slice()}]),a.push({tag:"div",class:["modal-body",l.hastab?"p-0":null],elems:l.elems});var r=!1;l.footer&&(r=!0,s.push({tag:"div",class:"footer-ctl float-start",elems:l.footer}));var c=!1;l.button&&l.button.length>0&&null!==l.button[0]&&(c=!0,l.button.forEach(((t,n)=>{t.id=t.id?t.id:`${l.id}-btn-${n}`,t.color=t.color?t.color:0===n?"primary":"text-secondary",t.class="ms-3 btn-modal",i.unshift({elems:e.button(t)})})),i=[{tag:"div",class:"justify-content-end",elems:i.slice()}]),o.push({tag:"div",class:"container-fluid g-0 p-0",elems:{tag:"div",class:"row align-items-center",elems:[{tag:"div",class:"col",elems:s},{tag:"div",class:"col-auto",elems:i}]}}),o={tag:"div",class:"modal-footer",elems:o.slice()};var u=[];return u=(u=u.concat(n)).concat(a),(c||r)&&(u=u.concat(o)),u={tag:"div",class:["modal",l.animate?"fade":null,l.show?"show":null],attr:{id:l.id,tabindex:"-1","data-bs-backdrop":l.static?"static":null,"data-bs-keyboard":l.static?"false":null,"data-bs-focus":l.focus?"true":null},elems:{tag:"div",class:["modal-dialog",l.scrollable?"modal-dialog-scrollable":null,l.center?"modal-dialog-centered":null,l.size?`modal-${l.size}`:null,l.fullscreen?"string"==typeof l.fullscreen?`modal-fullscreen-${l.fullscreen}`:"modal-fullscreen":null],elems:{tag:"div",class:"modal-content",elems:u.slice()}}}}return l.button=[l.button],t.build(l)},show:function(l,...n){if(l)if("string"==typeof l)t.show($(l)[0],...n);else{var a=$(l).attr("data-bs-backdrop"),o=$(l).attr("data-bs-keyboard"),s=$(l).attr("data-bs-focus"),i=new bootstrap.Modal(l,{backdrop:"static"!==a||"static",keyboard:"true"===o,focus:"true"===s});$(l).find(".btn-modal").get().reverse().forEach(((a,o)=>{$(a).on("click",(function(){n&&o<=n.length&&e.core.isFunction(n[o])?n[o](l)&&t.hide(l):t.hide(l)}))}));var r=$(".modal");if(r&&r.length>1){var c=r[r.length-2];$(c).removeClass("show"),"static"===$(c).attr("data-bs-backdrop")&&$(c).next(".modal-backdrop").removeClass("show")}$(l).on("hidden.bs.modal",(function(e){var n=$(".modal");if(n&&n.length>1){var a=n[n.length-2];$(a).addClass("show"),"static"===$(a).attr("data-bs-backdrop")&&$(a).next(".modal-backdrop").addClass("show")}setTimeout((function(e){t.destroy(e)}),3e3,l)})),$(l).on("shown.bs.modal",(function(l){e.build.init(this),$(this).modal("handleUpdate")})),i.show()}},hide:function(e){if(e)if("string"==typeof e)t.hide($(e)[0]);else{var l=bootstrap.Modal.getInstance(e);l&&l.hide()}},destroy:function(e){if(e)if("string"==typeof e)t.destroy($(e)[0]);else{var l=bootstrap.Modal.getInstance(e);if(l){try{$(l).destroy()}catch{}$(e).remove()}}},getvalue:function(l){var t=$(l).find("[name]").get();if(t&&t.length>0){var n={};return t.forEach((l=>{let t=$(l).attr("type"),a=e.core.getvalue(l),o=$(l).attr("name");"radio"===t?(void 0===n[o]&&(n[o]=null),a&&(n[o]=a)):"checkbox"===t?(void 0===n[o]&&(n[o]=[]),a&&n[o].push(a)):n[o]=a})),n}return null},validate:function(l){return e.core.validate(l)},dlgbtn:function(e){if(e){var t=l.find((l=>l.key===e.toLowerCase()));if(t)return t.value.map((function(e){return e.toLowerCase().indexOf("delete")>-1?{label:e,color:"danger"}:{label:e}}));console.error(`Unknow button : ${e}`)}return null},dlgmsg:function(...l){if(l&&l.length>0){var t=null,n=null;return 1===l.length?t=l[0]:l.length>1&&(n=l[0],t=l[1]),n?{elems:{tag:"div",class:"row g-0",elems:[{tag:"div",class:"col-auto align-self-start pt-1 me-3",elems:e.icon({icon:n,size:"3x"})},{tag:"div",class:"col align-self-center",elems:t}]}}:t}}};e.dlg={msgbox:function(l,n,a){return new Promise(((o,s)=>{try{a=a||"okayonly";var i=e.core.UUID();e.build.append(document.body,t.build({id:i,title:document.title,button:a,elems:t.dlgmsg(l,n)})),t.show(`#${i}`,(function(){return o(),!0}),(function(){try{s()}catch(e){}return!0}),(function(){try{s()}catch(e){}return!0}))}catch(e){s(e)}}))},confirmbox:function(l,n,a){return new Promise(((o,s)=>{try{a=a||"yesnocancel";var i=e.core.UUID();e.build.append(document.body,t.build({id:i,title:document.title,button:a,elems:t.dlgmsg(l,n)})),t.show(`#${i}`,(function(e){return o(e),!0}),(function(){try{s()}catch(e){}return!0}),(function(){try{s()}catch(e){}return!0}))}catch(e){s(e)}}))},inputbox:function(l,n,a){return new Promise(((o,s)=>{try{a=a||"okaycancel";var i=e.core.UUID(),r=[];n&&r.push({tag:"p",elems:n}),"string"==typeof l?r.push(e.input({type:l,name:"value"})):Array.isArray(l)?r=r.concat(l):r.push(l),e.build.append(document.body,t.build({id:i,title:document.title,button:a,elems:{elems:r}})),$(`#${i}`).on("shown.bs.modal",(function(e){var l=e.target,t=$(l).find(".modal-body").find("[name]:last");t&&$(t).on("keyup",(function(e){13===e.keyCode&&$(l).find(".modal-footer").find(".btn:last").click()}));var n=$(l).find(".modal-body").find("[name]:first");n&&$(n).focus()})),t.show(`#${i}`,(function(e){if(t.validate(e)){var l=t.getvalue(e);return l?l.dlg?console.warn("ns.dlg has input with name dlg that should be used to send container"):l.dlg=`#${$(e).attr("id")}`:(l={}).dlg=`#${$(e).attr("id")}`,o(l),!0}return!1}),(function(){try{s()}catch(e){}return!0}),(function(){try{s()}catch(e){}return!0}))}catch(e){s(e)}}))},box:function(l){return new Promise(((n,a)=>{try{(l=$.extend({},{id:null,title:null,button:null,onshow:null,fullscreen:"sm-down"},l)).id=l.id?l.id:e.core.UUID(),e.build.append(document.body,t.build(l)),$(`#${l.id}`).on("shown.bs.modal",(function(t){var n=t.target,a=$(n).find(".modal-body").find("[name]:last");a&&$(a).on("keyup",(function(e){13===e.keyCode&&$(n).find(".modal-footer").find(".btn:last").click()}));var o=$(n).find(".modal-body").find("[name]:first");o&&$(o).focus(),e.core.isFunction(l.onshow)&&l.onshow($(`#${l.id}`))})),t.show(`#${l.id}`,(function(e){if(t.validate(e)){var l=t.getvalue(e);return l?l.dlg?console.warn("ns.dlg has input with name dlg that should be used to send container"):l.dlg=`#${$(e).attr("id")}`:(l={}).dlg=`#${$(e).attr("id")}`,n(l),!0}return!1}),(function(){try{a()}catch(e){}return!0}),(function(){try{a()}catch(e){}return!0}))}catch(e){a(e)}}))}}}(ns),function(e){e.dropdown=function(l){(l=$.extend({},{id:null,name:null,class:null,style:null,label:null,labelshow:null,value:null,checked:!1,disabled:!1,nowarp:!1,weight:null,outline:!1,border:!0,rounded:!0,color:null,textcolor:null,dark:!1,onclick:null,href:null,icon:null,largeicon:!1,option:null,arrow:"down",aligment:null,autoclose:!0,type:"button",data:null,offset:null,reference:null,navlink:!1,container:"dropdown",segmenttoggle:!1},l)).id=l.id?l.id:e.core.UUID(),l.navlink&&(l.container="nav-item",l.href=l.href||"javascript:void(0)"),l.segmenttoggle&&"dropdown"===l.container&&(l.container="btn-group");var t={tag:l.href?"a":"button",class:[l.navlink?"nav-link":"btn",l.segmenttoggle?null:"dropdown-toggle",l.color?l.outline?`btn-outline-${l.color}`:`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.weight?`btn-${l.weight}`:null,l.class],attr:{id:l.segmenttoggle?null:l.id,"data-bs-toggle":l.segmenttoggle?null:"dropdown","data-bs-reference":l.segmenttoggle?null:l.reference,"data-bs-offset":l.segmenttoggle?null:l.offset,"data-bs-auto-close":l.segmenttoggle?null:l.autoclose?l.autoclose:"false","aria-expanded":l.segmenttoggle?null:"false",href:l.href},elems:[l.icon?{tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:e.icon(l.icon)}:null,l.label?{tag:"span",class:[l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option&&!l.segmenttoggle?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null].removeEmpty(),elems:l.label}:null]},n=l.segmenttoggle?{tag:l.href?"a":"button",class:["dropdown-toggle dropdown-toggle-split btn",l.color?l.outline?`btn-outline-${l.color}`:`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.weight?`btn-${l.weight}`:null,l.class],attr:{id:l.id,"data-bs-toggle":"dropdown","data-bs-reference":l.reference,"aria-expanded":"false","data-bs-offset":l.offset,"data-bs-auto-close":l.autoclose?l.autoclose:"false"},elems:{tag:"span",class:"visually-hidden",elems:"Toggle Dropdown"}}:null,a={tag:"div",class:["dropdown-menu",l.dark?"dropdown-menu-dark":null,e.core.multipleClassSupport(l.aligment,"dropdown-menu-$1")],attr:{"aria-labelledby":l.id},elems:e.ddoption(l.option,l.value)};return"start"===l.arrow&&l.segmenttoggle?{tag:l.container?"nav-item"===l.container?"li":"div":null,class:[l.segmenttoggle?l.container:null,l.arrow?`drop${l.arrow}`:null],elems:[e.btngroup([n,a].removeEmpty()),t]}:{tag:l.container?"nav-item"===l.container?"li":"div":null,class:[l.container,l.arrow?`drop${l.arrow}`:null],elems:[t,n,a].removeEmpty()}}}(ns),function(e){e.example=function(l){(l=$.extend({},{id:null,title:null,msg:null,label:null,class:null,cstart:18,cend:6,code:null,dark:!1,sample:null,beautify:function(e){return js_beautify(e,{preserve_newlines:!0,max_preserve_newlines:180,keep_array_indentation:!1,brace_style:"collapse,preserve-inline"})},container:e.cont.singlecolumn},l)).id=l.id?l.id:e.core.UUID();var t=[];if(l.title&&t.push({tag:l.code?"h4":"h2",class:"pt-3",attr:{id:l.id},elems:[{tag:"span",elems:l.title},{tag:"a",class:"anchorjs-link ps-2",attr:{"aria-label":"Anchor","data-anchorjs-icon":"#",href:"javascript:void(0)",onclick:"ns.core.focus($(this).parent())"}}]}),l.msg&&(Array.isArray(l.msg)||(l.msg=[l.msg]),$.each(l.msg,(function(e,l){"string"==typeof l?t.push({tag:"p",elems:l}):t.push(l)}))),l.code){var n=[];l.sample&&Object.keys(l.sample).forEach((t=>{var a=e.core.UUID(),o=l.sample[t].toString();n.push({tag:"a",class:"d-flex justify-content-start py-1 px-3 flex-wrap bg-light text-decoration-none",attr:{"data-bs-toggle":"collapse","aria-expanded":"false","aria-controls":a,role:"button",href:`#${a}`},elems:[{tag:"code",class:"d-flex align-items-center",elems:`${t}()`}]}),n.push({tag:"div",class:"collapse card-body ns-code bg-light pt-0",attr:{id:a},elems:[{tag:"code",class:"overflow-auto d-block",elems:{tag:"pre",attr:{lang:"js"},class:"prettyprint",elems:l.beautify(o)}}]})}));var a=l.code.toString();t.push({tag:"div",class:"card border-0",elems:[{tag:"div",class:[l.class?l.class:null,"card-body ns-example border rounded-top",l.dark?"bg-dark":null],elems:l.label?e.button({label:l.label,color:"primary",onclick:function(e){l.code()}}):l.container(l.code())},l.sample?{elems:n}:null,{tag:"div",class:"d-flex justify-content-between py-1 px-3 flex-wrap bg-light",elems:[{tag:"code",class:"fw-bold d-flex align-items-center",elems:"code()"},{tag:"button",class:"btn-clipboard btn btn-outline-primary btn-sm",elems:"Copy",attr:{role:"button",onclick:function(l){e.core.copyToClipboard(a,"Code copied to clipboard")}}}]},{tag:"div",class:"card-body ns-code bg-light rounded-bottom pt-0",elems:[{tag:"code",class:"overflow-auto d-block",elems:{tag:"pre",attr:{lang:"js"},class:"prettyprint",elems:l.beautify(a)}}]}].removeEmpty()})}return{tag:"div",class:"mb-5 ns-example",attr:{id:l.title?null:l.id},elems:t}}}(ns),function(e){e.file={fn:{onview:function(l){var t=$(l).closest(".file-upload-controller"),n=$(t).find("input[type='hidden']"),a=$(n).val();a&&(a.indexOf(",")>-1?e.file.view(a.split(","),l):e.file.view(a,l))},onchange:function(e){var l=$(e).closest(".file-upload-controller"),t=$(l).find("input[type='hidden']"),n=$(t).attr("id"),a=$(t).val(),o=$(`#${n}-view`),s=$(`#${n}-delete`);a?($(o).removeAttr("disabled").removeClass("disabled btn-secondary").addClass("btn-success"),$(s).removeAttr("disabled").removeClass("disabled btn-secondary").addClass("btn-danger")):($(o).prop("disabled",!0).addClass("disabled btn-secondary").removeClass("btn-success"),$(s).prop("disabled",!0).addClass("disabled btn-secondary").removeClass("btn-danger"))},ondelete:function(e){var l=$(e).closest(".file-upload-controller"),t=$(l).find("input[type='hidden']");$(t).val(""),$(t).trigger("change")},onupload:function(l){var t=$(l).closest(".file-upload-controller"),n=$(t).find("input[type='hidden']"),a=$(n).attr("data-ns-accept"),o=$(n).attr("data-ns-multiple");a=a||"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html",o=!!o&&e.core.parseBool(o),e.file.upload({multiple:o}).then((e=>{$(n).val(e),$(n).trigger("change")}),e.core.errorHandler)}},ctl:function(l){(l=$.extend({},{id:null,name:null,class:null,label:null,readonly:!1,disabled:!1,multiple:!1,size:"col-12",value:null,onchange:null,valid:null,invalid:null,accept:"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html"},l)).id=l.id?l.id:e.core.UUID();var t=[];l.label&&t.push({tag:"label",class:"form-label",attr:{for:l.id},elems:l.label});var n=[];n.push({tag:"input",class:[l.class],attr:{id:l.id,name:l.name,type:"hidden",readonly:l.readonly,disabled:l.disabled,value:l.value,onchange:["ns.file.fn.onchange(this);",l.onchange?l.onchange:null].combine(""),"data-ns-accept":l.accept,"data-ns-multiple":l.multiple},elems:null}),n.push({tag:"div",class:"row",elems:{tag:"div",class:"btn-group",elems:[e.button({id:`${l.id}-view`,label:"View",icon:"eye",color:l.value?"success":"secondary",class:"w-100",disabled:!l.value,onclick:"ns.file.fn.onview(this)"}),e.button({id:`${l.id}-delete`,icon:"times",color:l.value?"danger":"secondary",class:"w-0",disabled:!!l.disabled||(!!l.readonly||!l.value),onclick:"ns.file.fn.ondelete(this)"}),e.button({id:`${l.id}-upload`,icon:"upload",color:"primary",class:"w-0",disabled:!!l.disabled||!!l.readonly,onclick:"ns.file.fn.onupload(this)"})]}}),l.valid&&n.push({tag:"div",class:"valid-feedback",elems:l.valid}),l.invalid&&n.push({tag:"div",class:"invalid-feedback",elems:l.invalid});return{tag:"div",class:"file-upload-controller",elems:l.size?[{tag:"div",class:l.size,elems:t.concat(n)}]:t.concat(n)}},upload:function(l){return new Promise(((t,n)=>{var a=e.core.UUID();l=$.extend({},{accept:"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html",multiple:!1,cancelafter:18e4},l),e.build.append(document.body,{tag:"input",attr:{id:a,type:"file",multiple:l.multiple,accept:l.accept?l.accept:null},style:{display:"none"}}),$(`#${a}`).change((function(){$(this).addClass("upload-in-progress"),e.api.upload({obj:$(`#${a}`),progress:function(e){}}).then((e=>{t(e),$(`#${a}`).remove()})).catch((e=>{n(e)}))})),$(`#${a}`).trigger("click"),l.cancelafter>0&&setTimeout((function(e){if(!$(e).hasClass("upload-in-progress")){parseFloat(l.cancelafter/6e4).toFixed(1);$(e).remove()}}),l.cancelafter,`#${a}`)}))},save:function(l){return new Promise(((t,n)=>{l?"string"==typeof l?e.file.save([l]).then((e=>{t(e)})).catch((e=>{n(e)})):e.api.put({name:`file/${l.combine(",")}`}).then((e=>{t(e)})).catch((e=>{n(e)})):n()}))},delete:function(l){return new Promise(((t,n)=>{l?"string"==typeof l?e.file.delete([l]).then((e=>{t(e)})).catch((e=>{n(e)})):e.api.delete({name:`file/${l.combine(",")}`}).then((e=>{t(e)})).catch((e=>{n(e)})):n()}))},info:function(l){return new Promise(((t,n)=>{l?"string"==typeof l?e.file.info([l]).then((e=>{t(e)})).catch((e=>{n(e)})):e.api.get({name:`file-info/${l.combine(",")}`}).then((e=>{t(e)})).catch((e=>{n(e)})):n()}))},download:function(l,t){var n=e.core.UUID();e.build.append(document.body,{tag:"a",attr:{id:n,href:`api/file/${l}`,download:t||null,hidden:!0}}),$(`#${n}`)[0].click(),setTimeout((function(e){$(`#${e}`).remove()}),300,n)},view:function(l,t){if(l){if("string"==typeof l)return e.file.view([l],t);e.loading.start(t).then((()=>e.file.info(l))).then((l=>{if(e.loading.stop(t),l)if(1===l.length)switch(l[0].mimetype){case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":case"image/x-windows-bmp":e.dlg.box({title:null,button:null,static:!1,size:"lg",elems:{tag:"div",elems:{tag:"img",class:"img-fluid mx-auto d-block rounded btn p-0",attr:{"data-ns-src":`api/file/${l[0].id}`,onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`}}}});break;default:e.file.download(l[0].id,l[0].filename)}else{var n=12;switch(l.length){case 1:n=12;break;case 2:n=6;break;case 3:n=4;break;default:n=3}var a=[];l.forEach((t=>{switch(t.mimetype){case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":case"image/x-windows-bmp":a.push({tag:"div",class:`col-${n}`,elems:{tag:"div",class:"btn border p-1",attr:{onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`},elems:{tag:"img",class:"img-fluid mx-auto d-block rounded",attr:{"data-ns-src":`api/file/${t.id}`}}}});break;default:a.push({tag:"div",class:`d-flex align-items-stretch col-${n}`,elems:{tag:"div",class:"btn border p-1 d-flex justify-content-center w-100",attr:{onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`},elems:{tag:"span",class:"align-self-center",elems:e.icon({icon:"download",size:"2x"})}}})}})),e.dlg.box({title:null,button:null,static:!1,size:"lg",elems:{tag:"div",class:"container p-0",elems:{tag:"div",class:"d-flex justify-content-center row g-3",elems:a}}})}})).catch((l=>{e.loading.stop(t)}))}}}}(ns),function(e){const l=[{key:"i",icon:"info-circle",bgcolor:"primary",textcolor:"white"},{key:"!-danger",icon:"exclamation-triangle",bgcolor:"danger",textcolor:"white"},{key:"!!",icon:"exclamation-triangle",bgcolor:"danger",textcolor:"white"},{key:"!",icon:"exclamation-triangle",bgcolor:"warning",textcolor:null},{key:"?",icon:"question-circle",bgcolor:"success",textcolor:"white"},{key:"-",icon:"minus-circle",bgcolor:"danger",textcolor:"white"},{key:"x",icon:"times-circle",bgcolor:"danger",textcolor:"white"},{key:"/",icon:"check-circle",bgcolor:"success",textcolor:"white"},{key:"save",icon:"save",bgcolor:"success",textcolor:"white"},{key:"delete",icon:"trash",bgcolor:"danger",textcolor:"white"},{key:"lock",icon:"lock",bgcolor:"warning",textcolor:null},{key:"shield",icon:"shield-alt",bgcolor:"danger",textcolor:"white"},{key:"logout",icon:"door-open",bgcolor:"secondary",textcolor:null}];e.sIcon=function(e){if(e){var t=l.find((l=>l.key===e));if(t)return t}return null},e.icon=function(l){if(l){if("string"==typeof l)return e.icon({icon:l});if(!0===l.spinner)return l;var t=e.sIcon(l.icon);if(t&&(l.icon=t.icon,l.color=t.bgcolor),"favicon"===l.icon)return{tag:"img",class:"favicon",attr:{src:"./img/favicon.ico"}};var n=[];if((l=$.extend({},{icon:null,class:null,style:"fas",fixwidth:!0,size:null,rotate:null,stack:0,spin:!1,color:null,elems:null},l)).size&&n.push(`fa-${l.size}`),l.class&&(Array.isArray(l.class)?n.push(l.class.combine(" ")):n.push(l.class)),l.stack>0&&(n.push(`fa-stack-${l.stack}x`),1===l.stack&&n.push("fa-inverse")),l.color&&n.push(`text-${l.color}`),l.fixwidth&&n.push("fa-fw"),l.rotate)switch(l.rotate){case 90:case 180:case 270:n.push(`fa-rotate-${l.rotate}`);case"horizontal":case"vertical":case"both":n.push(`fa-flip-${l.rotate}`)}return l.spin&&n.push("fa-spin"),l.icon,l.elems&&Array.isArray(l.elems)&&2===l.elems.length?(n.push("fa-stack"),{tag:"span",class:n,elems:l.elems.map(((t,n)=>{var a=l.elems.length-n;return t.stack=a,e.icon(t)}))}):(n.push(l.style),n.push(`fa-${l.icon}`),{tag:"i",class:n,elems:l.elems})}}}(ns),function(e){e.img=function(l){if(l){if("string"==typeof l)return e.img({src:l});var t={tag:"img",class:[(l=$.extend({},{id:null,class:null,src:null,alt:null,width:null,height:null,fluid:!1,thumbnail:!1,caption:null,captionclass:null},l)).fluid?"img-fluid":null,l.thumbnail?"img-thumbnail":null,l.fluid||l.thumbnail?null:"d-inline-block align-text-top",l.class?l.class:null].combine(" "),attr:{src:l.src?l.src:null,alt:l.alt?l.alt:null,width:l.width?l.width:null,height:l.height?l.height:null}};return l.caption?{tag:"figure",class:"figure",elems:[t,{tag:"figcaption",class:["figure-caption",l.captionclass],elems:l.caption}]}:t}}}(ns),function(e){var l=function(e,l){var t=$(e).parent(),n=$(t).find("input[type='number']"),a=parseInt($(n).val(),10),o=$(n).attr("min"),s=$(n).attr("max");o=o?parseInt(o,10):Number.MIN_VALUE,s=s?parseInt(s,10):Number.MAX_VALUE,a+l>=o&&a+l<=s?$(n).val(a+l):a+l>s?$(n).val(s):a+l<o&&$(n).val(o)};e.input=function(t){(t=$.extend({},{id:null,name:null,class:null,label:null,labelsize:null,ctlsize:null,hiddenlabel:null,nowarp:!1,floatinglabel:!1,btncheck:!1,type:"text",placeholder:null,min:0,max:0,step:0,rows:0,plaintext:!1,readonly:!1,disabled:!1,multiple:!1,size:null,style:null,weight:null,value:null,checked:!1,inline:!1,onchange:null,onclick:null,onfocus:null,onblur:null,required:!1,valid:null,invalid:null,before:null,beforetype:"text",after:null,aftertype:"text",option:null,data:null,numctl:!1,addctl:null,tooltip:null,flexcontainer:!1,hascontainer:!0},t)).id=t.id?t.id:e.core.UUID(),t.floatinglabel&&(["checkbox","radio","switch","file"].indexOf(t.type)>-1||t.readonly?t.floatinglabel=!1:t.label&&!t.placeholder&&(t.placeholder=t.label));var n=[];!t.floatinglabel&&t.label&&-1===["checkbox","radio","switch"].indexOf(t.type)&&n.push({tag:"label",class:[,t.labelsize?`col-form-label col-${t.labelsize}`:"form-label"],attr:{for:t.id},elems:t.label});var a=[];t.before?"text"===t.beforetype?a.push({tag:"span",class:"input-group-text",elems:t.before}):a=a.concat(t.before):"number"===t.type&&!0===t.numctl&&a.push(e.button({label:e.icon("minus"),color:"primary",onclick:function(e){l(e,-t.step?-t.step:1)}}));var o=[];switch(t.type){case"switch":case"checkbox":case"radio":o.push(e.tooltip(t.tooltip,{tag:"input",class:[t.btncheck?"btn-check":"form-check-input",t.class],attr:{id:t.id,"aria-label":t.hiddenlabel?t.hiddenlabel:null,name:t.name,type:"switch"===t.type?"checkbox":t.type,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,readonly:t.readonly?"":null,disabled:t.disabled?"":null,required:t.required?"required":null,value:t.value,checked:t.checked?"checked":null,autocomplete:t.btncheck?"off":null,list:s,onchange:t.onchange,onclick:t.onclick,onfocus:t.onfocus,onblur:t.onblur},style:t.style,elems:null})),t.label&&o.push({tag:"label",class:t.btncheck?["btn",t.color?`btn-${t.color}`:"btn-primary"]:"form-check-label",attr:{for:t.id},elems:t.label});break;case"textarea":o.push(e.tooltip(t.tooltip,{tag:"textarea",class:[t.plaintext&&t.readonly?"form-control-plaintext":"form-control",t.weight&&!(t.before||t.after||null!==t.addctl||"number"===t.type&&!0===t.numctl)?`form-control-${t.weight}`:null,t.label&&t.floatinglabel?[t.before||t.after?"rounded-0":null,t.before?"rounded-end":null,t.after?"rounded-start":null].combine(" "):null,t.class],attr:{id:t.id,"aria-label":t.hiddenlabel?t.hiddenlabel:null,name:t.name,placeholder:t.placeholder,readonly:t.readonly?"":null,disabled:t.disabled?"":null,required:t.required?"required":null,rows:t.rows,onchange:t.onchange,onclick:t.onclick,onfocus:t.onfocus,onblur:t.onblur},style:t.style,elems:t.value}));break;case"select":o.push(e.tooltip(t.tooltip,{tag:"select",class:[t.plaintext&&t.readonly?"form-select-plaintext":"form-select",t.weight&&!(t.before||t.after||null!==t.addctl||"number"===t.type&&!0===t.numctl)?`form-select-${t.weight}`:null,t.label&&t.floatinglabel?[t.before||t.after?"rounded-0":null,t.before?"rounded-end":null,t.after?"rounded-start":null].combine(" "):null,t.class],data:t.data,attr:{id:t.id,"aria-label":t.hiddenlabel?t.hiddenlabel:null,name:t.name,placeholder:t.placeholder,readonly:t.readonly?"":null,disabled:t.disabled?"":null,required:t.required?"required":null,multiple:t.multiple,size:t.rows,onchange:t.onchange,onclick:t.onclick,onfocus:t.onfocus,onblur:t.onblur},style:t.style,elems:e.option(t.option,t.value)}));break;case"datalist":o.push({tag:"datalist",attr:{id:t.id},elems:e.option(t.option)});break;default:var s=t.option?e.core.UUID():null;o.push(e.tooltip(t.tooltip,{tag:"input",class:["range"!==t.type&&"button"!==t.type&&"submit"!==t.type&&"reset"!==t.type?[t.plaintext&&t.readonly?"form-control-plaintext":"form-control",,t.weight&&!(t.before||t.after||null!==t.addctl||"number"===t.type&&!0===t.numctl)?`form-control-${t.weight}`:null].combine(" "):"button"!==t.type&&"submit"!==t.type&&"reset"!==t.type?"form-range":null,"color"===t.type?["form-control-color",t.floatinglabel?"w-100":null].combine(" "):null,t.label&&t.floatinglabel?[t.before||t.after||t.numctl?"rounded-0":null,t.before?"rounded-end":null,t.after?"rounded-start":null].combine(" "):t.label&&t.numctl?"rounded-0":null,t.class],data:t.data,attr:{id:t.id,"aria-label":t.hiddenlabel?t.hiddenlabel:null,name:t.name,type:t.type,role:"button"===t.type&&"submit"===t.type&&"reset"===t.type?"button":null,placeholder:t.placeholder,min:t.min,max:t.max,step:t.step,readonly:t.readonly?"":null,disabled:t.disabled?"":null,required:t.required?"required":null,value:["date","datetime","month","datetime-local","time","week"].indexOf(t.value)>-1?moment(t.value):t.value,list:s,onchange:t.onchange,onclick:t.onclick,onfocus:t.onfocus,onblur:t.onblur},style:t.style,elems:null})),t.option&&o.push({tag:"datalist",attr:{id:s},elems:e.option(t.option)})}t.floatinglabel&&t.label?(o.push({tag:"label",attr:{for:t.id},elems:t.label}),a.push({tag:"div",class:"form-floating flex-grow-1",elems:o})):a=a.concat(o),t.after?"text"===t.aftertype?a.push({tag:"span",class:"input-group-text",elems:t.after}):a=a.concat(t.after):"number"===t.type&&!0===t.numctl?a.push(e.button({label:e.icon("plus"),color:"primary",onclick:function(e){l(e,t.step?t.step:1)}})):null!==t.addctl&&a.push(e.button({label:e.icon("plus"),color:"primary",onclick:t.addctl})),t.valid&&a.push({tag:"div",class:"valid-feedback",elems:t.valid}),t.invalid&&a.push({tag:"div",class:"invalid-feedback",elems:t.invalid}),t.labelsize&&(a=[{tag:"div",class:t.ctlsize?`col-${t.ctlsize}`:"col-auto",elems:a}]),(t.before||t.after||null!==t.addctl||"number"===t.type&&!0===t.numctl)&&(a=t.flexcontainer?[{tag:"div",class:["d-flex",t.class],elems:a}]:[{tag:"div",class:["input-group",t.nowarp?"flex-nowarp":null,t.weight?`input-group-${t.weight}`:null,t.valid||t.invalid?"has-validation":null],elems:a}]),["checkbox","radio","switch"].indexOf(t.type)>-1&&(a=t.flexcontainer?[{tag:"div",class:["d-flex",t.class],elems:a}]:[{tag:"div",class:[t.label&&t.btncheck?null:"form-check",t.label&&t.inline?"form-check-inline":null,"switch"===t.type?" form-switch":null,t.valid||t.invalid?"has-validation":null],elems:a}]);var i=[];return(i=t.size||"hidden"===t.type?[{tag:"div",class:[t.size,"hidden"===t.type?"d-none":null].combine(" "),elems:n.concat(a)}]:n.concat(a))&&"object"==typeof i?Array.isArray(i)?1===i.length?i[0]:{elems:i}:i:(console.log(i),console.warn(`input #${t.id} has many element`),{elems:i})}}(ns),function(e){e.inputgroup={container:function(l){return Array.isArray(l)||"string"==typeof l?e.inputgroup.container({elems:l}):[(l=$.extend({},{id:null,label:null,class:null,elems:null,nowrap:!1},l)).label?{tag:"label",attr:{for:l.id?l.id:null,class:"form-label",elems:l.label}}:null,{tag:"div",class:["input-group",l.nowrap?"flex-nowrap":null,l.class],elems:l.elems}].removeEmpty()},text:function(l){return Array.isArray(l)||"string"==typeof l?e.inputgroup.text({elems:l}):{tag:"div",class:["input-group-text",(l=$.extend({},{id:null,class:null,elems:null},l)).class],attr:{id:l.id},elems:l.elems}}}}(ns),function(e){var l={options:{base:{container:null,id:e.core.UUID(),dbname:"",control:null,listprocessor:function(e){return new Promise(((l,t)=>{e&&e.length>0?l([{group:null,items:e.map((e=>({key:e._id,label:e.name})))}]):l(null)}))},onpagechange:function(e,l){console.warn("Unhandle onpagechange")}},query:{filter:null,sort:null,field:{__v:0,state:0},limit:10,skip:0},item:{key:null,label:null,sub:null,control:null,controlstyle:"btn-group",icon:null,picture:null,checked:!1,key:null,onclick:null},group:{key:null,label:null,icon:null,bigicon:!1,picture:null,key:null,elems:null}},db:function(l,t,n){var a=e.data.get(l);return new Promise(((l,o)=>{var s=null;e.api.post({sender:n,name:`list/${a.dbname}`,data:t}).then((e=>(s=e.total,a.listprocessor(e.data)))).then((e=>{l({total:s,data:e})})).catch((e=>{o(e)}))}))},clear:function(e){var l=$(`#${e}`);l&&l.length>0&&($(l).find(".list-group").remove(),$(l).find(".ns-list-header").remove(),$(l).find(".ns-list-page").remove(),$(l).find(".list-group-item").remove())},build:{page:function(l){return l.total>0?e.pagination({limit:l.limit,skip:l.skip,total:l.total,max:5,onchange:function(l,t){e.list.fn.onPageChange(l,t)}}):null},item:function(t){var n=[];return(t=$.extend({},l.options.item,t)).label&&n.push({tag:"div",class:"ns-item-label me-2",elems:t.label}),t.sub&&n.push({tag:"div",elems:{tag:"small",class:"text-muted me-2 ns-item-sub",elems:Array.isArray(t.sub)?t.sub.combine(" | "):t.sub}}),n=[{tag:"div",elems:n.slice()}],t.icon&&n.unshift({tag:"div",class:"ns-item-icon",elems:e.icon({size:"lg",elems:[{icon:"circle"},{icon:t.icon}]})}),t.picture&&n.unshift({tag:"div",class:"ns-item-picture",elems:{tag:"div",elems:{tag:"img",attr:{"data-ns-src":`api/file/${t.picture}`}}}}),n.unshift({tag:"div",class:"ns-item-check",elems:e.icon({size:"lg",elems:[{icon:"circle"},{icon:"check"}]})}),n=[{tag:"div",elems:n.slice()}],t.control&&Array.isArray(t.control)&&("btn-group"===t.controlstyle?n.push({tag:"div",class:"ns-item-control",attr:{onclick:"ns.list.fn.preventBubble(event)"},elems:{tag:"div",class:"btn-group",elems:t.control.map((l=>e.button(l)))}}):"dropdown"===t.controlstyle?n.push({tag:"div",class:"ns-item-control",attr:{onclick:"ns.list.fn.preventBubble(event)"},elems:e.button({option:t.control})}):n.push({tag:"div",class:"ns-item-control",attr:{onclick:"ns.list.fn.preventBubble(event)"},elems:t.control})),{tag:"div",class:["list-group-item","list-group-item-action",t.checked?"ns-checked":null],attr:{"data-key":t.key,"data-ns-onclick":t.onclick&&"string"==typeof t.onclick?t.onclick:null,onclick:"ns.list.fn.itemOnClick(this,event)"},elems:n}},group:function(t){var n=[];return(t=$.extend({},l.options.group,t)).label&&n.push({tag:"h5",class:"ns-item-label",elems:t.label}),t.icon&&(t.bigicon?n.unshift({tag:"div",class:"display-1",elems:e.icon({size:"lg",icon:t.icon})}):n.unshift({tag:"div",class:"ns-item-icon",elems:e.icon({size:"lg",elems:[{icon:"circle"},{icon:t.icon}]})})),t.picture&&n.unshift({tag:"div",class:"ns-item-picture",elems:{tag:"div",elems:{tag:"img",attr:{"data-ns-src":`api/file/${t.picture}`}}}}),n&&n.length>0?[{tag:"div",class:"ns-list-header",attr:{"data-key":t.key},elems:n},{tag:"div",class:"list-group ns-list-group",attr:{"data-ns-group-key":t.key},elems:t.elems}]:[{tag:"div",class:"list-group ns-list-group",attr:{"data-ns-group-key":""},elems:t.elems}]},list:function(e,t){return t=$.extend({},l.options.query,t),new Promise(((n,a)=>{l.db(e,t).then((e=>{var a=[];e.data&&e.data.length>0?$.each(e.data,((e,t)=>{a.push.apply(a,l.build.group({label:t.group,elems:t.items.map((e=>l.build.item(e)))}))})):a.push.apply(a,l.build.group({label:"No Data"})),n({page:l.build.page({total:e.total,skip:t.skip,limit:t.limit}),li:{elems:a}})})).catch((e=>{a(e)}))}))},container:function(t,n){return new Promise(((a,o)=>{n=$.extend({},l.options.query,n),l.build.list(t,n).then((l=>{var n=e.data.get(t);$(n.container).empty(),e.build.append(n.container,{tag:"div",class:"ns-list-container ns-mode-normal",attr:{id:t},elems:[n.control,l.li,l.page].removeEmpty()}),e.build.init(n.container),a()})).catch((e=>{o(e)}))}))}},getChecked:function(e){var l=$(e).closest(".ns-list-container"),t=$(l).find(".ns-checked");return t&&t.length>0?$(t).get().map((e=>({key:$(e).attr("data-key"),title:$(e).find(".ns-label").text()}))):null}},t={preventBubble:function(e){e.stopPropagation()},itemOnClick:function(e,l){l.stopPropagation();var t=$(e).closest(".ns-list-container");if(t&&t.length>0&&$(t).hasClass("ns-mode-check"))$(e).hasClass("ns-checked")?$(e).removeClass("ns-checked"):$(e).addClass("ns-checked");else{var n=$(e).attr("data-ns-onclick");n&&window[n](e,l)}},onPageChange:function(l,t){var n=$(t).closest(".ns-list-container"),a=$(n).attr("id");e.data.get(a).onpagechange(l,t)},mode:{normal:function(e){var l=$(e).closest(".ns-list-container");l&&l.length>0&&($(l).find(".ns-list-control.ns-mode-check").removeClass("ns-fadeslidein").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).removeClass("ns-mode-check").addClass("ns-mode-normal")}),500,l),$(l).find(".ns-list-control.ns-mode-normal").removeClass("ns-fadeslideout").addClass("ns-fadeslidein"))},check:function(e){var l=$(e).closest(".ns-list-container");l&&l.length>0&&($(l).find(".ns-list-control.ns-mode-check").removeClass("ns-fadeslideout").addClass("ns-fadeslidein"),setTimeout((function(e){$(e).removeClass("ns-mode-normal").addClass("ns-mode-check")}),500,l),$(l).find(".ns-list-control.ns-mode-normal").removeClass("ns-fadeslidein").addClass("ns-fadeslideout"))}},check:function(e){var l=$(e).closest(".ns-list-container");if(l&&l.length>0){let e=$(l).find(".list-group-item");$(l).find(".list-group-item.ns-checked").length===e.length?$(e).removeClass("ns-checked"):$(e).addClass("ns-checked")}}};e.list={fn:t,checked:function(e){return l.getChecked(e)},refresh:function(t,n){return new Promise(((a,o)=>{l.build.list(t,n).then((n=>{l.clear(t);var o=$(`#${t}`)[0];e.build.append(o,[n.li,n.page]),e.build.init(o),a()})).catch((e=>{o(e)}))}))},build:function(t,n){(t=$.extend({},l.options.base,t)).dbname?t.container?(e.data.set(t.id,t),l.build.container(t.id,n).then((()=>{e.build.init(t.container)}))):console.error("ns.list opt required container"):console.error("ns.list opt required dbname")},query:function(l,t){e.query(l,t)},excel:function(l,t){var n=$(l).closest(".ns-list-container").attr("id"),a=e.data.get(n);e.api.download({sender:l,name:`excel/${a.dbname}`,data:t}).catch((e=>{rej(e)}))}}}(ns),function(e){e.listctl=function(l){if((l=$.extend({},{class:null,icon:null,title:null,menu:null,fixed:!1,main:null,check:null,query:null,excel:null},l)).main||l.check||"string"==typeof l.excel||"string"==typeof l.query||e.core.isFunction(l.query)||e.core.isFunction(l.excel)){var t={},n=[],a=null;(l.title||l.menu)&&(a={tag:"div",class:"d-flex justify-content-center me-md-2 me-0 mb-2 w-sm-100 w-md-auto",elems:[l.menu?l.option?e.dropdown({icon:l.icon,color:"primary",onclick:l.menu&&"string"==typeof l.menu?l.menu:null,option:l.menu&&"string"!=typeof l.menu&&Array.isArray(l.menu)?l.menu:null,optionarrow:!1,label:l.title}):e.button({icon:l.icon,color:"primary",onclick:l.menu&&"string"==typeof l.menu?l.menu:null,label:l.title}):{tag:"h5",class:"m-0 ps-2",elems:l.title}]});var o=null;l.main&&(Array(l.main)||(l.main=[l.main]),o=e.cont.btngroup(l.main.map((function(l){return l.option?e.dropdown(l):e.button(l)}))));var s=null;if((l.check||"string"==typeof l.excel||"string"==typeof l.query||e.core.isFunction(l.excel)||e.core.isFunction(l.query))&&(s=e.cont.btngroup("ms-2",[l.check?e.button({icon:"tasks",color:"primary",onclick:"ns.list.fn.mode.check(this)"}):null,e.core.isFunction(l.excel)||"string"==typeof l.excel?e.button({icon:"file-excel",color:"primary",onclick:l.excel}):null,e.core.isFunction(l.query)||"string"==typeof l.query?e.button({icon:"cog",color:"primary",onclick:l.query}):null].removeEmpty())),(o||s||a)&&(t.normal=[],a&&t.normal.push(a),t.normal.push(e.cont.mxauto("d-none d-md-flex mb-2")),o||s)){var i={tag:"div",class:"mb-2",elems:[o||null,s||null].removeEmpty()};t.normal.push(i)}if(l.check){var r=[];r.push(e.button({icon:"check-double",color:"primary",label:"All",onclick:"ns.list.fn.check(this)"})),$.each(l.check,(function(l,t){r.push(e.button(t))})),t.check=[a||null,e.cont.mxauto("d-none d-md-flex mb-2"),{tag:"div",class:"mb-2",elems:[e.button({icon:"chevron-left",color:"primary",onclick:"ns.list.fn.mode.normal(this)"}),r?e.cont.btngroup("ms-2",r):null].removeEmpty()}].removeEmpty()}else t.check=null;return t.normal&&n.push({tag:"div",class:["ns-list-control","ns-mode-normal","btn-toolbar","justify-content-center","justify-content-between-md",l.fixed?"position-fixed top-0":null,l.class],attr:{role:"toolbar"},elems:t.normal}),t.check&&n.push({tag:"div",class:["ns-list-control","ns-mode-check","btn-toolbar","justify-content-center","justify-content-between-md",l.fixed?"position-fixed top-0":null,l.class],attr:{role:"toolbar"},elems:t.check}),n&&n.length>0?{elems:n}:null}return null}}(ns),function(e){e.listgroup={container:function(l){return Array.isArray(l)||"string"==typeof l?e.listgroup.container({elems:l}):((l=$.extend({},{type:"ul",class:null,flush:!1,numbered:!1,horizontal:null,elems:null,label:null,id:null},l)).horizontal&&(Array.isArray(l.horizontal)?$.each(l.horizontal,(function(e){!0===l.horizontal[e]?l.horizontal[e]="horizontal":"horizontal"!==l.horizontal[e]&&(l.horizontal[e]=`horizontal-${l.horizontal[e]}`)})):!0===l.horizontal?l.horizontal="horizontal":"horizontal"!==l.horizontal&&(l.horizontal=`horizontal-${l.horizontal}`)),l.label?(l.id=l.id||e.core.UUID(),[{tag:"label",class:"form-label",attr:{for:l.id},elems:l.label},{tag:"ul"===l.type&&l.numbered?"ol":l.type,class:["list-group",l.class,l.flush?"list-group-flush":null,l.numbered?"list-group-numbered":null,e.core.multipleClassSupport(l.horizontal,"list-group-$1")],attr:{id:l.id},elems:l.elems}]):{tag:"ul"===l.type&&l.numbered?"ol":l.type,class:["list-group",l.class,l.flush?"list-group-flush":null,l.numbered?"list-group-numbered":null,e.core.multipleClassSupport(l.horizontal,"list-group-$1")],elems:l.elems})},item:function(l){return Array.isArray(l)||"string"==typeof l?e.listgroup.item({elems:l}):(l=$.extend({},{class:null,flush:!1,elems:null,active:!1,disabled:!1,color:null,action:!1,href:null,onclick:null,check:null,value:null,name:null,id:null},l)).check?{tag:"label",class:["list-group-item","switch"===l.check?"form-switch":null,l.disabled?"disabled":null,l.action?"list-group-item-action":null,l.color?`list-group-item-${l.color}`:null,l.class],attr:{onclick:l.onclick,disabled:!l.href&&l.disabled?"":null},elems:[{tag:"input",class:["form-check-input","me-2","switch"===l.check?"ms-0":null],attr:{type:"switch"===l.check?"checkbox":l.check,value:l.value,name:l.name,id:l.id,checked:l.active?"":null}},l.elems]}:{tag:l.href?"a":e.core.isFunction(l.onclick)?"button":"li",class:["list-group-item",l.active?"active":null,l.disabled?"disabled":null,l.action?"list-group-item-action":null,l.color?`list-group-item-${l.color}`:null,l.class],attr:{href:l.href,onclick:l.onclick,disabled:!l.href&&l.disabled?"":null,tabindex:l.href&&l.disabled?"-1":null,"aria-disabled":l.href&&l.disabled?"true":null},elems:l.elems}}}}(ns),function(e){e.loading={start:function(e){return new Promise(((l,t)=>{if(e){if($(e).hasClass("page-link")&&(e=$(e).parent()),!$(e).hasClass("loading")){if($(e).addClass("loading"),$(e).addClass("disabled"),$(e).attr("disabled","disabled"),"button"===$(e).attr("type")){var n=$(e).find(".fas.fa-fw")[0];n&&($(n).attr("ns-old-class",$(n).attr("class")),$(n).attr("class","fas fa-fw fa-circle-notch fa-spin"))}l()}}else l()}))},stop:function(e){return new Promise(((l,t)=>{if(e){if($(e).hasClass("page-link")&&(e=$(e).parent()),$(e).hasClass("loading")){if($(e).removeClass("loading"),$(e).removeClass("disabled"),$(e).removeAttr("disabled"),"button"===$(e).attr("type")){var n=$(e).find("[ns-old-class]")[0];n&&($(n).attr("class",$(n).attr("ns-old-class")),$(n).removeAttr("ns-old-class"))}l()}}else l()}))}}}(ns),function(e){e.menu={item:function(l){if(l&&Array.isArray(l))return{tag:"ul",class:"btn-toggle-nav",elems:l.map((function(l){return"string"==typeof l&&(l={label:l}),{tag:"li",elems:{tag:"div",class:["d-inline-block",(l=$.extend({},{label:null,icon:null,onclick:null,href:"javascript:void(0)",active:!1},l)).active?"active":null],attr:{onclick:l.onclick?l.onclick:null,role:"button"},elems:[e.icon(l.icon),{tag:"span",class:[l.icon?"ms-2":null],elems:l.label}].removeEmpty()}}}))};console.error("Unsupported argument")},container:function(l){if(l)return(l=$.extend({},{id:null,title:null,active:!1,class:null,item:null},l)).id=l.id?l.id:e.core.UUID(),{elems:[{tag:"div",elems:{tag:"div",class:["btn-toggle",l.active?"collapsed":null].combine(" "),attr:{"data-bs-toggle":"collapse","data-bs-target":`#${l.id}`,"aria-expanded":l.active?"true":"false",role:"button"},elems:{tag:"span",class:"ms-2",elems:l.title}}},{tag:"div",attr:{id:l.id},class:["collapse",l.active?"show":null,l.class].combine(" "),elems:l.item}]};console.error("Unsupported argument")}}}(ns),function(e){e.nav=function(l){if(l){if("string"==typeof l)return l;if(l.elems||(l={elems:l.slice()}),(l=$.extend({},{id:null,style:null,align:null,size:null,animate:!0,border:!0,rounded:!0,flush:!1,elems:[]},l)).id=l.id?l.id:e.core.UUID(),Array.isArray(l.elems)){var t=-1;l.elems.forEach(((e,l)=>{-1===t&&e.active&&(t=l)})),-1===t&&"object"==typeof l.elems[0]&&(l.elems[0].active=!0);var n=[],a=[],o={id:null,label:null,icon:null,disable:!1,active:!1,option:null,elems:null};if(l.elems.forEach(((t,s)=>{var i=[];if("string"==typeof t&&(t=0===s?{label:t,active:!0}:{label:t}),(t=$.extend({},o,t)).id=t.id?t.id:t.elems&&t.elems.length>0?e.core.UUID():null,t.icon&&("string"==typeof t.icon?i.push({elems:e.icon({icon:t.icon,class:"me-2"})}):i.push({elems:e.icon(t.icon)})),t.label&&i.push({elems:[{tag:"span",elems:t.label}]}),i=[{tag:"a",class:["nav-link",t.option?"dropdown-toggle":null,t.active?"active":null,t.disabled?"disabled":null],attr:{href:`#${t.id}-body`,id:`${t.id}-head`,"data-bs-toggle":t.option?"dropdown":"tab"===l.style?"tab":"pill"===l.style?"pill":"tab","data-ns-hasbody":t.elems?"true":null,role:t.option?"button":null},elems:i.slice()}],t.option&&i.push({tag:"ul",class:"dropdown-menu",elems:e.ddoption(t.option)}),i={tag:"li",class:["nav-item",t.option?"dropdown":null],attr:{role:"presentation"},elems:i.slice()},n=n.concat(i),t.elems){var r={tag:"div",class:["tab-pane",l.animate?"fade":null,t.active?"active show":null],attr:{id:`${t.id}-body`,role:"tabpanel"},elems:t.elems};a=a.concat(r)}})),n={tag:"ul",class:["nav",a&&a.length>0?"tab"===l.style?"card-"+("vertical-right"===l.align?"footer":"header")+"-tabs":"pill"===l.style?"card-"+("vertical-right"===l.align?"footer":"header")+"-pills":"card-"+("vertical-right"===l.align?"footer":"header")+"-tabs":null,l.column?"flex-column mb-auto":null,l.flush?"nav-flush":null,"tab"===l.style?"nav-tabs":"pill"===l.style?"nav-pills":null,"right"===l.align?"justify-content-end":"center"===l.align?"justify-content-center":"vertical"===l.align||"vertical-right"===l.align?"flex-column mb-auto":"fill"===l.align?"nav-fill":null],attr:{id:`${l.id}-head`,role:"tablist"},elems:n.slice()},a=a&&a.length>0?{tag:"div",attr:{id:`${l.id}-body`},class:"tab-content",elems:a.slice()}:null){var s=[];return s=l.size?"vertical-right"===l.align?{tag:"div",class:"row g-0",elems:[{tag:"div",class:"col",elems:{tag:"div",class:"card-body",elems:a}},{tag:"div",class:[l.size,"card-footer border-0 p-2"],elems:{tag:"div",elems:n}}]}:{tag:"div",class:"row g-0",elems:[{tag:"div",class:[l.size,"card-header border-0"],elems:{tag:"div",elems:n}},{tag:"div",class:"col",elems:{tag:"div",class:"card-body",elems:a}}]}:[{tag:"div",class:"card-header",elems:n},{tag:"div",class:"card-body",elems:a}],{tag:"div",class:["card p-0",l.rounded?null:"rounded-0",l.border?null:"border-0"],elems:s}}return n}return l.elems=[l.elems],e.nav(l)}}}(ns),function(e){e.navbar={container:function(l){return Array.isArray(l)?e.navbar.container({elems:l}):{tag:"nav",class:["navbar",(l=$.extend({},{id:null,class:null,containerfluid:!0,containerclass:null,expand:null,light:"light",color:null,position:null,style:null,elems:[]},l)).expand||""===l.expand?""===l.expand?"navbar-expand":`navbar-expand-${l.expand}`:null,l.light?`navbar-${l.light}`:null,l.color?`bg-${l.color}`:null,l.class?l.class:null,l.position?l.position:null],style:l.style?l.style:null,elems:{tag:"div",class:[!0===l.containerfluid?"container-fluid":!1===l.containerfluid?"container":e.core.multipleClassSupport(l.containerfluid,"container-$1"),l.containerclass?l.containerclass:null],elems:l.elems}}},brand:function(l){if("string"==typeof l)return e.navbar.brand({label:l});(l=$.extend({},{id:null,class:null,href:null,onclick:null,label:null,icon:null,img:null},l)).heading&&console.warn("ns.navbar.brand has heading");var t=[l.img?{tag:"img",attr:{src:l.img,width:30,height:24,alt:""}}:null,l.icon?e.icon(l.icon):null,l.label&&(l.img||l.icon)?{tag:"span",class:"ms-2",elems:l.label}:l.label].removeEmpty();return l.href?{tag:"a",class:["navbar-brand",l.class],attr:{href:l.href?l.href:"javascript:void(0)",id:l.id?l.id:null,onclick:l.onclick},elems:t}:{tag:"span",class:["navbar-brand","mb-0","h1",l.class],attr:{id:l.id?l.id:null,onclick:l.onclick},elems:t}},toggler:function(l){return"string"==typeof l?e.navbar.toggler({id:l}):{tag:"button",class:["navbar-toggler",(l=$.extend({},{id:null,class:null,icon:e.icon("bars"),toggle:"collapse"},l)).class],attr:{type:"button","data-bs-toggle":l.toggle?l.toggle:null,"data-bs-target":l.id?`#${l.id}`:null,"aria-controls":l.id?l.id:null,"aria-expanded":"false","aria-label":"Toggle navigation"},elems:l.icon}},formcontainer:function(l){return Array.isArray(l)?e.navbar.formcontainer({elems:l}):{tag:"form",class:["d-flex",(l=$.extend({},{id:null,class:null,elems:null},l)).class],attr:{id:l.id?l.id:null},elems:l.elems}},collapsecontainer:function(l){return Array.isArray(l)?e.navbar.collapsecontainer({elems:l}):{tag:"div",class:["collapse","navbar-collapse",(l=$.extend({},{id:null,class:null,elems:null},l)).class],attr:{id:l.id?l.id:null},elems:l.elems}},offcanvascontainer:function(l){return Array.isArray(l)?e.navbar.offcanvascontainer({elems:l}):{tag:"div",class:["offcanvas","offcanvas-end",(l=$.extend({},{id:null,title:null,class:null,elems:null},l)).class],attr:{id:l.id?l.id:null,tabindex:"-1","aria-labelledby":l.id?`${l.id}-label`:null},elems:[{tag:"div",class:"offcanvas-header",elems:[{tag:"h5",class:"offcanvas-title",attr:{id:l.id?`${l.id}-label`:null},elems:l.title},{tag:"button",class:"btn-close text-reset",attr:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}}]},{tag:"div",class:"offcanvas-body",elems:l.elems}]}},itemcontainer:function(l){return Array.isArray(l)?e.navbar.itemcontainer({elems:l}):{tag:"div",class:["navbar-nav",(l=$.extend({},{id:null,class:null,scroll:null,mxauto:!0,parenttype:null,elems:null},l)).mxauto?"me-auto":null,"collapse"===l.parenttype?"mb-2 mb-lg-0":null,"offcanvas"===l.parenttype?"justify-content-end flex-grow-1 pe-3":null,l.class,l.scroll?"navbar-nav-scroll":null],attr:{style:l.scroll?`--bs-scroll-height: ${l.scroll};`:null},elems:l.elems}},item:function(l){return"string"==typeof l?e.navbar.item({label:l}):((l=$.extend({},{id:null,class:null,option:null,href:"javascript:void(0)",onclick:null,icon:null,largeicon:!1,label:null,labelshow:null,active:!1,disabled:!1},l)).option&&null===l.id&&(l.id=e.core.UUID()),{tag:"div",class:["nav-item d-flex align-content-center flex-wrap",l.option?"dropdown":null],attr:{id:l.id&&null===l.option?l.id:null,onclick:l.onclick?l.onclick:null},elems:[{tag:"a",class:["nav-link text-md-center",l.active?"active":null,l.disabled?"disabled":null,l.option?"dropdown-toggle":null],attr:{"aria-current":l.active?"page":null,href:l.href?l.href:null,id:l.id?l.id:null,role:"button","data-bs-toggle":l.option?"dropdown":null,"aria-expanded":l.option?"false":null},elems:[{tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:l.icon?e.icon(l.icon):null},{tag:"span",class:[l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null].removeEmpty(),elems:l.label}].removeEmpty()},l.option?{tag:"ul",class:"dropdown-menu w-100 w-md-auto",attr:{"aria-labelledby":l.id?l.id:null},elems:e.ddoption(l.option)}:null].removeEmpty()})},text:function(e){return{tag:"span",class:"navbar-text",elems:e}}}}(ns),function(e){var l={build:function(l){(l=$.extend({},{id:null,class:null,bgcolor:null,textcolor:null,placement:"start",close:!0,title:null,scroll:!0,backdrop:!1,elems:null,padding:null,margin:null},l)).id=l.id?l.id:e.core.UUID();var t=null;(l.close||l.title)&&(t={tag:"div",class:"offcanvas-header",elems:[l.title?{tag:"h5",class:"offcanvas-title",attr:{id:`${l.id}-label`},elems:l.title}:null,l.close?{tag:"button",class:"btn-close text-reset",attr:{"data-bs-dismiss":"offcanvas","aria-label":"Close"}}:null].removeEmpty()});var n=null;return l.elems&&(n={tag:"div",class:["offcanvas-body",l.padding?`p-${l.padding}`:null].combine(" "),elems:l.elems}),{tag:"div",class:["offcanvas",l.placement?`offcanvas-${l.placement}`:null,l.margin?`m-0 m-md-${l.margin}`:null,l.class?l.class:null,l.bgcolor?`bg-${l.bgcolor}`:null,l.textcolor?`text-${l.textcolor}`:null].removeEmpty(),attr:{id:l.id,"aria-labelledby":`${l.id}-label`,"data-bs-scroll":l.scroll?"true":"false","data-bs-backdrop":l.backdrop?"true":"false",tabindex:"-1"},elems:[t,n].removeEmpty()}},destroy:function(e){if(e)if("string"==typeof e)l.destroy($(e)[0]);else{var t=bootstrap.Offcanvas.getInstance(e);if(t){try{$(t).destroy()}catch{}$(e).remove()}}},show:function(e){var t=$(`#${e}`)[0],n=new bootstrap.Offcanvas($(`#${e}`)[0]);$(t).on("hidden.bs.offcanvas",(function(e){setTimeout((function(e){l.destroy(e)}),3e3,t)})),n.show()}};e.offcanvas=function(t){t.id=t.id||e.core.UUID(),e.build.append(document.body,l.build(t)),l.show(t.id)}}(ns),function(e){e.option=function(l,t){if(l){if("string"==typeof l)return l;if(!t||Array.isArray(t)){var n=[];return l.forEach((l=>{"string"==typeof l?n.push({tag:"option",attr:{value:l,selected:t&&t.length>0&&t.indexOf(l)>-1?"selected":null},elems:l}):l.value||null===l.value||""===l.value?n.push({tag:"option",attr:{value:l.value,selected:t&&t.length>0&&t.indexOf(l.value)>-1?"selected":null},elems:l.label?l.label:null}):l.label&&l.option&&n.push({tag:"optgroup",attr:{label:l.label},elems:e.option(l.option,t)})})),n}return e.option(l,[t])}},e.ddoption=function(l,t){if(l){var n=[];return l.forEach((l=>{if("string"==typeof l){var a=l;(l={}).label=a}"-"===(l=$.extend({},{elems:null,label:null,value:null,icon:null,disabled:!1,active:!1,href:null,onclick:null,interactive:!0},l)).value?l.label?n.push({tag:"li",elems:{tag:"h6",class:"dropdown-header",elems:l.label}}):n.push({tag:"li",elems:{tag:"hr",class:"dropdown-divider"}}):l.elems?n.push({tag:"li",elems:{tag:"div",elems:l.elems}}):(t&&!l.active&&(Array.isArray(t)?t.indexOf(l.value)>-1&&(active=!0):t===l.value&&(active=!0)),n.push({tag:"li",elems:{tag:l.href?"a":l.interactive?"button":"span",class:[l.interactive?"dropdown-item":"dropdown-item-text",l.disabled?"disabled":null,l.active?"active":null].combine(" "),attr:{href:l.href,onclick:l.onclick,type:!l.href&&l.interactive?"button":null},elems:[l.icon?e.icon(l.icon):null,l.label||l.value?{tag:"span",class:l.icon?"ms-2":null,elems:l.label?l.label:l.value}:null].removeEmpty()}}))})),n}}}(ns),function(e){var l=function(l,t){var n=$(t).closest(".ns-list-page").attr("id");if(n){var a=e.data.get(n);a&&(a.skip=l,e.data.set(n,a),e.core.isFunction(a.onchange)&&a.onchange(l,t),e.build.replace($(t).closest(".ns-list-page").get(),e.pagination(a)))}};e.pagination=function(t){var n=(t=$.extend({},{id:null,total:0,skip:0,limit:0,max:5,weight:null,align:"center",overflow:!0,onchange:null,showfirstlast:!0,shownextprev:!0,firstlabel:null,lastlabel:null,nextlabel:null,prevlabel:null},t)).skip/t.limit+1,a=parseInt(t.total/t.limit,10)+(t.total%t.limit>0?1:0);if(t.id=t.id?t.id:e.core.UUID(),t.total>t.limit){var o=[];t.showfirstlast&&o.push({tag:"li",class:["page-item",n>1?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:n>1?null:"-1","aria-disabled":!(n>1)||null,"aria-label":"First Page",href:"javascript:void(0)",onclick:function(e){l(0,e)}},elems:t.firstlabel?t.firstlabel:e.icon("angle-double-left")}}),t.shownextprev&&o.push({tag:"li",class:["page-item",n>1?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:n>1?null:"-1","aria-disabled":!(n>1)||null,"aria-label":"Previous Page",href:"javascript:void(0)",onclick:function(e){l((n-2)*t.limit,e)}},elems:t.prevlabel?t.prevlabel:e.icon("angle-left")}});var s=1,i=a,r=n;if(t.max>a&&(t.max=a),t.max<3&&(t.max=3),t.max%2==0&&(t.max=t.max+1),i>t.max){var c=parseInt(t.max/2,10)+1;i=r+c-1,(s=r-c+1)<1&&(s=1,i=t.max),i>a&&(s=(i=a)-t.max+1),s<1&&(s=1)}for(;s<=i;s++)o.push({tag:"li",class:["page-item",s===r?"active":null].combine(" "),elems:{tag:"a",class:"page-link",attr:{"aria-label":"Page "+s.toString(),href:"javascript:void(0)",onclick:function(e){var n=parseInt($(e).text(),10);l((n-1)*t.limit,e)}},elems:s.toString()}});return t.shownextprev&&o.push({tag:"li",class:["page-item",n<a?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:n<a?null:"-1","aria-disabled":!(n<a)||null,"aria-label":"Next Page",href:"javascript:void(0)",onclick:function(e){l(n*t.limit,e)}},elems:t.nextlabel?t.nextlabel:e.icon("angle-right")}}),t.showfirstlast&&o.push({tag:"li",class:["page-item",n<a?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:n<a?null:"-1","aria-disabled":!(n<a)||null,"aria-label":"Last Page",href:"javascript:void(0)",onclick:function(e){l((a-1)*t.limit,e)}},elems:t.lastlabel?t.lastlabel:e.icon("angle-double-right")}}),e.data.set(t.id,t),{tag:"div",attr:{id:t.id},class:["d-flex","p-1","ns-list-page",t.align?"justify-content-"+t.align:null,t.overflow?"overflow-auto":null].combine(" "),elems:e.cont.ul(["pagination",t.weight?`pagination-${t.weight}`:null,t.overflow?"mx-5":null].combine(" "),o)}}return null}}(ns),function(e){var l={container:function(t){return Array.isArray(t)?l.container({bar:t}):"number"==typeof t?l.container({bar:[t]}):(t=$.extend({},{id:null,class:null,data:null,tooltip:null,bar:null},t),e.tooltip(t.tooltip,{tag:"div",class:["progress",t.class],attr:{id:t.id},style:{height:t.height>0?`${t.height}px`:null},elems:Array.isArray(t.bar)?t.bar.map((function(e){return l.bar(e)})):l.bar(t.bar)}))},bar:function(t){if("number"==typeof t)return l.bar({value:t});(t=$.extend({},{id:null,class:null,data:null,tooltip:null,label:!1,stripe:!1,animate:!1,min:0,max:100,value:0},t)).value>t.max&&(t.value=t.max),t.value<t.min&&(t.value=t.min);var n=t.max-t.min>0?parseInt(t.value/(t.max-t.min)*100,10):0;return e.tooltip(t.tooltip,{tag:"div",class:["progress-bar",t.class?t.class:null,t.color?`bg-${t.color}`:null,t.stripe?["progress-bar-striped",t.animate?"progress-bar-animated":null].combine(" "):null],data:t.data,attr:{id:t.id?t.id:null,role:"progressbar"},style:{width:`${n}%`},elems:t.label?`${n}%`:"&nbsp;"})}};e.progress=l.container}(ns),function(e){var l={isPrototypeExists:function(e,l){if(e&&"object"==typeof e)try{if(void 0!==e[l])return!0}catch(e){return!1}return!1},filter:{opr:function(e,l){var t=null;if(l)switch(l){case"text":case"tel":case"email":t=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"},{value:"$eqlike",label:e?"&#xf52c; &#xf069;":"Like"},{value:"$nelike",label:e?"&#xf53e; &#xf069;":"Not Like"}];break;case"select":case"check":t=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"}];break;case"date":case"number":t=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"},{value:"$gte",label:e?"&#xf532;":"More Than"},{value:"$lte",label:e?"&#xf537;":"Less Than"}];break;default:console.error("Unhandle query.fn.filter.opr itemtype : "+l)}return t},item:function(t,n,a,o,s){a||(a=n[0].value);var i,r=n.map((function(e){return{value:e.value,label:e.label}})),c=e.input({type:"select",name:"from",onchange:function(e){l.filter.change(e,t)},option:r,value:a,size:""}),u=n.find((e=>e.value===a));i=l.filter.opr(t,u?u.type:null),(o=o||(i?i[0].value:null))&&"$regex"===o?s.startsWith("^((?!")?(o="$nelike",s=s.substring(5,s.length-5)):(o="$eqlike",s=s):o&&"$exists"===o&&(o=s?"$ne":"$eq",s="");var d=e.input({class:[t?"font-fa":null].combine(" "),type:"select",name:"opr",option:i,value:o,size:t?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2"});return e.cont.div("d-flex",[e.cont.div("container p-0",[e.cont.div("row g-2",e.cont.div("d-flex",[c,d,e.button({color:"danger",icon:"trash",onclick:function(e){l.filter.remove(e)}})])),e.cont.div("row mt-2",[e.input({type:u&&u.type?u.type:"text",name:"value",value:s,size:"col-12",placeholder:u.placeholder?u.placeholder:null,option:u&&u.option?u.option:null})])])])},add:function(t,n){var a=$(t).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`);e.build.prepend($(t).closest(".item")[0],e.cont.div(["item col-12",n?"ns-fadeslidein":null].combine(" "),l.filter.item(o.useopricon,o.field,null,null,null))),setTimeout((function(e){$(e).closest(".container").find(".ns-fadeslidein").removeClass("ns-fadeslidein")}),500,t)},change:function(t,n){var a=$(t).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`),s=$(t).closest(".item").find("select[name='opr']"),i=$(t).closest(".item").find("[name='value']"),r=$(t).val(),c=o.field.find((e=>e.value===r)),u=l.filter.opr(o.useopricon,c?c.type:null);e.build.replace($(s).parent(),e.input({class:[o.useopricon?"font-fa":null].combine(" "),type:"select",name:"opr",size:n?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2",value:$(s).val(),option:u})),e.build.replace(i,e.input({type:c&&c.type?c.type:"text",name:"value",size:"",placeholder:c.placeholder?c.placeholder:null,value:e.core.getvalue(i),option:c&&c.option?c.option:null}))},remove:function(e){$(e).closest(".item").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).closest(".item").remove()}),500,e)}},sort:{opr:function(e,l){var t=null;if(l)if(e)switch(l){case"text":case"email":case"select":t=[{value:1,label:"&#xf15d;"},{value:-1,label:"&#xf15e;"}];break;case"tel":case"check":t=[{value:1,label:"&#xf884;"},{value:-1,label:"&#xf885;"}];break;case"date":case"number":t=[{value:1,label:"&#xf162;"},{value:-1,label:"&#xf163;"}];break;default:console.error("Unhandle query.fn.sort.opr itemtype : "+l)}else t=[{value:1,label:"Ascending"},{value:-1,label:"Descending"}];return t},item:function(t,n,a,o){a||(a=n[0].value);var s,i=n.map((function(e){return{value:e.value,label:e.label}})),r=e.input({type:"select",name:"from",onchange:function(e){l.sort.change(e,t)},option:i,value:a,size:""}),c=n.find((e=>e.value===a));s=l.sort.opr(t,c?c.type:null);var u=e.input({class:[t?"font-fa":null].combine(" "),type:"select",name:"opr",option:s,value:o||(s?s[0].value:null),size:t?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2"});return e.cont.div("d-flex",[r,u,e.button({color:"danger",icon:"trash",onclick:function(e){l.sort.remove(e)}})])},add:function(t,n){var a=$(t).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`);e.build.prepend($(t).closest(".item")[0],e.cont.div(["item col-12",n?"ns-fadeslidein":null].combine(" "),l.sort.item(o.useopricon,o.field,null,null))),setTimeout((function(e){$(e).closest(".container").find(".ns-fadeslidein").removeClass("ns-fadeslidein")}),500,t)},change:function(t,n){var a=$(t).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`),s=$(t).parent().find("select[name='opr']"),i=$(t).val(),r=o.field.find((e=>e.value===i)),c=l.sort.opr(o.useopricon,r?r.type:null);e.build.replace($(s).parent(),e.input({class:[o.useopricon?"font-fa":null].combine(" "),type:"select",name:"opr",size:n?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2",value:$(s).val(),option:c}))},remove:function(e){$(e).closest(".item").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).closest(".item").remove()}),500,e)}},get:function(t){console.log(t);var n=null,a=$(t).find(".ns-filter-rule"),o=$(a).find("select[name='from']");if(o&&o.length>0){var s=[];$.each(o,(function(l,t){var n=$(t).closest(".item").find("select[name='opr']"),a=$(n).val(),o=$(t).closest(".item").find("[name='value']");"$eqlike"===a||"$nelike"===a?"$eqlike"===a?(a="$eq",o={$regex:$(o).val(),$options:"i"}):(a="$ne",o={$regex:"^((?!"+$(o).val()+").)*$",$options:"i"}):null===(o=e.core.getvalue(o))&&("$eq"===a?o={$exists:!1,$eq:null}:"$ne"===a&&(o={$exists:!0,$ne:null})),s.push({f:$(t).val(),o:a,v:o})})),s.sort(((e,l)=>e.f>l.f?1:l.f>e.f?-1:0));var i=[],r=null;s.forEach((e=>{null===r||r!=e.f?l.isPrototypeExists(e.v,"$regex")||l.isPrototypeExists(e.v,"$exists")?i.push([{[e.f]:e.v}]):i.push([{[e.f]:{[e.o]:e.v}}]):l.isPrototypeExists(e.v,"$regex")||l.isPrototypeExists(e.v,"$exists")?i[i.length-1].push({[e.f]:e.v}):i[i.length-1].push({[e.f]:{[e.o]:e.v}}),r=e.f})),n={$and:[]},i.forEach((e=>{if(1===e.length)n.$and.push(e[0]);else{var l=[];e.forEach((e=>{l.push(e)})),n.$and.push({$or:l})}}))}var c=null,u=$(t).find(".ns-sort-rule"),d=$(u).find("select[name='from']");d&&d.length>0&&(c={},$.each(d,(function(e,l){var t=$(l).closest(".item").find("select[name='opr']");c[$(l).val()]=parseInt($(t).val(),10)})));var m=null,p=$(t).find(".ns-field-rule"),g=$(p).find("input[name]");g&&g.length>0&&(m={},$.each(g,(function(l,t){e.core.getvalue(t)||(m[$(t).attr("name")]=0)})));var f=e.core.getvalue($(t).find("input[name='limit']")),b=(e.core.getvalue($(t).find("input[name='step']"))-1)*f;return{filter:n,sort:c,field:m,limit:f,skip:b}}};e.query=function(t,n){n=$.extend({},{callback:null,onshow:null,data:{filter:null,sort:null,limit:10,skip:0,field:{__v:0}},limit:{min:1,max:100,step:5},skip:{min:1,max:100,step:1},field:[{value:"_id",label:"ID",type:"text"}],useopricon:!1},n);var a=e.core.UUID();e.data.set(`${a}-data`,n);var o=[];n.data.filter&&n.data.filter.$and&&n.data.filter.$and.forEach((t=>{if(t.$or)t.$or.forEach((t=>{var a=Object.keys(t)[0],s=t[a],i=Object.keys(s)[0],r=s[i];o.push(e.cont.div("item col-12",l.filter.item(n.useopricon,n.field,a,i,r)))}));else{var a=Object.keys(t)[0],s=t[a],i=Object.keys(s)[0],r=s[i];o.push(e.cont.div("item col-12",l.filter.item(n.useopricon,n.field,a,i,r)))}})),o.push(e.cont.div("item col-12",e.button({icon:"plus",color:"primary",class:"col-12",label:"Add New Filter Rule",onclick:function(e){l.filter.add(e,!0)}})));var s=[];n.data.sort&&Object.keys(n.data.sort).forEach((t=>{n.data.sort[t]&&s.push(e.cont.div("item col-12",l.sort.item(n.useopricon,n.field,t,n.data.sort[t])))})),s.push(e.cont.div("item col-12",e.button({icon:"plus",color:"primary",class:"col-12",label:"Add New Sort Rule",onclick:function(e){l.sort.add(e,!0)}})));var i=[];i.push(e.input({type:"checkbox",label:"Version",name:"__v",size:"col-6",checked:!n.data||!l.isPrototypeExists(n.data.field,"__v")||0!==n.data.field.__v})),$.each(n.field,(function(t,a){i.push(e.input({type:"checkbox",label:a.label,name:a.value,size:"col-6",checked:!n.data||!l.isPrototypeExists(n.data.field,a.value)||0!==n.data.field[a.value]}))})),e.dlg.box({title:"Query",id:a,hastab:!0,onshow:function(e){"function"==typeof n.onshow&&n.onshow(e)},elems:e.nav({border:!1,rounded:!1,align:"center",style:"pill",elems:[{label:"Filter",icon:"filter",elems:[e.cont.div("container ns-filter-rule p-0",e.cont.div("row g-2",o))]},{label:"Sort",icon:"sort",elems:[e.cont.div("container ns-sort-rule p-0",e.cont.div("row g-2",s))]},{label:"Fields",icon:"tasks",elems:[e.cont.div("container ns-field-rule p-0",e.cont.div("row g-2",i))]},{label:"Page",icon:"list-ol",elems:[e.cont.div("container ns-page-rule p-0",e.cont.div("row g-2",[e.input({type:"number",name:"limit",min:n.limit.min,max:n.limit.max,step:n.limit.step,value:n.data.limit,numctl:!0,size:"col-6",label:"Record per Page"}),e.input({type:"number",name:"step",min:n.skip.min,max:n.skip.max,step:n.skip.step,value:n.data.skip/n.data.limit+1,numctl:!0,size:"col-6",label:"Current Page"})]))]}]}),button:"okaycancel"}).then((e=>{n.callback(t,l.get(e.dlg))})).catch((e=>{}))}}(ns),function(e){var l=["Ben","Sammie","Darryl","Mohammad","Felton","Neville","Ward","Len","Ethan","Fredric","Chang","Ira","Robby","Austin","Cletus","Everette","Freeman","Byron","Ismael","Lino","Hobert","Odell","Valentin","Gil","Van","Sydney","Hipolito","Arnold","Donte","Drew","Dewayne","Mike","Brent","Carlos","Bennett","Mario","Chet","Davis","Ramon","Efrain","Rayford","Fred","Emmitt","Willian","Marcelo","Cornell","Gustavo","Scotty","Pete","Edward","Jean","Albert","Carlo","Joel","Rolf","Chadwick","Rashad","Kareem","Seymour","Marion","Andre","Quinton","Marty","Jarrod","Allan","Cedrick","Heath","Ned","Harrison","Matt","Loyd","Jefferson","Fidel","Len","Brandon","Curt","Johnie","Pasquale","Francisco","Drew","Roberto","Micah","Carrol","Fritz","Vince","Chance","Simon","Dane","Randell","Weldon","Milton","Gail","Patricia","Wilson","Edgar","Darrel","Anderson","Sandy","Armand","Mikel","Burton","Bernardo","Neal","Tracy","Vern","Barry","James","Brain","Sergio","Gregorio","Sean","Rupert","Alejandro","Kasey","Marcellus","Arnold","Garland","Clement","Lloyd","August","Raleigh","Art","Otto","Robbie","Chadwick","Hugo","Odell","Darrin","Hershel","Mohammed","Gerry","Ramiro","Cristobal","Ambrose","Wilson","Eugenio","Wes","Olen","Dewey","Cordell","Lorenzo","Prince","Darrell","Hayden","Jerold","Jordan","Juan","Jesse","Thanh","Aldo","Alexander","Bill","Robin","Dalton","Terrance","Cordell","Quinton","Raleigh","Dallas","Bert","Titus","Demarcus","Brady","Elvis","Truman","Hugh","Sid","Amos","Jamel","Tomas","Rocco","Gus","Bradford","Jarod","Percy","Horacio","Robert","Oren","Bret","Wilton","Oscar","Antonio","Gregg","Wilfredo","Armand","Barrett","Everette","Isaac","Hershel","Reginald","Frank","Kory","Jeff","Herschel","Zachariah","Charlie","Ty","Berry","Connie","Rickie"],t=["Marjory","Ok","Hillary","Helene","Vinita","Evelyne","Shemika","Larisa","Vicenta","Adelia","Alline","Annamaria","Nicolle","Iva","Niesha","Therese","Janell","Kerri","Sasha","Shawna","Leighann","Alexandra","Lashandra","Tammera","Jeanette","Maura","Signe","Bonnie","Cassie","Sherita","Liberty","Hannah","Micha","Charlyn","Irmgard","Elisabeth","Rossana","Tobie","Lisbeth","Keitha","Yasmin","Letha","Kathi","Janine","Fernanda","Marianela","Mora","Angelina","Sophie","Patrice","Patria","Maricela","Shenita","Yuette","Rosetta","Herma","Kandra","Voncile","Terese","Emely","Flora","Lynne","Karole","Regina","Elfriede","Delaine","Hanh","Candice","Alysa","Vi","Tai","Yukiko","Noelle","Marketta","Tonia","Lacey","Maxine","Venice","Ashleigh","Alice","Lynell","Danna","Josephine","Maye","Keturah","Lyn","Lucina","Georgina","Verlie","Idell","Katherin","Ela","Luna","Li","Arlena","Marylyn","Lenita","Manuela","Allena","Adah"],n=["@gmail.com","@yahoo.com","@live.com","@outlook.com","@aol.com","@tm.com.my","@kdn.gov.my"];e.rdata={name:()=>{if(ns.core.rndBetween(1,100)>50){for(var e=ns.core.rndBetween(0,l.length-1),n=ns.core.rndBetween(0,l.length-1);e===n;)e=ns.core.rndBetween(0,l.length-1);return[l[e],l[n]].join(" ")}e=ns.core.rndBetween(0,t.length-1),n=ns.core.rndBetween(0,l.length-1);return[t[e],l[n]].join(" ")},email:l=>{l||(l=e.rdata.name());var t=l.split(" "),a=ns.core.rndBetween(0,3),o=ns.core.rndBetween(0,n.length-1),s=ns.core.rndBetween(0,100)>50?ns.core.rndBetween(1,9999):"";return t.join(["_",".","","-"][a]).toLowerCase()+s+n[o]},phone:()=>["0","1",ns.core.rndBetween(0,9),ns.core.rndBetween(1,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9)].join(""),dob:()=>[ns.core.rndBetween(1965,2019),ns.core.pad(ns.core.rndBetween(1,12),2),ns.core.pad(ns.core.rndBetween(1,28),2)].join("-"),opt:e=>e&&e.length>0?e[ns.core.rndBetween(0,e.length-1)].value:null}}($),function(e){e.spinner=function(e){return{spinner:!0,tag:"div",class:["spinner-"+((e=$.extend({},{id:null,class:null,color:null,weight:null,style:null,grow:!1,elems:null,label:"Loading..."},e)).grow?"grow":"border"),e.color?`text-${e.color}`:null,e.class,e.weight?`spinner-${e.grow?"grow":"border"}-${e.weight}`:null],attr:{role:"status",id:e.id,"aria-label":""===e.label?"true":null},style:e.style,elems:""===e.label?null:{tag:"span",class:"visually-hidden",elems:e.label}}}}(ns),function(e){var l={tr:function(e){return"object"==typeof e?{tag:"tr",class:[(e=$.extend({},{id:null,class:null,color:null,elems:null},e)).class?e.class:null,e.color?`table-${e.color}`:null],elems:e.elems?e.elems:null}:{tag:"tr",elems:e}},td:function(e){return"object"==typeof e?{tag:(e=$.extend({},{type:"td",scope:null,id:null,class:null,colspan:null,rowspan:null,elems:null},e)).type,class:e.class?e.class:null,attr:{scope:e.scope,colspan:e.colspan?e.colspan:null,rowspan:e.rowspan?e.rowspan:null},elems:e.elems?e.elems:"&nbsp;"}:{tag:"td",elems:e||"&nbsp;"}}};e.table=function(...e){if(e){var t=null,n=null;if(2===e.length?(t=e[0],n=e[1]):1===e.length&&(n=e[0]),t=$.extend({},{id:null,class:null,headclass:null,bodyclass:null,footerclass:null,color:null,striped:!1,align:null,rownumber:!1,responsive:!0,hover:!1,border:null,bordercolor:null,caption:null,captiontop:!1,header:!0,footer:!1},t),Array.isArray(n)){var a=null;if(t.header){var o=[];o=n[0].map((function(e){return"object"==typeof e?(e=$.extend({},{id:null,type:"th",scope:"col",class:null,colspan:null,rowspan:null,elems:null},e),l.td(e)):l.td({type:"th",scope:"col",elems:e})})),t.rownumber&&o.unshift(l.td({type:"th",scope:"col",elems:"#"})),a={tag:"thead",class:t.headclass?t.headclass:null,elems:l.tr({elems:o})}}for(var s=[],i=t.header?1:0,r=n.length-(t.footer?1:0);i<r;i++){var c=[];t.rownumber&&c.push(l.td({type:"th",scope:"row",elems:i.toString()})),$.each(n[i],(function(e,t){c.push(l.td(t))})),s.push(l.tr({elems:c}))}var u={tag:"tbody",class:t.bodyclass?t.bodyclass:null,elems:s},d=null;if(t.footer){var m=[];t.rownumber&&m.push(l.td({type:"th",scope:"row",elems:null})),$.each(n[r-1],(function(e,t){m.push(l.td(t))})),d={tag:"tfoot",class:t.footerclass?t.footerclass:null,elems:l.tr({elems:m})}}var p={tag:"table",class:["table",t.class?t.class:null,t.color?`table-${t.color}`:null,t.striped?"table-striped":null,t.hover?"table-hover":null,t.align?`align-${t.align}`:null,t.border?"none"===t.border?"table-borderless":"borderd"===t.border?"table-bordered":null:null,t.bordercolor?`border-${t.bordercolor}`:null,t.captiontop?"caption-top":null,t.size?`table-${t.size}`:null],elems:[t.caption?{tag:"caption",elems:t.caption}:null,a,u,d].removeEmpty()};return t.responsive?{tag:"div",class:["string"==typeof t.responsive?`tbl-responsive-${t.responsive}`:"table-responsive"],elems:p}:p}}}}(ns),function(e){var l={build:function(l){(l=$.extend({},{id:null,class:null,animate:!0,title:null,icon:null,msg:null,autohide:!0,delay:5e3,bgcolor:null,textcolor:null},l)).id=l.id?l.id:e.core.UUID();var t=[];return l.icon&&("string"==typeof l.icon?t.push(e.icon({icon:l.icon,size:"lg",class:"me-2"})):t.push(e.icon(l.icon))),l.title&&t.push({tag:"strong",class:["me-auto",l.icon?"ms-2":null],elems:l.title}),!l.title&&!l.icon||l.autoclose||(l.title||t.push({tag:"strong",class:"me-auto",elems:"&nbsp;"}),t.push({tag:"small",class:"text-muted timer",attr:{"data-ns-time":Date.now()},elems:"Just now"})),(l.title||l.icon)&&t.push({tag:"button",class:"btn-close",attr:{type:"button","data-bs-dismiss":"toast"}}),(l.title||l.icon)&&(t=[{tag:"div",class:["toast-header"],elems:t.slice()}]),t.push({tag:"div",class:"toast-body",elems:l.msg}),{tag:"div",attr:{id:l.id,"data-bs-animation":l.animate?"true":null,"data-bs-autohide":l.autohide?"true":"false","data-bs-delay":l.delay?l.delay:null},class:["toast",l.class?l.class:null,l.bgcolor?[`bg-${l.bgcolor}`,l.textcolor?`text-${l.textcolor}`:null].combine(" "):null],elems:t}},show:function(e){new bootstrap.Toast(e);var t=bootstrap.Toast.getInstance(e);t&&($(e).on("hidden.bs.toast",(function(){setTimeout((function(e){l.destroy(e)}),1e3,e)})),t.show())},hide:function(e){var l=bootstrap.Toast.getInstance(e);l&&l.hide()},destroy:function(e){var l=bootstrap.Toast.getInstance(e);if(l){try{$(l).destroy()}catch{}$(e).remove()}},toastmsg:function(...l){if(l&&l.length>0){var t=null,n=null;if(1===l.length?t=l[0]:l.length>1&&(n=l[0],t=l[1]),n){var a=e.sIcon(n);return{bgcolor:a?a.bgcolor:null,textcolor:a?a.textcolor:null,elems:{tag:"div",class:"row g-0",elems:[{tag:"div",class:"col-auto align-self-start me-3",elems:e.icon({icon:a?a.icon:n,size:"lg"})},{tag:"div",class:"col align-self-center",elems:t}]}}}return{textcolor:null,bgcolor:null,elems:t}}}};e.toast=function(...t){if(t&&t.length>0)if(2===t.length&&"string"==typeof t[0]&&"string"==typeof t[1]){var n=l.toastmsg(t[0],t[1]);if(n)return e.toast({msg:n.elems,bgcolor:n.bgcolor,textcolor:n.textcolor})}else if(1===t.length&&"object"==typeof t[0]){var a=t[0];(a=$.extend({},{id:null,msg:null,bgcolor:!0,textcolor:null,delay:null},a)).id=a.id||e.core.UUID();var o=$(".toast-container").get();o&&0===o.length&&(e.build.append(document.body,{tag:"div",class:"position-relative",attr:{"aria-live":"polite","aria-atomic":"true"},style:{zIndex:"1031"},elems:{tag:"div",class:"toast-container position-fixed top-0 end-0 p-3"}}),o=$(".toast-container").get()),e.build.append(o[0],l.build(a)),l.show($(`#${a.id}`)[0])}else console.error("Unsupported argument")}}(ns),function(e){e.toc=function(l){return Array.isArray(l)?e.toc({elems:l}):(l=$.extend({},{id:null,class:null,label:null,elems:null},l)).elems?{tag:"div",class:["text-muted ns-toc",l.class],attr:{id:l.id},elems:[{tag:"h6",elems:l.label?l.label:"Table of content"},{tag:"hr",class:"mx-1"},{tag:"ul",class:"list-unstyled small",elems:l.elems.map((function(e){return{tag:"li",class:[1===e.level?null:"fw-bold","mx-1","text-truncate"],elems:{tag:"a",class:"text-muted",attr:{onclick:e.onclick,href:e.href?e.href:"javascript:void(0)"},elems:e.label}}}))}]}:void 0}}(ns),function(e){e.tooltip=function(l,t){if("string"==typeof l){var n=l;(l={}).msg=n}return(l=$.extend({},{title:null,msg:null,type:null,placement:"top",trigger:"focus"},l)).msg&&t&&(t.attr||(t.attr={}),"popover"===l.type?l.title&&(t.attr.title=l.title):t.attr.title=l.msg,l.type&&(t.attr["data-bs-toggle"]=l.type,"popover"===l.type&&(t.attr["data-bs-content"]=l.msg,l.trigger&&(t.attr["data-bs-trigger"]=l.trigger)),l.placement&&(t.attr["data-bs-placement"]=l.placement),e.core.isHTML(l.msg)&&(t.attr["data-bs-html"]="true"))),t}}(ns);