"use strict";const ns={};Array.prototype.removeEmpty=function(){return this.filter(Boolean)},Array.prototype.combine=function(e){return this.removeEmpty().join(e)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(e){e.a=function(...l){if(l){if(2===l.length&&"string"==typeof l[0]&&"string"==typeof l[1])return e.a({label:l[0],href:l[1]});if(2===l.length&&"string"==typeof l[0]&&e.core.isFunction(l[1]))return e.a({label:l[0],onclick:l[1]});if(1===l.length&&"string"==typeof l[0])return e.a({label:l[0]});if(1===l.length&&"object"==typeof l[0]){var n=l[0];return(n=$.extend({},{id:null,style:null,class:null,color:null,onclick:null,href:"javascript:void(0)",icon:null,label:null,elems:null,tooltip:null},n)).title&&console.warn("A has title"),e.tooltip(n.tooltip,{ns:1,tag:"a",class:[n.color?`link-${n.color}`:null,n.class?n.class:null],attr:{id:n.id,href:n.href?n.href:null,onclick:n.onclick?n.onclick:null},style:n.style,elems:n.elems?n.elems:[n.icon?e.icon(n.icon):null,n.label?{tag:"span",class:n.icon?"ms-2":null,elems:n.label}:null].removeEmpty()})}console.error("Unsupported argument")}else console.error("Unsupported argument")}}(ns),function(e){e.accordion=function(l){return l=$.extend({},{id:null,flush:!1,autoclose:!0,item:null},l),Array.isArray(l.item)?(l.id=l.id?l.id:e.core.UUID(),l.item.find((e=>!0===e.active))||(l.item[0].active=!0),e.div(["accordion",l.flush?"accordion-flush":null],{id:l.id},l.item.map((function(n,t){return(n=$.extend({},{id:null,label:null,icon:null,active:!1,elems:null},n)).id=n.id?n.id:e.core.UUID(),e.div("accordion-item",[e.div({tag:"h2",class:"accordion-header",attr:{id:`${n.id}-head`},elems:{tag:"button",class:["accordion-button",n.active?null:"collapsed"],attr:{type:"button","data-bs-toggle":"collapse","data-bs-target":`#${n.id}-body`,"aria-expanded":n.active?"true":"false","aria-controls":`${n.id}-body`},elems:n.label||n.icon?[n.icon?e.icon(n.icon):null,n.icon?{tag:"span",class:"ms-2",elems:n.label}:n.label]:null}}),e.div(["accordion-collapse","collapse",n.active?"show":null],{id:`${n.id}-body`,"aria-labelledby":`${n.id}-head`,"data-bs-parent":l.autoclose?`#${l.id}`:null},e.div("accordion-body",n.elems))])})))):null}}(ns),function(e){const l={name:null,sender:null,data:null,dataType:null,cache:!0,contentType:"application/json"},n={url:"",obj:null,sender:null,progress:null};var t={ajax:function(e){return e=$.extend({},l,e),new Promise(((l,n)=>{$.ajax(`./api/${e.name}`,{async:!0,cache:e.cache,type:e.type,dataType:e.data?e.dataType:null,contentType:e.data?e.contentType:null,data:e.data?JSON.stringify(e.data):null,success:e=>{l(e)},error:e=>{n(e.responseText?e.responseText:e.statusText?e.statusText:"Error")}})}))},ajaxMultipart:e=>(e=$.extend({},n,e),new Promise(((l,n)=>{for(var t=new FormData,a=0;a<e.obj.length;a++)for(var o=0;o<$(e.obj[a]).length;o++)for(var i=0;i<$(e.obj[a])[o].files.length;i++)t.append("file",$(e.obj[a])[o].files[i]),1;$.ajax({xhr:()=>{var l=new window.XMLHttpRequest;return l.upload.addEventListener("progress",(function(l){if(l.lengthComputable&&"function"==typeof e.progress){var n=parseInt(l.loaded/l.total*100,10);e.progress(n)}}),!1),l},url:"./api/file",data:t,async:e.async,cache:e.cache,contentType:!1,processData:!1,type:"POST",success:e=>{l(e)},error:e=>{n(e.responseText?e.responseText:e.statusText?e.statusText:"Error")}})}))),ajaxDownload:function(e){return new Promise(((l,n)=>{try{window.location=`./api/${e.name}?q=${JSON.stringify(e.data)}`,l(!0)}catch(e){n(e)}}))}};e.api={get:e=>(e=$.extend({},{type:"GET"},e),t.ajax(e)),post:e=>(e=$.extend({},{type:"POST"},e),t.ajax(e)),put:e=>(e=$.extend({},{type:"PUT"},e),t.ajax(e)),delete:e=>(e=$.extend({},{type:"DELETE"},e),t.ajax(e)),upload:e=>t.ajaxMultipart(e),download:e=>(e=$.extend({},{type:"GET"},e),t.ajaxDownload(e)),option:l=>(l=$.extend({},{db:null,sender:null,emptylabel:null,fieldkey:"_id",fieldname:"name"},l),new Promise(((n,t)=>{l.db?e.api.post({sender:l.sender,name:`list/${l.db}`,data:{field:{[l.fieldkey]:1,[l.fieldname]:1},sort:{[l.fieldname]:1}}}).then((e=>{var t=e.data?e.data.map((e=>({value:e[l.fieldkey],label:e[l.fieldname]}))):[];null!==l.emptylabel&&t.unshift({value:"",label:l.emptylabel}),n(t)})).catch((e=>{t(e)})):t("Database name required")})))}}(ns),function(e){e.alert={container:function(...l){if(l&&2===l.length){var n=function(...l){if(l&&l.length>0){var n=null,t=null;if(1===l.length?n=l[0]:l.length>1&&(t=l[0],n=l[1]),t){var a=e.sIcon(t);return a?{color:a.color,textcolor:a.textcolor,elems:e.div("row g-0",[e.div("col-auto align-self-start me-3",e.icon({icon:a.icon,size:"lg"})),e.div("col align-self-center",n)])}:{textcolor:null,color:t,elems:n}}return{textcolor:null,color:null,elems:n}}}(l[0],l[1]);return e.alert.container({color:n?.color,elems:n?.elems})}if(l&&1===l.length&&"object"==typeof l){var t=$.extend({},{id:null,class:null,dismissible:!1,animation:!0,color:null,elems:null},l[0]);return t.id=t.id?t.id:e.core.UUID(),e.div(["alert",t.color?`alert-${t.color}`:null,t.dismissible?"alert-dismissible show":null,t.animation&&t.dismissible?"fade":null,t.class],{id:t.id,role:"alert"},[e.div(Array.isArray(t.elems)?t.elems:[t.elems]),t.dismissible?{tag:"button",class:"btn-close",attr:{"data-bs-dismiss":"alert","aria-label":"Close"}}:null])}console.error("Unsupported argument")},link:function(e,l){return{tag:"a",class:"alert-link",attr:{href:l||"javascript:void"},elems:e}},header:function(e){return{tag:"h4",class:"heading",elems:e}}}}(ns),function(e){e.badge=function(l){return"object"==typeof l?((l=$.extend({},{id:null,class:null,label:null,pill:!1,notification:!1,color:"secondary",textcolor:null,border:null,asst:null,tooltip:null,tooltipplace:null},l)).color&&!l.textcolor&&(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark")),{tag:"span",class:["badge",l.class?l.class:null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.pill?"rounded-pill":null,l.notification?"position-absolute top-0 start-100 translate-middle":null,l.notification&&!l.label?"p-2":null,l.border?`border border-${l.border}`:null,l.label?null:"rounded-circle"],attr:{id:l.id},elems:[l.label?l.label.toString():"",l.asst?{tag:"span",class:"visually-hidden",elems:l.asst}:null]}):e.badge({label:l})}}(ns),function(e){e.breadcrumb=function(l){if("object"==typeof l){(l=$.extend({},{id:null,class:null,item:null,divider:"url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"},l)).id=l.id?l.id:e.core.UUID();var n=null;return l.item&&(Array.isArray(l.item)||(l.item=[l.item]),n=l.item.map((function(e,l){return"object"!=typeof e&&(e={label:e}),{tag:"li",class:["breadcrumb-item",(e=$.extend({},{href:null,label:null,active:!1},e)).active?"active":null],attr:{"aria-current":e.active?"page":null},elems:e.active?e.label:{tag:"a",attr:{href:e.href?e.href:"javascript:void(0)",onclick:e.onclick},elems:e.label}}}))),{tag:"nav",class:l.class,attr:{id:l.id,"aria-label":"breadcrumb",style:l.divider?`--bs-breadcrumb-divider: ${l.divider};`:null},elems:{tag:"ol",class:"breadcrumb",elems:n}}}return e.breadcrumb({items:l})}}(ns),function(e){e.btngroup=function(l){return Array.isArray(l)||"string"==typeof l?e.btngroup({elems:l}):(l=$.extend({},{class:null,label:null,elems:null,vertical:!1,weight:null},l),e.div([l.vertical?"btn-group-vertical":"btn-group",l.weight?`btn-group-${l.weight}`:null,l.class?l.class:null],{role:"group","aria-label":l.label?l.label:null},l.elems))}}(ns),function(e){e.btntoolbar=function(l){return Array.isArray(l)||"string"==typeof l?e.btntoolbar({elems:l}):(l=$.extend({},{class:null,label:null,gap:2,elems:null},l),e.div(["btn-toolbar",l.gap?`gap-${l.gap}`:null,l.class],{role:"toolbar","aria-label":l.label?l.label:null},l.elems))}}(ns),function(e){var l={formatHTML:function(e,n){for(var t,a=new Array(1+n++).join("    "),o=new Array(n-1).join("    "),i=0;i<e.children.length;i++)t=document.createTextNode("\n"+a),e.insertBefore(t,e.children[i]),l.formatHTML(e.children[i],n),e.lastElementChild==e.children[i]&&(t=document.createTextNode("\n"+o),e.appendChild(t));return e},codeprocess:function(e){return e&&(e=(e=(e=e.replace(/({{).+?(}})/gi,"<code>$&</code>")).replace(/{{/gi,"")).replace(/}}/gi,"")),e},build:function(e,n){return n?"string"==typeof n?(e.innerHTML=e.innerHTML+l.codeprocess(n),e):Array.isArray(n)&&n.length>0?((n=n.removeEmpty()).length>0&&n.forEach((n=>{if(n)if("string"==typeof n)e.innerHTML=e.innerHTML+l.codeprocess(n);else if(n.tag){var t=document.createElement(n.tag);t=l.attr(t,n.id,n.attr,n.class,n.style,n.data),n.elems&&(t=l.build(t,n.elems)),e.appendChild(t)}else n.elems&&(e=l.build(e,n.elems))})),e):l.build(e,[n]):e},attr:function(l,n,t,a,o,i){if(n&&l.setAttribute("id",n),t&&Object.keys(t).forEach((n=>{!t[n]&&""!==t[n]||null===t[n]||(e.core.isFunction(t[n])&&n.startsWith("on")?l.addEventListener(n.startsWith("on")?n.substr(2):n,(function(e){t[n](e.currentTarget,e)})):l.setAttribute(n,t[n]))})),a&&null!==a)if(Array.isArray(a)){var r=a.combine(" ");r&&(l.classList=r)}else l.classList=a;return o&&Object.keys(o).forEach((e=>{o[e]&&null!==o[e]&&(l.style[e]=o[e])})),i&&Object.keys(i).forEach((e=>{i[e]&&l.setAttribute(`data-${e}`,i[e])})),l}};e.build={html:function(e,n){var t=document.createElement("div");return t=l.build(t,e),n?l.formatHTML(t,0).innerHTML.trim():t.innerHTML},obj:function(e){var n=document.createElement("div");return(n=l.build(n,e)).childNodes},append:function(e,n){return Array.isArray(e)?e[0]=l.build(e[0],n):e=l.build(e,n),e},prepend:function(l,n){var t=e.build.obj(n);return t&&t.length>0?Array.isArray(l)?$(t[0]).insertBefore(l[0]):$(t[0]).insertBefore(l):l},replace:function(l,n){var t=e.build.obj(n);return t&&t.length>0?Array.isArray(l)?l[0].replaceWith(t[0]):l.replaceWith(t[0]):l},init:function(e){$(e).find("img[data-ns-src]").get().forEach((e=>{$(e).attr("src",$(e).attr("data-ns-src")),$(e).removeAttr("data-ns-src")})),$(e).find('[data-bs-toggle="tooltip"]').get().forEach((e=>{new bootstrap.Tooltip(e)})),$(e).find('[data-bs-toggle="popover"]').get().forEach((e=>{new bootstrap.Popover(e)}))}}}(ns),function(e){e.button=function(l){if(l){if("string"==typeof l)return e.button({label:l});if((l=$.extend({},{id:null,name:null,class:null,style:null,label:null,labelshow:null,nowarp:!1,value:null,checked:!1,disabled:!1,size:null,weight:null,onclick:null,href:null,icon:null,largeicon:!1,outline:!1,border:!0,rounded:!0,color:null,textcolor:null,type:"button",data:null,badge:null,relativeposition:!1,asst:null,hascontainer:!0,tooltip:null},l)).option&&console.warn("Button has option"),l.id=l.id?l.id:e.core.UUID(),!l.color&&l.icon){var n=e.sIcon(l.icon);n&&(l.outline?(l.color=n.color,l.textcolor=n.color,l.icon=n.icon):(l.color=n.color,l.textcolor=n.textcolor,l.icon=n.icon))}!l.color||l.textcolor||l.outline||(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark"));var t=[];return l.icon&&t.push({tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:e.icon(l.icon)}),l.label&&t.push(e.span([l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option&&!l.segmenttoggle||l.badge?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null],l.label)),l.asst&&t.push({tag:"span",class:"visually-hidden",elems:l.asst}),l.badge&&t.push(e.badge(l.badge)),(t="checkbox"===l.type||"radio"===l.type?[{tag:"input",class:"btn-check",attr:{id:l.id,autocomplete:"off",type:l.type,name:l.name,checked:l.checked?"":null,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null}},l.label||l.icon?e.tooltip(l.tooltip,{tag:"label",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{for:l.id},style:l.style,elems:t.slice()}):null]:l.segmenttoggle?[e.tooltip(l.tooltip,{tag:l.href?"a":"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{type:l.type,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null,href:l.href},style:l.style,elems:t.slice()}),{tag:"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.relativeposition?"position-relative":null],data:l.data,attr:{id:l.id,name:l.name,type:l.type,disabled:l.disabled,onclick:l.onclick},style:l.style,elems:{tag:"span",class:"visually-hidden",elems:"Toggle Dropdown"}}]:[e.tooltip(l.tooltip,{tag:l.href?"a":"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null,l.relativeposition?"position-relative":null,l.href&&l.disabled?"disabled":null],data:l.data,attr:{id:l.id,name:l.name,type:l.type,disabled:l.href?null:l.disabled,"aria-disabled":l.href&&l.disabled?"true":null,onclick:l.onclick,href:l.href},elems:t.slice()})])&&"object"==typeof t?Array.isArray(t)?1===t.length?t[0]:{elems:t}:t:{elems:t}}}}(ns),function(e){e.card={container:function(l){return Array.isArray(l)||"string"==typeof l?e.card.container({elems:l}):((l=$.extend({},{id:null,class:null,style:null,elems:null,align:null,color:null,textcolor:null,bordercolor:null,border:!0},l)).color&&!l.textcolor&&(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark")),e.div(["card",l.class,l.align?`text-${l.align}`:null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null,l.border?null:"border-0"],null,l.style,l.elems))},header:function(l){return Array.isArray(l)||"string"==typeof l?e.card.header({elems:l}):((l=$.extend({},{class:null,elems:null,color:null,textcolor:null,bordercolor:null},l)).color&&!l.textcolor&&(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark")),e.div(["card-header",l.class,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null],l.elems))},body:function(l){return Array.isArray(l)||"string"==typeof l?e.card.body({elems:l}):(l=$.extend({},{class:null,elems:null,textcolor:null},l),e.div(["card-body",l.textcolor?`text-${l.textcolor}`:null,l.class],l.elems))},footer:function(l){return Array.isArray(l)||"string"==typeof l?e.card.footer({elems:l}):((l=$.extend({},{class:null,muted:!0,color:null,textcolor:null,bordercolor:null,elems:null},l)).color&&!l.textcolor&&(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark")),e.div(["card-footer",l.class,l.muted?"text-muted":null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.bordercolor?`border-${l.bordercolor}`:null],l.elems))},group:function(l){return Array.isArray(l)||"string"==typeof l?e.card.group({elems:l}):(l=$.extend({},{class:null,elems:null,textcolor:null},l),e.div(["card-group",l.textcolor?`text-${l.textcolor}`:null,l.class],l.elems))},title:function(l){return Array.isArray(l)||"string"==typeof l?e.card.title({elems:l}):{tag:"h5",class:["card-title",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},subtitle:function(l){return Array.isArray(l)||"string"==typeof l?e.card.subtitle({elems:l}):{tag:"h6",class:["card-subtitle mb-2",(l=$.extend({},{class:null,elems:null,muted:!0,textcolor:null},l)).class,l.textcolor?`text-${l.textcolor}`:null,l.muted?"text-muted":null],elems:l.elems}},link:function(l){return Array.isArray(l)||"string"==typeof l?e.card.subtitle({elems:l}):{tag:"a",class:["card-link",(l=$.extend({},{class:null,elems:null,href:"javascript:void(0)",onclick:null},l)).class],attr:{href:l.href?l.href:null,onclick:l.onclick?l.onclick:null},elems:l.elems}},text:function(l){return Array.isArray(l)||"string"==typeof l?e.card.text({elems:l}):{tag:"p",class:["card-text",(l=$.extend({},{class:null,elems:null,textcolor:null},l)).textcolor?`text-${l.textcolor}`:null,l.class],elems:l.elems}},textsmall:function(l){return Array.isArray(l)||"string"==typeof l?e.card.textsmall({elems:l}):{tag:"p",class:["card-text",(l=$.extend({},{class:null,muted:!0,elems:null,textcolor:null},l)).muted?"text-muted":null,l.textcolor?`text-${l.textcolor}`:null,l.class],elems:{tag:"small",elems:l.elems}}},img:function(l){return"string"==typeof l?e.card.img({src:l}):{tag:"img",class:[(l=$.extend({},{class:null,placement:"top",src:null,alt:null},l)).class,"full"===l.placement?"card-img":null,"top"===l.placement?"card-img-top":null,"bottom"===l.placement?"card-img-bottom":null,"left"===l.placement?"img-fluid rounded-start":null,"right"===l.placement?"img-fluid rounded-end":null],attr:{src:l.src?l.src:null,alt:l.alt?l.alt:null}}},imgoverlay:function(l){return Array.isArray(l)||"string"==typeof l?e.card.imgoverlay({elems:l}):(l=$.extend({},{class:null,elems:null,textcolor:null},l),e.div(["card-img-overlay",l.textcolor?`text-${l.textcolor}`:null,l.class],l.elems))},horizontal:function(l){return l=$.extend({},{size:"col-md-4",left:null,right:null,textcolor:null,gap:"0"},l),e.div(["row",l.textcolor?`text-${l.textcolor}`:null,l.gap?`g-${l.gap}`:null],[e.div(l.size,l.left),e.div("col",l.right)])}}}(ns),function(e){e.carousel=function(l){return"string"==typeof l?e.carousel([l]):Array.isArray(l)?e.carousel({item:l}):(l=$.extend({},{id:null,class:null,style:null,control:!1,touch:!0,slide:!0,fade:!1,indicators:!1,dark:!1,item:null},l)).item&&l.item.length>0?(l.id=l.id||e.core.UUID(),e.div(["carousel",l.slide?"slide":null,l.fade?"carousel-fade":null,l.dark?"carousel-dark":null,l.class],{id:l.id,"data-bs-ride":"carousel","data-bs-touch":l.touch?null:"false","data-bs-interval":l.touch?null:"false"},l.style,[l.indicators?e.div("carousel-indicators",l.item.map((function(e,n){return"string"==typeof e&&(e={src:e}),e=$.extend({},{class:null,src:null,alt:null,caption:null,text:null,interval:0},e),{tag:"button",class:[0===n?"active":null].removeEmpty(),attr:{type:"button","aria-current":0===n?"true":null,"aria-label":e.caption?e.caption:e.alt?e.alt:`Slide ${n+1}`,"data-bs-slide-to":`${n}`,"data-bs-target":`${l.id}`}}}))):null,e.div("carousel-inner",l.item.map((function(n,t){return"string"==typeof n&&(n={src:n}),n=$.extend({},{class:null,src:null,alt:null,caption:null,text:null,interval:0},n),e.div(["carousel-item",0===t?"active":null],{"data-bs-interval":n.interval&&l.touch?n.interval:null},[{tag:"img",class:["d-block w-100",n.class],attr:{alt:n.alt?n.alt:n.caption?n.caption:null,src:n.src}},n.caption||n.text?e.div("carousel-caption d-none d-md-block",[n.caption?{tag:"h5",elems:n.caption}:null,n.text?{tag:"p",elems:n.text}:null].removeEmpty()):null])}))),l.control?{tag:"button",class:"carousel-control-prev",attr:{type:"button","data-bs-target":`#${l.id}`,"data-bs-slide":"prev"},elems:[{tag:"span",class:"carousel-control-prev-icon",attr:{"aria-hidden":"true"}},{tag:"span",class:"visually-hidden",elems:"Previous"}]}:null,l.control?{tag:"button",class:"carousel-control-next",attr:{type:"button","data-bs-target":`#${l.id}`,"data-bs-slide":"next"},elems:[{tag:"span",class:"carousel-control-next-icon",attr:{"aria-hidden":"true"}},{tag:"span",class:"visually-hidden",elems:"Next"}]}:null])):void 0}}(ns),function(e){e.close=function(e){return{tag:"button",class:["btn-close",(e=$.extend({},{id:null,class:null,white:!1,disabled:!1},e)).white?"btn-close-white":null,e.class],data:e.data,attr:{id:e.id,type:"button",disabled:e.disabled?"":null,"aria-label":"Close"}}}}(ns),function(e){e.collapse={toggle:function(l){if((l=$.extend({},{target:null,active:!1,id:null,label:null,icon:null,class:null,color:null,textcolor:null,outline:!1,disabled:!1,nowarp:!1,rounded:!0,border:!0,size:null,weight:null},l)).target)return{tag:"button",class:["btn",l.nowarp?"text-nowarp":null,l.rounded?null:"rounded-0",l.border?null:"border-0",l.outline?`btn-outline-${l.color}`:null,l.color&&!l.outline?`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.class?l.class:null,l.size?`btn-${l.size}`:null,l.weight?`btn-${l.weight}`:null],attr:{id:l.id,type:"button",disabled:l.disabled?"":null,"aria-controls":l.target,"aria-expanded":l.active?"true":"false","data-bs-target":l.target,"data-bs-toggle":"collapse"},elems:[l.icon?e.icon(l.icon):null,l.label?{tag:"span",class:l.icon?"ms-2":null,elems:l.label}:null]};console.error("ns.collapse.toggle target not provided")},container:function(l){if(l){if(Array.isArray(l))return e.collapse.container({elems:l});if("object"==typeof l)return(l=$.extend({},{id:null,class:null,elems:null},l)).id=l.id?l.id:e.core.UUID(),e.div(["collapse",l.class],{id:l.id},l.elems);console.error("Unsupported argument")}else console.error("Unsupported argument")}}}(ns),function(e){e.cont={singlecolumn:function(l){return e.div("container-fluid p-0",e.div("row row-cols-1 g-2",Array.isArray(l)?l.map((function(l){return e.div("col",l)})):e.div("col",l)))},stack:function(l){return e.div("container-fluid p-0",e.div("row row-cols-auto g-2",Array.isArray(l)?l.map((function(l){return e.div("col",l)})):e.div("col",l)))}}}(ns),function(e){e.core={errorHandler:function(e){e&&console.error(e)},copyToClipboard:function(l,n){navigator.clipboard.writeText(l),e.toast("/",n||"Copied to clipboard")},theme:function(e){var l=document.getElementById("nstheme");e?(l.href=`https://cdn.jsdelivr.net/npm/bootswatch@5.1.1/dist/${e}/bootstrap.min.css`,l.removeAttribute("disabled")):l.setAttribute("disabled","disabled")},multipleClassSupport:function(e,l){return e?Array.isArray(e)?e.map((function(e){return l.replace("$1",e)})).join(" "):l.replace("$1",e):null},isFunction:function(e){return e instanceof Function},createEnum:function(l){const n={};if(Array.isArray(l))for(const t of l)"string"==typeof t?n[e.core.camelCase(t)]=t:"object"==typeof t?t.hasPropety("key")&&(t.hasPropety("value")?n[e.core.camelCase(t.key)]=t.value:n[e.core.camelCase(t.key)]=t):n[`_${e.core.camelCase(t)}`]=t;else"object"==typeof l&&Object.keys(l).forEach((l=>{n[e.core.camelCase(l)]=value[l]}));return Object.freeze(n)},camelCase:function(e){return e.toLowerCase().replace(/-(.)/g,(function(e,l){return l.toUpperCase()}))},isHTML:function(e){if("string"==typeof e)return/<\/?[a-z][\s\S]*>/i.test(e)},groupBy:function(e,l){const n=new Map;return e.forEach((e=>{const t=l(e),a=n.get(t);a?a.push(e):n.set(t,[e])})),n},dataChangeOnly:function(e,l){var n={};return l&&Object.keys(l).forEach((t=>{l[t]!=e[t]&&(n[t]=l[t])})),n},UUID:function(){return"el-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0;return("x"===e?l:3&l|8).toString(16)}))},parseBool:function(e){if(!e)return!1;switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}},rndBetween:function(e,l){return Math.floor(Math.random()*(l-e+1)+e)},pad:function(e,l,n){return n=n||"0",(e+="").length>=l?e:new Array(l-e.length+1).join(n)+e},entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},escapeHTML:function(l){return String(l).replace(/[&<>"'`=\/]/g,(function(l){return e.core.entityMap[l]}))},highlight:function(l,n){l&&($(l).addClass("ns-highlight"),setTimeout((function(e){$(e).removeClass("ns-highlight")}),n||12e3,l),e.core.focus(l))},focus:function(e){var l=$("#navbar").outerHeight();l=l||0,console.log("Navbar height : "+l),$([document.documentElement,document.body]).animate({scrollTop:$(e).offset().top+l-50},300)},getvalue:function(e){switch($(e).attr("type")){case"checkbox":case"radio":return $(e).is(":checked")?$(e).val():null;case"range":case"number":return"any"===$(e).attr("step")?parseFloat($(e).val()):parseInt($(e).val(),10);case"date":let l=$(e).val();return l?moment(l,"YYYY-MM-DD").format("YYYY-MM-DD"):null;case"datetime-local":let n=$(e).val();return n?moment(n,"YYYY-MM-DDTHH:mm").format("YYYY-MM-DDTHH:mm"):null;case"time":let t=$(e).val();return t?moment(t,"HH:mm").format("HH:mm"):null;case"month":let a=$(e).val();return a?moment(a,"YYYY-MM").format("YYYY-MM"):null;case"week":let o=$(e).val();return o?moment(o,"YYYY-Www").format("YYYY-Www"):null;default:let i=$(e).val();return i||null}}}}(ns);var ns_global_data={};!function(e){e.data={set:function(e,l){ns_global_data[e]=l},get:function(e){return ns_global_data[e]},clear:function(e){e?fn_data.isexist(e)&&delete ns_global_data[e]:ns_global_data={}},isexist:function(e){return!!ns_global_data[e]}}}(ns),function(e){const l=[{key:"okay",value:["Okay"]},{key:"close",value:["Close"]},{key:"cancel",value:["Cancel"]},{key:"okayonly",value:["Okay"]},{key:"closeonly",value:["Close"]},{key:"cancelonly",value:["Cancel"]},{key:"savechangesclose",value:["Save changes","Close"]},{key:"understandclose",value:["Understand","Close"]},{key:"sendmessageclose",value:["Send message","Close"]},{key:"searchcancel",value:["Search","Cancel"]},{key:"sortcancel",value:["Sort","Cancel"]},{key:"yesno",value:["Yes","No"]},{key:"yescancel",value:["Yes","Cancel"]},{key:"yesclose",value:["Yes","Close"]},{key:"yescontinueno",value:["Yes, continue","No"]},{key:"yescontinuecancel",value:["Yes, continue","Cancel"]},{key:"yescontinueclose",value:["Yes, continue","Close"]},{key:"yessaveno",value:["Yes, save","No"]},{key:"yessavecancel",value:["Yes, save","Cancel"]},{key:"yessaveclose",value:["Yes, save","Close"]},{key:"yesdeleteno",value:["Yes, delete","No"]},{key:"yesdeletecancel",value:["Yes, delete","Cancel"]},{key:"yesdeleteclose",value:["Yes, delete","Close"]},{key:"continueno",value:["Continue","No"]},{key:"continuecancel",value:["Continue","Cancel"]},{key:"continueclose",value:["Continue","Close"]},{key:"saveno",value:["Save","No"]},{key:"savecancel",value:["Save","Cancel"]},{key:"saveclose",value:["Save","Close"]},{key:"deleteno",value:["Delete","No"]},{key:"deletecancel",value:["Delete","Cancel"]},{key:"deleteclose",value:["Delete","Close"]},{key:"okaycancel",value:["Okay","Cancel"]},{key:"okayclose",value:["Okay","Close"]},{key:"okaycontinuecancel",value:["Okay, Continue","Cancel"]},{key:"okaycontinueclose",value:["Okay, Continue","Close"]},{key:"okaysavecancel",value:["Okay, save","Cancel"]},{key:"okaysaveclose",value:["Okay, save","Close"]},{key:"okaydeletecancel",value:["Okay, Delete","Cancel"]},{key:"okaydeleteclose",value:["Okay, Delete","Close"]},{key:"yesnocancel",value:["Yes","No","Cancel"]},{key:"yesnoclose",value:["Yes","No","Close"]},{key:"yescontinuenocancel",value:["Yes, continue","No","Cancel"]},{key:"yescontinuenoclose",value:["Yes, continue","No","Close"]},{key:"yessavenocancel",value:["Yes, save","No","Cancel"]},{key:"yessavenoclose",value:["Yes, save","No","Close"]},{key:"yesdeletenocancel",value:["Yes, delete","No","Cancel"]},{key:"yesdeletenoclose",value:["Yes, delete","No","Close"]},{key:"continuenocancel",value:["Continue","No","Cancel"]},{key:"continuenoclose",value:["Continue","No","Close"]},{key:"savenocancel",value:["Save","No","Cancel"]},{key:"savenoclose",value:["Save","No","Close"]},{key:"deletenocancel",value:["Delete","No","Cancel"]},{key:"deletenoclose",value:["Delete","No","Close"]}];var n={build:function(l){if("string"==typeof(l=$.extend({},{id:null,class:null,static:!0,elems:null,title:null,icon:null,footer:null,button:null,show:!1,animate:!0,scrollable:!0,center:!0,size:null,fullscreen:!1,hastab:!1,focus:!0},l)).button)return l.button=n.dlgbtn(l.button),l.button||(l.button=[]),n.build(l);if(Array.isArray(l.button)){l.id=l.id?l.id:e.core.UUID();var t=[],a=[],o=[],i=[],r=[];(l.title||l.icon)&&(l.icon&&("string"==typeof l.icon?t.push({elems:e.icon({icon:l.icon,class:"me-2"})}):t.push({elems:e.icon(l.icon)})),l.title&&t.push({tag:"span",class:"text-capitalize",elems:l.title}),(l.title||l.icon)&&(t=[{tag:"h5",class:"modal-title",elems:t.slice()}]),t.push({tag:"button",class:"btn-close",attr:{type:"button","data-bs-dismiss":"modal"}}),t=[e.div("modal-header",t.slice())]),a.push(e.div(["modal-body",l.hastab?"p-0":null],l.elems));var s=!1;l.footer&&(s=!0,i.push(e.div("footer-ctl float-start",l.footer)));var c=!1;l.button&&l.button.length>0&&null!==l.button[0]&&(c=!0,l.button.forEach(((n,t)=>{n.id=n.id?n.id:`${l.id}-btn-${t}`,n.color=n.color?n.color:0===t?"primary":"text-secondary",n.class="ms-3 btn-modal",r.unshift({elems:e.button(n)})})),r=[e.div("justify-content-end",r.slice())]),o.push(e.div("container-fluid g-0 p-0",e.div("row align-items-center",[e.div("col",i),e.div("col-auto",r)]))),o=e.div("modal-footer",o.slice());var u=[];return u=(u=u.concat(t)).concat(a),(c||s)&&(u=u.concat(o)),u=e.div(["modal",l.animate?"fade":null,l.show?"show":null],{id:l.id,tabindex:"-1","data-bs-backdrop":l.static?"static":null,"data-bs-keyboard":l.static?"false":"true","data-bs-focus":l.focus?"true":null},e.div(["modal-dialog",l.scrollable?"modal-dialog-scrollable":null,l.center?"modal-dialog-centered":null,l.size?`modal-${l.size}`:null,l.fullscreen?"string"==typeof l.fullscreen?`modal-fullscreen-${l.fullscreen}`:"modal-fullscreen":null],e.div("modal-content",u.slice())))}return l.button=[l.button],n.build(l)},show:function(l,...t){if(l)if("string"==typeof l)n.show($(l)[0],...t);else{var a=$(l).attr("data-bs-backdrop"),o=$(l).attr("data-bs-keyboard"),i=$(l).attr("data-bs-focus"),r=new bootstrap.Modal(l,{backdrop:"static"!==a||"static",keyboard:"true"===o,focus:"true"===i});[].slice.call(l.querySelectorAll(".btn-modal")).reverse().forEach(((a,o)=>{$(a).on("click",(function(){t&&o<=t.length&&e.core.isFunction(t[o])?t[o](l)&&n.hide(l):n.hide(l)}))}));var s=$(".modal:not(.show)");if(s&&s.length>1){var c=s[s.length-2];$(c).removeClass("show"),"static"===$(c).attr("data-bs-backdrop")&&$(c).next(".modal-backdrop").removeClass("show")}$(l).on("hidden.bs.modal",(function(e){var t=$(".modal");if(t&&t.length>1){var a=t[t.length-2];$(a).addClass("show"),"static"===$(a).attr("data-bs-backdrop")&&$(a).next(".modal-backdrop").addClass("show")}setTimeout((function(e){n.destroy(e)}),3e3,l)})),$(l).on("shown.bs.modal",(function(l){e.build.init(this),$(this).modal("handleUpdate")})),r.show()}},hide:function(e){if(e)if("string"==typeof e)n.hide($(e)[0]);else{var l=bootstrap.Modal.getInstance(e);l&&l.hide()}},destroy:function(e){if(e)if("string"==typeof e)n.destroy($(e)[0]);else{var l=bootstrap.Modal.getInstance(e);if(l){try{$(l).destroy()}catch{}$(e).remove()}}},getvalue:function(l){var n=$(l).find("[name]").get();if(n&&n.length>0){var t={};return n.forEach((l=>{let n=$(l).attr("type"),a=e.core.getvalue(l),o=$(l).attr("name");"radio"===n?(void 0===t[o]&&(t[o]=null),a&&(t[o]=a)):"checkbox"===n?(void 0===t[o]&&(t[o]=[]),a&&t[o].push(a)):t[o]=a})),t}return null},validate:function(l,n){return n?n(contaier):e.validate(l)},dlgbtn:function(e){if(e){var n=l.find((l=>l.key===e.toLowerCase()));if(n)return n.value.map((function(e){return e.toLowerCase().indexOf("delete")>-1?{label:e,color:"danger"}:{label:e}}));console.error(`Unknow button : ${e}`)}return null},dlgmsg:function(...l){if(l&&l.length>0){var n=null,t=null;return 1===l.length?n=l[0]:l.length>1&&(t=l[0],n=l[1]),t?{elems:e.div("row g-0",[e.div("col-auto align-self-start pt-1 me-3",e.icon({icon:t,size:"3x"})),e.div("col align-self-center",n)])}:n}}};e.dlg={msgbox:function(l,t,a,o){a=a||"okayonly";var i=e.core.UUID();return o?n.build({id:i,show:!0,title:document.title,button:a,elems:n.dlgmsg(l,t)}):new Promise(((o,r)=>{try{e.build.append(document.body,n.build({id:i,title:document.title,button:a,elems:n.dlgmsg(l,t)})),n.show(`#${i}`,(function(){return o(),!0}),(function(){try{r()}catch(e){}return!0}),(function(){try{r()}catch(e){}return!0}))}catch(e){r(e)}}))},confirmbox:function(l,t,a,o,i){a=a||"yesnocancel";var r=e.core.UUID();return i?n.build({id:r,show:!0,title:document.title,button:a,elems:n.dlgmsg(l,t)}):new Promise(((i,s)=>{try{e.build.append(document.body,n.build({id:r,title:document.title,button:a,elems:n.dlgmsg(l,t)})),n.show(`#${r}`,(function(e){return n.validate(e,o).then((()=>{var l=n.getvalue(e);l?l.dlg?console.warn("ns.dlg has input with name dlg that should be used to send container"):l.dlg=`#${$(e).attr("id")}`:(l={}).dlg=`#${$(e).attr("id")}`,n.hide(`#${$(e).attr("id")}`),i(l)})).catch((()=>{s()})),!1}),(function(){try{s()}catch(e){}return!0}),(function(){try{s()}catch(e){}return!0}))}catch(e){s(e)}}))},inputbox:function(l,t,a,o,i){a=a||"okaycancel";var r=e.core.UUID(),s=[];return t&&s.push({tag:"p",elems:t}),"string"==typeof l?s.push(e.input({type:l,name:"value"})):Array.isArray(l)?s=s.concat(l):s.push(l),i?n.build({id:r,show:!0,title:document.title,button:a,elems:{elems:s}}):new Promise(((l,t)=>{try{e.build.append(document.body,n.build({id:r,title:document.title,button:a,elems:{elems:s}})),$(`#${r}`).on("shown.bs.modal",(function(e){var l=e.target,n=$(l).find(".modal-body").find("[name]:last");n&&$(n).on("keyup",(function(e){13===e.keyCode&&$(l).find(".modal-footer").find(".btn:last").click()}));var t=$(l).find(".modal-body").find("[name]:first");t&&$(t).focus()})),n.show(`#${r}`,(function(e){return n.validate(e,o).then((()=>{var t=n.getvalue(e);t?t.dlg?console.warn("ns.dlg has input with name dlg that should be used to send container"):t.dlg=`#${$(e).attr("id")}`:(t={}).dlg=`#${$(e).attr("id")}`,n.hide(`#${$(e).attr("id")}`),l(t)})).catch((()=>{t()})),!1}),(function(){try{t()}catch(e){}return!0}),(function(){try{t()}catch(e){}return!0}))}catch(e){t(e)}}))},box:function(l){return(l=$.extend({},{id:null,title:null,button:null,onshow:null,fullscreen:!1,validation:null,show:!1},l)).id=l.id?l.id:e.core.UUID(),l.show?n.build(l):new Promise(((t,a)=>{try{e.build.append(document.body,n.build(l)),$(`#${l.id}`).on("shown.bs.modal",(function(n){var t=n.target,a=$(t).find(".modal-body").find("[name]:last");a&&$(a).on("keyup",(function(e){13===e.keyCode&&$(t).find(".modal-footer").find(".btn:last").click()}));var o=$(t).find(".modal-body").find("[name]:first");o&&$(o).focus(),e.core.isFunction(l.onshow)&&l.onshow($(`#${l.id}`))})),n.show(`#${l.id}`,(function(e){return n.validate(e,l.validation).then((()=>{var l=n.getvalue(e);l?l.dlg?console.warn("ns.dlg has input with name dlg that should be used to send container"):l.dlg=`#${$(e).attr("id")}`:(l={}).dlg=`#${$(e).attr("id")}`,n.hide(`#${$(e).attr("id")}`),t(l)})).catch((()=>{a()})),!1}),(function(){try{a()}catch(e){}return!0}),(function(){try{a()}catch(e){}return!0}))}catch(e){a(e)}}))}}}(ns),function(e){e.dropdown=function(l){if((l=$.extend({},{id:null,name:null,class:null,style:null,label:null,labelshow:null,value:null,checked:!1,disabled:!1,nowarp:!1,weight:null,outline:!1,border:!0,rounded:!0,color:null,textcolor:null,dark:!1,onclick:null,href:null,icon:null,largeicon:!1,option:null,arrow:"down",aligment:null,autoclose:!0,type:"button",data:null,offset:null,reference:null,navlink:!1,container:"dropdown",segmenttoggle:!1},l)).id=l.id?l.id:e.core.UUID(),!l.color&&l.icon){var n=e.sIcon(l.icon);n&&(l.outline?(l.color=n.color,l.textcolor=n.color,l.icon=n.icon):(l.color=n.color,l.textcolor=n.textcolor,l.icon=n.icon))}!l.color||l.textcolor||l.outline||(["primary","secondary","danger","success","dark"].indexOf(l.color)>-1?l.textcolor="light":["warning","light"].indexOf(l.color)>-1&&(l.textcolor="dark")),l.navlink&&(l.container="nav-item",l.href=l.href||"javascript:void(0)"),l.segmenttoggle&&"dropdown"===l.container&&(l.container="btn-group");var t={tag:l.href?"a":"button",class:[l.navlink?"nav-link":"btn",l.segmenttoggle?null:"dropdown-toggle",l.color?l.outline?`btn-outline-${l.color}`:`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.weight?`btn-${l.weight}`:null,l.class],attr:{id:l.segmenttoggle?null:l.id,"data-bs-toggle":l.segmenttoggle?null:"dropdown","data-bs-reference":l.segmenttoggle?null:l.reference,"data-bs-offset":l.segmenttoggle?null:l.offset,"data-bs-auto-close":l.segmenttoggle?null:l.autoclose?l.autoclose:"false","aria-expanded":l.segmenttoggle?null:"false",href:l.href},elems:[l.icon?{tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:e.icon(l.icon)}:null,l.label?e.span([l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option&&!l.segmenttoggle?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null],l.label):null]},a=l.segmenttoggle?{tag:l.href?"a":"button",class:["dropdown-toggle dropdown-toggle-split btn",l.color?l.outline?`btn-outline-${l.color}`:`btn-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null,l.weight?`btn-${l.weight}`:null,l.class],attr:{id:l.id,"data-bs-toggle":"dropdown","data-bs-reference":l.reference,"aria-expanded":"false","data-bs-offset":l.offset,"data-bs-auto-close":l.autoclose?l.autoclose:"false"},elems:{tag:"span",class:"visually-hidden",elems:"Toggle Dropdown"}}:null,o=e.div(["dropdown-menu",l.dark?"dropdown-menu-dark":null,e.core.multipleClassSupport(l.aligment,"dropdown-menu-$1")],{"aria-labelledby":l.id},e.ddoption(l.option,l.value));return"start"===l.arrow&&l.segmenttoggle?{ns:1,tag:l.container?"nav-item"===l.container?"li":"div":null,class:[l.segmenttoggle?l.container:null,l.arrow?`drop${l.arrow}`:null],elems:[e.btngroup([a,o].removeEmpty()),t]}:{ns:1,tag:l.container?"nav-item"===l.container?"li":"div":null,class:[l.container,l.arrow?`drop${l.arrow}`:null],elems:[t,a,o].removeEmpty()}}}(ns),function(e){var l=function(l,n,t){return e.div("rounded-0 btn-toggle bg-light",{"data-bs-toggle":"collapse","aria-expanded":t?"true":"false","aria-controls":l,"data-bs-target":`#${l}`,role:"button"},`${n}`)},n=function(l,n,t,a){return e.div("collapse card-body ns-code bg-light",{id:l},[{tag:"code",class:"overflow-auto d-block",elems:{tag:"pre",attr:{lang:n},class:`prettyprint lang-${n}`,elems:a(t)}}])};e.example=function(t){(t=$.extend({},{id:null,title:null,msg:null,label:null,class:null,pclass:null,anchor:!0,code:null,dark:!1,sample:null,beautifyjs:function(e){return js_beautify(e,{preserve_newlines:!0,max_preserve_newlines:100,keep_array_indentation:!1,brace_style:"collapse,preserve-inline"})},beautifyhtml:function(e){return e=e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")},container:e.cont.singlecolumn},t)).id=t.id?t.id:e.core.UUID();var a=[];if(t.title&&a.push({tag:t.code?"h3":t.anchor?"h2":"h1",class:["pt-3",t.anchor?null:"fs-1"],attr:{id:t.id},elems:[{tag:"span",elems:t.title},t.anchor?{tag:"a",class:"anchorjs-link ps-2",attr:{"aria-label":"Anchor","data-anchorjs-icon":"#",href:"javascript:void(0)",onclick:"ns.core.focus($(this).parent())"}}:null]}),t.msg&&(Array.isArray(t.msg)||(t.msg=[t.msg]),$.each(t.msg,(function(e,l){"string"==typeof l?a.push({tag:"p",class:t.anchor?null:"fw-lighter fs-5",elems:l}):a.push(l)}))),t.code){var o=[];if(!t.label){var i=e.core.UUID();o.push(l(i,"html output")),o.push(n(i,"html",e.build.html(t.code(),!0),t.beautifyhtml))}t.sample&&Object.keys(t.sample).forEach((a=>{let i=e.core.UUID(),r=t.sample[a].toString();o.push(l(i,`function ${a}`)),o.push(n(i,"js",r,t.beautifyjs))}));var r=t.code.toString(),s=e.core.UUID();a.push(e.div("card border-0",[e.div([t.class?t.class:null,"card-body ns-example border rounded-top",t.dark?"bg-dark":null,t.pclass?t.pclass:null],t.label?e.button({label:t.label,color:"primary",onclick:function(e){t.code()}}):t.container(t.code())),o&&o.length>0?{elems:o}:null,l(s,"ns.build",!0),e.div({class:"collapse show card-body ns-code bg-light rounded-bottom",attr:{id:s},elems:[{tag:"button",class:"btn-clipboard btn btn-outline-primary btn-sm end-0 me-3 position-absolute",elems:"Copy",attr:{role:"button",onclick:function(){e.core.copyToClipboard(r,"Code copied to clipboard")}}},{tag:"code",class:"overflow-auto d-block",elems:{tag:"pre",attr:{lang:"js"},class:"prettyprint lang-js",elems:t.beautifyjs(r)}}]})].removeEmpty()))}return e.div("mb-5 ns-example",{id:t.title?null:t.id},a)}}(ns),function(e){e.file={fn:{onview:function(l){var n=$(l).closest(".file-upload-controller"),t=$(n).find("input[type='hidden']"),a=$(t).val();a&&(a.indexOf(",")>-1?e.file.view(a.split(","),l):e.file.view(a,l))},onchange:function(e){var l=$(e).closest(".file-upload-controller"),n=$(l).find("input[type='hidden']"),t=$(n).attr("id"),a=$(n).val(),o=$(`#${t}-view`),i=$(`#${t}-delete`);a?($(o).removeAttr("disabled").removeClass("disabled btn-secondary").addClass("btn-success"),$(i).removeAttr("disabled").removeClass("disabled btn-secondary").addClass("btn-danger")):($(o).prop("disabled",!0).addClass("disabled btn-secondary").removeClass("btn-success"),$(i).prop("disabled",!0).addClass("disabled btn-secondary").removeClass("btn-danger"))},ondelete:function(e){var l=$(e).closest(".file-upload-controller"),n=$(l).find("input[type='hidden']");$(n).val(""),$(n).trigger("change")},onupload:function(l){var n=$(l).closest(".file-upload-controller"),t=$(n).find("input[type='hidden']"),a=$(t).attr("data-ns-accept"),o=$(t).attr("data-ns-multiple");a=a||"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html",o=!!o&&e.core.parseBool(o),e.file.upload({multiple:o}).then((e=>{$(t).val(e),$(t).trigger("change")}),e.core.errorHandler)}},ctl:function(l){(l=$.extend({},{id:null,name:null,class:null,label:null,readonly:!1,disabled:!1,multiple:!1,size:"col-12",value:null,onchange:null,valid:null,invalid:null,accept:"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html"},l)).id=l.id?l.id:e.core.UUID();var n=[];l.label&&n.push({tag:"label",class:"form-label",attr:{for:l.id},elems:l.label});var t=[];t.push({tag:"input",class:[l.class],attr:{id:l.id,name:l.name,type:"hidden",readonly:l.readonly,disabled:l.disabled,value:l.value,onchange:["ns.file.fn.onchange(this);",l.onchange?l.onchange:null].combine(""),"data-ns-accept":l.accept,"data-ns-multiple":l.multiple},elems:null}),t.push(e.div("row",e.btngroup([e.button({id:`${l.id}-view`,label:"View",icon:"eye",color:l.value?"success":"secondary",class:"w-100",disabled:!l.value,onclick:"ns.file.fn.onview(this)"}),e.button({id:`${l.id}-delete`,icon:"times",color:l.value?"danger":"secondary",class:"w-0",disabled:!!l.disabled||(!!l.readonly||!l.value),onclick:"ns.file.fn.ondelete(this)"}),e.button({id:`${l.id}-upload`,icon:"upload",color:"primary",class:"w-0",disabled:!!l.disabled||!!l.readonly,onclick:"ns.file.fn.onupload(this)"})]))),l.valid&&t.push(e.div("valid-feedback",l.valid)),l.invalid&&t.push(e.div("invalid-feedback",l.invalid));var a=[];return a=l.size?[e.div(l.size,n.concat(t))]:n.concat(t),e.div("file-upload-controller",a)},upload:function(l){return new Promise(((n,t)=>{var a=e.core.UUID();l=$.extend({},{accept:"image/gif,image/bmp,image/x-windows-bmp,image/jpeg,image/png,application/pdf,application/zip,application/json,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/html",multiple:!1,cancelafter:18e4},l),e.build.append(document.body,{tag:"input",attr:{id:a,type:"file",multiple:l.multiple,accept:l.accept?l.accept:null},style:{display:"none"}}),$(`#${a}`).change((function(){$(this).addClass("upload-in-progress"),e.api.upload({obj:$(`#${a}`),progress:function(e){}}).then((e=>{n(e),$(`#${a}`).remove()})).catch((e=>{t(e)}))})),$(`#${a}`).trigger("click"),l.cancelafter>0&&setTimeout((function(e){$(e).hasClass("upload-in-progress")||$(e).remove()}),l.cancelafter,`#${a}`)}))},save:function(l){return new Promise(((n,t)=>{l?"string"==typeof l?e.file.save([l]).then((e=>{n(e)})).catch((e=>{t(e)})):e.api.put({name:`file/${l.combine(",")}`}).then((e=>{n(e)})).catch((e=>{t(e)})):t()}))},delete:function(l){return new Promise(((n,t)=>{l?"string"==typeof l?e.file.delete([l]).then((e=>{n(e)})).catch((e=>{t(e)})):e.api.delete({name:`file/${l.combine(",")}`}).then((e=>{n(e)})).catch((e=>{t(e)})):t()}))},info:function(l){return new Promise(((n,t)=>{l?"string"==typeof l?e.file.info([l]).then((e=>{n(e)})).catch((e=>{t(e)})):e.api.get({name:`file-info/${l.combine(",")}`}).then((e=>{n(e)})).catch((e=>{t(e)})):t()}))},download:function(l,n){var t=e.core.UUID();e.build.append(document.body,{tag:"a",attr:{id:t,href:`api/file/${l}`,download:n||null,hidden:!0}}),$(`#${t}`)[0].click(),setTimeout((function(e){$(`#${e}`).remove()}),300,t)},view:function(l,n){if(l){if("string"==typeof l)return e.file.view([l],n);e.loading.start(n).then((()=>e.file.info(l))).then((l=>{if(e.loading.stop(n),l)if(1===l.length)switch(l[0].mimetype){case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":case"image/x-windows-bmp":e.dlg.box({title:null,button:null,static:!1,size:"lg",elems:e.div([{tag:"img",class:"img-fluid mx-auto d-block rounded btn p-0",attr:{"data-ns-src":`api/file/${l[0].id}`,onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`}}])});break;default:e.file.download(l[0].id,l[0].filename)}else{var t=12;switch(l.length){case 1:t=12;break;case 2:t=6;break;case 3:t=4;break;default:t=3}var a=[];l.forEach((n=>{switch(n.mimetype){case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":case"image/x-windows-bmp":a.push(e.div(`col-${t}`,e.div("btn border p-1",{onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`},{tag:"img",class:"img-fluid mx-auto d-block rounded",attr:{"data-ns-src":`api/file/${n.id}`}})));break;default:a.push(e.div(`d-flex align-items-stretch col-${t}`,e.div("btn border p-1 d-flex justify-content-center w-100",{onclick:`ns.file.download('${l[0].id}','${l[0].filename}');`},e.span("align-self-center",e.icon({icon:"download",size:"2x"})))))}})),e.dlg.box({title:null,button:null,static:!1,size:"lg",elems:e.div("container p-0",e.div("d-flex justify-content-center row g-3",a))})}})).catch((l=>{e.loading.stop(n)}))}}}}(ns),function(e){const l=[{key:"i",icon:"info-circle",color:"primary",textcolor:"light"},{key:"!!",icon:"exclamation-triangle",color:"danger",textcolor:"light"},{key:"!",icon:"exclamation-triangle",color:"warning",textcolor:"dark"},{key:"?",icon:"question-circle",color:"success",textcolor:"light"},{key:"-",icon:"minus-circle",color:"danger",textcolor:"light"},{key:"x",icon:"times-circle",color:"danger",textcolor:"light"},{key:"/",icon:"check-circle",color:"success",textcolor:"light"},{key:"dosave",icon:"save",color:"success",textcolor:"light"},{key:"dodelete",icon:"trash",color:"danger",textcolor:"light"},{key:"lock",icon:"key",color:"warning",textcolor:"dark"},{key:"shield",icon:"shield-alt",color:"danger",textcolor:"light"},{key:"logout",icon:"door-open",color:"secondary",textcolor:"white"}];e.sIcon=function(e){if(e){var n=l.find((l=>l.key===e));if(n)return n}return null},e.icon=function(l){if(l){if("string"==typeof l)return e.icon({icon:l});if(l.hasOwnProperty("ns"))return l;var n=e.sIcon(l.icon);if(n&&(l.icon=n.icon,l.color=n.color),"favicon"===l.icon)return{tag:"img",class:"favicon",attr:{src:"./img/favicon.ico"}};var t=[];if((l=$.extend({},{icon:null,class:null,style:"fas",fixwidth:!0,size:null,rotate:null,stack:0,spin:!1,color:null,elems:null},l)).size&&t.push(`fa-${l.size}`),l.class&&(Array.isArray(l.class)?t.push(l.class.combine(" ")):t.push(l.class)),l.stack>0&&(t.push(`fa-stack-${l.stack}x`),1===l.stack&&t.push("fa-inverse")),l.color&&t.push(`text-${l.color}`),l.fixwidth&&t.push("fa-fw"),l.rotate)switch(l.rotate){case 90:case 180:case 270:t.push(`fa-rotate-${l.rotate}`);case"horizontal":case"vertical":case"both":t.push(`fa-flip-${l.rotate}`)}return l.spin&&t.push("fa-spin"),l.icon,l.elems&&Array.isArray(l.elems)&&2===l.elems.length?(t.push("fa-stack"),{ns:1,tag:"span",class:t,elems:l.elems.map(((n,t)=>{var a=l.elems.length-t;return n.stack=a,e.icon(n)}))}):(t.push(l.style),t.push(`fa-${l.icon}`),{ns:1,tag:"i",class:t,elems:l.elems})}}}(ns),function(e){e.img=function(l){if(l){if("string"==typeof l)return e.img({src:l});var n={tag:"img",class:[(l=$.extend({},{id:null,class:null,src:null,alt:null,width:null,height:null,fluid:!1,thumbnail:!1,caption:null,captionclass:null},l)).fluid?"img-fluid":null,l.thumbnail?"img-thumbnail":null,l.fluid||l.thumbnail?null:"d-inline-block align-text-top",l.class?l.class:null].combine(" "),attr:{src:l.src?l.src:null,alt:l.alt?l.alt:null,width:l.width?l.width:null,height:l.height?l.height:null}};return l.caption?{tag:"figure",class:"figure",elems:[n,{tag:"figcaption",class:["figure-caption",l.captionclass],elems:l.caption}]}:n}}}(ns),function(e){var l=function(e,l){var n=$(e).parent(),t=$(n).find("input[type='number']"),a=parseInt($(t).val(),10),o=$(t).attr("min"),i=$(t).attr("max");o=o?parseInt(o,10):Number.MIN_VALUE,i=i?parseInt(i,10):Number.MAX_VALUE,a+l>=o&&a+l<=i?$(t).val(a+l):a+l>i?$(t).val(i):a+l<o&&$(t).val(o)};e.input=function(n){(n=$.extend({},{id:null,name:null,class:null,label:null,labelsize:null,ctlsize:null,hiddenlabel:null,nowarp:!1,floatinglabel:!1,btncheck:!1,type:"text",placeholder:null,min:0,max:0,step:0,rows:0,plaintext:!1,readonly:!1,disabled:!1,multiple:!1,size:null,style:null,weight:null,value:null,checked:!1,inline:!1,onchange:null,onclick:null,onfocus:null,onblur:null,required:!1,valid:null,invalid:null,before:null,beforetype:"text",after:null,aftertype:"text",option:null,data:null,numctl:!1,addctl:null,tooltip:null,flexcontainer:!1,hascontainer:!0},n)).id=n.id?n.id:e.core.UUID(),n.floatinglabel&&(["checkbox","radio","switch","file"].indexOf(n.type)>-1||n.readonly?n.floatinglabel=!1:n.label&&!n.placeholder&&(n.placeholder=n.label));var t=[];!n.floatinglabel&&n.label&&-1===["checkbox","radio","switch"].indexOf(n.type)&&t.push({tag:"label",class:[,n.labelsize?`col-form-label col-${n.labelsize}`:"form-label"],attr:{for:n.id},elems:n.label});var a=[];n.before?"text"===n.beforetype?a.push({tag:"span",class:"input-group-text",elems:n.before}):a=a.concat(n.before):"number"===n.type&&!0===n.numctl&&a.push(e.button({label:e.icon("minus"),color:"primary",onclick:function(e){l(e,-n.step?-n.step:1)}}));var o=[];switch(n.type){case"switch":case"checkbox":case"radio":o.push(e.tooltip(n.tooltip,{tag:"input",class:[n.btncheck?"btn-check":"form-check-input",n.class],attr:{id:n.id,"aria-label":n.hiddenlabel?n.hiddenlabel:null,name:n.name,type:"switch"===n.type?"checkbox":n.type,placeholder:n.placeholder,min:n.min,max:n.max,step:n.step,readonly:n.readonly?"":null,disabled:n.disabled?"":null,required:n.required?"required":null,value:n.value,checked:n.checked?"checked":null,autocomplete:n.btncheck?"off":null,list:i,onchange:n.onchange,onclick:n.onclick,onfocus:n.onfocus,onblur:n.onblur},style:n.style,elems:null})),n.label&&o.push({tag:"label",class:n.btncheck?["btn",n.color?`btn-${n.color}`:"btn-primary"]:"form-check-label",attr:{for:n.id},elems:n.label});break;case"textarea":o.push(e.tooltip(n.tooltip,{tag:"textarea",class:[n.plaintext&&n.readonly?"form-control-plaintext":"form-control",n.weight&&!(n.before||n.after||null!==n.addctl||"number"===n.type&&!0===n.numctl)?`form-control-${n.weight}`:null,n.label&&n.floatinglabel?[n.before||n.after?"rounded-0":null,n.before?"rounded-end":null,n.after?"rounded-start":null].combine(" "):null,n.class],attr:{id:n.id,"aria-label":n.hiddenlabel?n.hiddenlabel:null,name:n.name,placeholder:n.placeholder,readonly:n.readonly?"":null,disabled:n.disabled?"":null,required:n.required?"required":null,rows:n.rows,onchange:n.onchange,onclick:n.onclick,onfocus:n.onfocus,onblur:n.onblur},style:n.style,elems:n.value}));break;case"select":o.push(e.tooltip(n.tooltip,{tag:"select",class:[n.plaintext&&n.readonly?"form-select-plaintext":"form-select",n.weight&&!(n.before||n.after||null!==n.addctl||"number"===n.type&&!0===n.numctl)?`form-select-${n.weight}`:null,n.label&&n.floatinglabel?[n.before||n.after?"rounded-0":null,n.before?"rounded-end":null,n.after?"rounded-start":null].combine(" "):null,n.class],data:n.data,attr:{id:n.id,"aria-label":n.hiddenlabel?n.hiddenlabel:null,name:n.name,placeholder:n.placeholder,readonly:n.readonly?"":null,disabled:n.disabled?"":null,required:n.required?"required":null,multiple:n.multiple,size:n.rows,onchange:n.onchange,onclick:n.onclick,onfocus:n.onfocus,onblur:n.onblur},style:n.style,elems:e.option(n.option,n.value)}));break;case"datalist":o.push({tag:"datalist",attr:{id:n.id},elems:e.option(n.option)});break;default:var i=n.option?e.core.UUID():null;o.push(e.tooltip(n.tooltip,{tag:"input",class:["range"!==n.type&&"button"!==n.type&&"submit"!==n.type&&"reset"!==n.type?[n.plaintext&&n.readonly?"form-control-plaintext":"form-control",,n.weight&&!(n.before||n.after||null!==n.addctl||"number"===n.type&&!0===n.numctl)?`form-control-${n.weight}`:null].combine(" "):"button"!==n.type&&"submit"!==n.type&&"reset"!==n.type?"form-range":null,"color"===n.type?["form-control-color",n.floatinglabel?"w-100":null].combine(" "):null,n.label&&n.floatinglabel?[n.before||n.after||n.numctl?"rounded-0":null,n.before?"rounded-end":null,n.after?"rounded-start":null].combine(" "):n.label&&n.numctl?"rounded-0":null,n.class],data:n.data,attr:{id:n.id,"aria-label":n.hiddenlabel?n.hiddenlabel:null,name:n.name,type:n.type,role:"button"===n.type&&"submit"===n.type&&"reset"===n.type?"button":null,placeholder:n.placeholder,min:n.min,max:n.max,step:n.step,readonly:n.readonly?"":null,disabled:n.disabled?"":null,required:n.required?"required":null,value:["date","datetime","month","datetime-local","time","week"].indexOf(n.value)>-1?moment(n.value):n.value,list:i,onchange:n.onchange,onclick:n.onclick,onfocus:n.onfocus,onblur:n.onblur},style:n.style,elems:null})),n.option&&o.push({tag:"datalist",attr:{id:i},elems:e.option(n.option)})}n.floatinglabel&&n.label?(o.push({tag:"label",attr:{for:n.id},elems:n.label}),a.push(e.div("form-floating flex-grow-1",o))):a=a.concat(o),n.after?"text"===n.aftertype?a.push({tag:"span",class:"input-group-text",elems:n.after}):a=a.concat(n.after):"number"===n.type&&!0===n.numctl?a.push(e.button({label:e.icon("plus"),color:"primary",onclick:function(e){l(e,n.step?n.step:1)}})):null!==n.addctl&&a.push(e.button({label:e.icon("plus"),color:"primary",onclick:n.addctl})),n.valid&&a.push(e.div("valid-feedback",n.valid)),n.invalid&&a.push(e.div("invalid-feedback",n.invalid)),n.labelsize&&(a=[e.div(n.ctlsize?`col-${n.ctlsize}`:"col-auto",a)]),(n.before||n.after||null!==n.addctl||"number"===n.type&&!0===n.numctl)&&(a=n.flexcontainer?[e.div({ns:0,class:["d-flex",n.class],elems:a})]:[e.div(["input-group",n.nowarp?"flex-nowarp":null,n.weight?`input-group-${n.weight}`:null,n.valid||n.invalid?"has-validation":null],a)]),["checkbox","radio","switch"].indexOf(n.type)>-1&&(a=n.flexcontainer?[e.div({ns:0,class:["d-flex",n.class],elems:a})]:[e.div([n.label&&n.btncheck?null:"form-check",n.label&&n.inline?"form-check-inline":null,"switch"===n.type?"form-switch":null,n.valid||n.invalid?"has-validation":null],a)]);var r=[];return(r=n.size||"hidden"===n.type?[e.div([n.size,"hidden"===n.type?"d-none":null].combine(" "),t.concat(a))]:t.concat(a))&&"object"==typeof r?Array.isArray(r)?1===r.length?r[0]:{elems:r}:r:(console.log(r),console.warn(`input #${n.id} has many element`),{elems:r})}}(ns),function(e){e.inputgroup={container:function(l){return Array.isArray(l)||"string"==typeof l?e.inputgroup.container({elems:l}):[(l=$.extend({},{id:null,label:null,class:null,elems:null,nowrap:!1},l)).label?{tag:"label",attr:{for:l.id?l.id:null,class:"form-label",elems:l.label}}:null,e.div(["input-group",l.nowrap?"flex-nowrap":null,l.class],l.elems)].removeEmpty()},text:function(l){return Array.isArray(l)||"string"==typeof l?e.inputgroup.text({elems:l}):(l=$.extend({},{id:null,class:null,elems:null},l),e.div(["input-group-text",l.class],{id:l.id},l.elems))}}}(ns),function(e){var l={options:{base:{container:null,id:e.core.UUID(),dbname:"",control:null,listprocessor:function(e){return new Promise(((l,n)=>{e&&e.length>0?l([{group:null,items:e.map((e=>({key:e._id,label:e.name})))}]):l(null)}))},onpagechange:function(e,l){console.warn("Unhandle onpagechange")}},query:{filter:null,sort:null,field:{__v:0,state:0},limit:10,skip:0},item:{key:null,label:null,sub:null,control:null,controlstyle:"btn-group",icon:null,picture:null,checked:!1,key:null,onclick:null},group:{key:null,label:null,icon:null,bigicon:!1,picture:null,key:null,elems:null}},db:function(l,n,t){var a=e.data.get(l);return new Promise(((l,o)=>{var i=null;e.api.post({sender:t,name:`list/${a.dbname}`,data:n}).then((e=>(i=e.total,a.listprocessor(e.data)))).then((e=>{l({total:i,data:e})})).catch((e=>{o(e)}))}))},clear:function(e){var l=$(`#${e}`);l&&l.length>0&&($(l).find(".list-group").remove(),$(l).find(".ns-list-header").remove(),$(l).find(".ns-list-page").remove(),$(l).find(".list-group-item").remove())},build:{page:function(l){return l.total>0?e.pagination({limit:l.limit,skip:l.skip,total:l.total,max:5,onchange:function(l,n){e.list.fn.onPageChange(l,n)}}):null},item:function(n){var t=[];return(n=$.extend({},l.options.item,n)).label&&t.push(e.div("ns-item-label me-2",n.label)),n.sub&&t.push(e.div([{tag:"small",class:"text-muted me-2 ns-item-sub",elems:Array.isArray(n.sub)?n.sub.combine(" | "):n.sub}])),t=[e.div(t.slice())],n.icon&&t.unshift(e.div("ns-item-icon",e.icon({size:"lg",elems:[{icon:"circle"},{icon:n.icon}]}))),n.picture&&t.unshift(e.div("ns-item-picture",e.div([{tag:"img",attr:{"data-ns-src":`api/file/${n.picture}`}}]))),t.unshift(e.div("ns-item-check",e.icon({size:"lg",elems:[{icon:"circle"},{icon:"check"}]}))),t=[e.div(t.slice())],n.control&&Array.isArray(n.control)&&("btn-group"===n.controlstyle?t.push(e.div("ns-item-control",{onclick:"ns.list.fn.preventBubble(event)"},e.btngroup(n.control.map((l=>e.button(l)))))):"dropdown"===n.controlstyle?t.push(e.div("ns-item-control",{onclick:"ns.list.fn.preventBubble(event)"},e.button({option:n.control}))):t.push(e.div("ns-item-control",{onclick:"ns.list.fn.preventBubble(event)"},n.control))),e.div(["list-group-item","list-group-item-action",n.checked?"ns-checked":null],{"data-key":n.key,"data-ns-onclick":n.onclick&&"string"==typeof n.onclick?n.onclick:null,onclick:"ns.list.fn.itemOnClick(this,event)"},t)},group:function(n){var t=[];return(n=$.extend({},l.options.group,n)).label&&t.push({tag:"h5",class:"ns-item-label",elems:n.label}),n.icon&&(n.bigicon?t.unshift(e.div("display-1",e.icon({size:"lg",icon:n.icon}))):t.unshift(e.div("ns-item-icon",e.icon({size:"lg",elems:[{icon:"circle"},{icon:n.icon}]})))),n.picture&&t.unshift(e.div("ns-item-picture",e.div([{tag:"img",attr:{"data-ns-src":`api/file/${n.picture}`}}]))),t&&t.length>0?[e.div("ns-list-header",{"data-key":n.key},t),e.div("list-group ns-list-group",{"data-ns-group-key":n.key},n.elems)]:[e.div("list-group ns-list-group",{"data-ns-group-key":""},n.elems)]},list:function(e,n){return n=$.extend({},l.options.query,n),new Promise(((t,a)=>{l.db(e,n).then((e=>{var a=[];e.data&&e.data.length>0?$.each(e.data,((e,n)=>{a.push.apply(a,l.build.group({label:n.group,elems:n.items.map((e=>l.build.item(e)))}))})):a.push.apply(a,l.build.group({label:"No Data"})),t({page:l.build.page({total:e.total,skip:n.skip,limit:n.limit}),li:{elems:a}})})).catch((e=>{a(e)}))}))},container:function(n,t){return new Promise(((a,o)=>{t=$.extend({},l.options.query,t),l.build.list(n,t).then((l=>{var t=e.data.get(n);$(t.container).empty(),e.build.append(t.container,e.div("ns-list-container ns-mode-normal",{id:n},[t.control,l.li,l.page])),e.build.init(t.container),a()})).catch((e=>{o(e)}))}))}},getChecked:function(e){var l=$(e).closest(".ns-list-container"),n=$(l).find(".ns-checked");return n&&n.length>0?$(n).get().map((e=>({key:$(e).attr("data-key"),title:$(e).find(".ns-label").text()}))):null}},n={preventBubble:function(e){e.stopPropagation()},itemOnClick:function(e,l){l.stopPropagation();var n=$(e).closest(".ns-list-container");if(n&&n.length>0&&$(n).hasClass("ns-mode-check"))$(e).hasClass("ns-checked")?$(e).removeClass("ns-checked"):$(e).addClass("ns-checked");else{var t=$(e).attr("data-ns-onclick");t&&window[t](e,l)}},onPageChange:function(l,n){var t=$(n).closest(".ns-list-container"),a=$(t).attr("id");e.data.get(a).onpagechange(l,n)},mode:{normal:function(e){var l=$(e).closest(".ns-list-container");l&&l.length>0&&($(l).find(".ns-list-control.ns-mode-check").removeClass("ns-fadeslidein").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).removeClass("ns-mode-check").addClass("ns-mode-normal")}),500,l),$(l).find(".ns-list-control.ns-mode-normal").removeClass("ns-fadeslideout").addClass("ns-fadeslidein"))},check:function(e){var l=$(e).closest(".ns-list-container");l&&l.length>0&&($(l).find(".ns-list-control.ns-mode-check").removeClass("ns-fadeslideout").addClass("ns-fadeslidein"),setTimeout((function(e){$(e).removeClass("ns-mode-normal").addClass("ns-mode-check")}),500,l),$(l).find(".ns-list-control.ns-mode-normal").removeClass("ns-fadeslidein").addClass("ns-fadeslideout"))}},check:function(e){var l=$(e).closest(".ns-list-container");if(l&&l.length>0){let e=$(l).find(".list-group-item");$(l).find(".list-group-item.ns-checked").length===e.length?$(e).removeClass("ns-checked"):$(e).addClass("ns-checked")}}};e.list={fn:n,checked:function(e){return l.getChecked(e)},refresh:function(n,t){return new Promise(((a,o)=>{l.build.list(n,t).then((t=>{l.clear(n);var o=$(`#${n}`)[0];e.build.append(o,[t.li,t.page]),e.build.init(o),a()})).catch((e=>{o(e)}))}))},build:function(n,t){(n=$.extend({},l.options.base,n)).dbname?n.container?(e.data.set(n.id,n),l.build.container(n.id,t).then((()=>{e.build.init(n.container)}))):console.error("ns.list opt required container"):console.error("ns.list opt required dbname")},query:function(l,n){e.query(l,n)},excel:function(l,n){var t=$(l).closest(".ns-list-container").attr("id"),a=e.data.get(t);e.api.download({sender:l,name:`excel/${a.dbname}`,data:n}).catch((e=>{rej(e)}))}}}(ns),function(e){e.listctl=function(l){if((l=$.extend({},{class:null,icon:null,title:null,menu:null,fixed:!1,main:null,check:null,query:null,excel:null},l)).main||l.check||"string"==typeof l.excel||"string"==typeof l.query||e.core.isFunction(l.query)||e.core.isFunction(l.excel)){var n={},t=[],a=null;(l.title||l.menu)&&(a=e.div("d-flex justify-content-center me-md-2 me-0 mb-2 w-sm-100 w-md-auto",[l.menu?l.option?e.dropdown({icon:l.icon,color:"primary",onclick:l.menu&&"string"==typeof l.menu?l.menu:null,option:l.menu&&"string"!=typeof l.menu&&Array.isArray(l.menu)?l.menu:null,optionarrow:!1,label:l.title}):e.button({icon:l.icon,color:"primary",onclick:l.menu&&"string"==typeof l.menu?l.menu:null,label:l.title}):{tag:"h5",class:"m-0 ps-2",elems:l.title}]));var o=null;l.main&&(Array(l.main)||(l.main=[l.main]),o=e.btngroup({class:"ms-2",elems:l.main.map((function(l){return l.option?e.dropdown(l):e.button(l)}))}));var i=null;if((l.check||"string"==typeof l.excel||"string"==typeof l.query||e.core.isFunction(l.excel)||e.core.isFunction(l.query))&&(i=e.btngroup({class:"ms-2",elems:[l.check?e.button({icon:"tasks",color:"primary",onclick:"ns.list.fn.mode.check(this)"}):null,e.core.isFunction(l.excel)||"string"==typeof l.excel?e.button({icon:"file-excel",color:"primary",onclick:l.excel}):null,e.core.isFunction(l.query)||"string"==typeof l.query?e.button({icon:"cog",color:"primary",onclick:l.query}):null].removeEmpty()})),(o||i||a)&&(n.normal=[],a&&n.normal.push(a),n.normal.push(e.div("mx-auto d-none d-md-flex mb-2",null)),o||i)){var r=e.div("mb-2",[o||null,i||null]);n.normal.push(r)}if(l.check){var s=[];s.push(e.button({icon:"check-double",color:"primary",label:"All",onclick:"ns.list.fn.check(this)"})),$.each(l.check,(function(l,n){s.push(e.button(n))})),n.check=[a||null,e.div("mx-auto d-none d-md-flex mb-2",null),e.div("mb-2",[e.button({icon:"chevron-left",color:"primary",onclick:"ns.list.fn.mode.normal(this)"}),s?e.btngroup({class:"ms-2",elems:s}):null])].removeEmpty()}else n.check=null;return n.normal&&t.push(e.div(["ns-list-control","ns-mode-normal","btn-toolbar","justify-content-center","justify-content-between-md",l.fixed?"position-fixed top-0":null,l.class],{role:"toolbar"},n.normal)),n.check&&t.push(e.div(["ns-list-control","ns-mode-check","btn-toolbar","justify-content-center","justify-content-between-md",l.fixed?"position-fixed top-0":null,l.class],{role:"toolbar"},n.check)),t&&t.length>0?{elems:t}:null}return null}}(ns),function(e){e.listgroup={container:function(l){return Array.isArray(l)||"string"==typeof l?e.listgroup.container({elems:l}):((l=$.extend({},{type:"ul",class:null,flush:!1,numbered:!1,horizontal:null,elems:null,label:null,id:null},l)).horizontal&&(Array.isArray(l.horizontal)?$.each(l.horizontal,(function(e){!0===l.horizontal[e]?l.horizontal[e]="horizontal":"horizontal"!==l.horizontal[e]&&(l.horizontal[e]=`horizontal-${l.horizontal[e]}`)})):!0===l.horizontal?l.horizontal="horizontal":"horizontal"!==l.horizontal&&(l.horizontal=`horizontal-${l.horizontal}`)),l.label?(l.id=l.id||e.core.UUID(),[{tag:"label",class:"form-label",attr:{for:l.id},elems:l.label},{tag:"ul"===l.type&&l.numbered?"ol":l.type,class:["list-group",l.class,l.flush?"list-group-flush":null,l.numbered?"list-group-numbered":null,e.core.multipleClassSupport(l.horizontal,"list-group-$1")],attr:{id:l.id},elems:l.elems}]):{tag:"ul"===l.type&&l.numbered?"ol":l.type,class:["list-group",l.class,l.flush?"list-group-flush":null,l.numbered?"list-group-numbered":null,e.core.multipleClassSupport(l.horizontal,"list-group-$1")],elems:l.elems})},item:function(l){return Array.isArray(l)||"string"==typeof l?e.listgroup.item({elems:l}):(l=$.extend({},{class:null,flush:!1,elems:null,active:!1,disabled:!1,color:null,action:!1,href:null,onclick:null,check:null,value:null,name:null,id:null},l)).check?{tag:"label",class:["list-group-item","switch"===l.check?"form-switch":null,l.disabled?"disabled":null,l.action?"list-group-item-action":null,l.color?`list-group-item-${l.color}`:null,l.class],attr:{onclick:l.onclick,disabled:!l.href&&l.disabled?"":null},elems:[{tag:"input",class:["form-check-input","me-2","switch"===l.check?"ms-0":null],attr:{type:"switch"===l.check?"checkbox":l.check,value:l.value,name:l.name,id:l.id,checked:l.active?"":null}},l.elems]}:{tag:l.href?"a":e.core.isFunction(l.onclick)?"button":"li",class:["list-group-item",l.active?"active":null,l.disabled?"disabled":null,l.action?"list-group-item-action":null,l.color?`list-group-item-${l.color}`:null,l.class],attr:{href:l.href,onclick:l.onclick,disabled:!l.href&&l.disabled?"":null,tabindex:l.href&&l.disabled?"-1":null,"aria-disabled":l.href&&l.disabled?"true":null},elems:l.elems}}}}(ns),function(e){e.loading={start:function(e){return new Promise(((l,n)=>{if(e){if($(e).hasClass("page-link")&&(e=$(e).parent()),!$(e).hasClass("loading")){if($(e).addClass("loading"),$(e).addClass("disabled"),$(e).attr("disabled","disabled"),"button"===$(e).attr("type")){var t=$(e).find(".fas.fa-fw")[0];t&&($(t).attr("ns-old-class",$(t).attr("class")),$(t).attr("class","fas fa-fw fa-circle-notch fa-spin"))}l()}}else l()}))},stop:function(e){return new Promise(((l,n)=>{if(e){if($(e).hasClass("page-link")&&(e=$(e).parent()),$(e).hasClass("loading")){if($(e).removeClass("loading"),$(e).removeClass("disabled"),$(e).removeAttr("disabled"),"button"===$(e).attr("type")){var t=$(e).find("[ns-old-class]")[0];t&&($(t).attr("class",$(t).attr("ns-old-class")),$(t).removeAttr("ns-old-class"))}l()}}else l()}))}}}(ns),function(e){e.menu={item:function(l){if(l&&Array.isArray(l))return{tag:"ul",class:"btn-toggle-nav",elems:l.map((function(l){return"string"==typeof l&&(l={label:l}),l=$.extend({},{label:null,icon:null,onclick:null,href:"javascript:void(0)",active:!1},l),{tag:"li",elems:e.div(["d-inline-block",l.active?"active":null],{onclick:l.onclick?l.onclick:null,role:"button"},[e.icon(l.icon),{tag:"span",class:[l.icon?"ms-2":null],elems:l.label}])}}))};console.error("Unsupported argument")},container:function(l){if(l)return(l=$.extend({},{id:null,title:null,active:!1,class:null,item:null},l)).id=l.id?l.id:e.core.UUID(),{elems:[e.div([e.div(["btn-toggle",l.active?"collapsed":null],{"data-bs-toggle":"collapse","data-bs-target":`#${l.id}`,"aria-expanded":l.active?"true":"false",role:"button"},{tag:"span",class:"ms-2",elems:l.title})]),e.div(["collapse",l.active?"show":null,l.class],{id:l.id},l.item)]};console.error("Unsupported argument")}}}(ns),function(e){e.nav=function(l){if(l){if("string"==typeof l)return l;if(l.elems||(l={elems:l.slice()}),(l=$.extend({},{id:null,style:null,align:null,size:null,animate:!0,border:!0,rounded:!0,flush:!1,elems:[]},l)).id=l.id?l.id:e.core.UUID(),Array.isArray(l.elems)){var n=-1;l.elems.forEach(((e,l)=>{-1===n&&e.active&&(n=l)})),-1===n&&"object"==typeof l.elems[0]&&(l.elems[0].active=!0);var t=[],a=[],o={id:null,label:null,icon:null,disable:!1,active:!1,option:null,elems:null};if(l.elems.forEach(((n,i)=>{var r=[];if("string"==typeof n&&(n=0===i?{label:n,active:!0}:{label:n}),(n=$.extend({},o,n)).id=n.id?n.id:n.elems&&n.elems.length>0?e.core.UUID():null,n.icon&&("string"==typeof n.icon?r.push({elems:e.icon({icon:n.icon,class:"me-2"})}):r.push({elems:e.icon(n.icon)})),n.label&&r.push({elems:[{tag:"span",elems:n.label}]}),r=[{tag:"a",class:["nav-link",n.option?"dropdown-toggle":null,n.active?"active":null,n.disabled?"disabled":null],attr:{href:`#${n.id}-body`,id:`${n.id}-head`,"data-bs-toggle":n.option?"dropdown":"tab"===l.style?"tab":"pill"===l.style?"pill":"tab","data-ns-hasbody":n.elems?"true":null,role:n.option?"button":null},elems:r.slice()}],n.option&&r.push({tag:"ul",class:"dropdown-menu",elems:e.ddoption(n.option)}),r={tag:"li",class:["nav-item",n.option?"dropdown":null],attr:{role:"presentation"},elems:r.slice()},t=t.concat(r),n.elems){var s=e.div(["tab-pane",l.animate?"fade":null,n.active?"active show":null],{id:`${n.id}-body`,role:"tabpanel"},n.elems);a=a.concat(s)}})),t={tag:"ul",class:["nav",a&&a.length>0?"tab"===l.style?"card-"+("vertical-right"===l.align?"footer":"header")+"-tabs":"pill"===l.style?"card-"+("vertical-right"===l.align?"footer":"header")+"-pills":"card-"+("vertical-right"===l.align?"footer":"header")+"-tabs":null,l.column?"flex-column mb-auto":null,l.flush?"nav-flush":null,"tab"===l.style?"nav-tabs":"pill"===l.style?"nav-pills":null,"right"===l.align?"justify-content-end":"center"===l.align?"justify-content-center":"vertical"===l.align||"vertical-right"===l.align?"flex-column mb-auto":"fill"===l.align?"nav-fill":null],attr:{id:`${l.id}-head`,role:"tablist"},elems:t.slice()},a=a&&a.length>0?e.div("tab-content",{id:`${l.id}-body`},a.slice()):null){var i=[];return i=l.size?"vertical-right"===l.align?e.div("row g-0",[e.div("col",e.div("card-body",a)),e.div([l.size,"card-footer border-0 p-2"],e.div(Array.isArray(t)?t:[t]))]):e.div("row g-0",[e.div([l.size,"card-header border-0"],e.div(Array.isArray(t)?t:[t])),e.div("col",e.div("card-body",a))]):[e.div("card-header",t),e.div("card-body",a)],e.div(["card p-0",l.rounded?null:"rounded-0",l.border?null:"border-0"],i)}return t}return l.elems=[l.elems],e.nav(l)}}}(ns),function(e){e.navbar={container:function(l){return Array.isArray(l)?e.navbar.container({elems:l}):{tag:"nav",class:["navbar",(l=$.extend({},{id:null,class:null,containerfluid:!0,containerclass:null,expand:null,light:"light",color:null,position:null,style:null,elems:[]},l)).expand||""===l.expand?""===l.expand?"navbar-expand":`navbar-expand-${l.expand}`:null,l.light?`navbar-${l.light}`:null,l.color?`bg-${l.color}`:null,l.class?l.class:null,l.position?l.position:null],style:l.style?l.style:null,elems:e.div([!0===l.containerfluid?"container-fluid":!1===l.containerfluid?"container":e.core.multipleClassSupport(l.containerfluid,"container-$1"),l.containerclass?l.containerclass:null],l.elems)}},brand:function(l){if("string"==typeof l)return e.navbar.brand({label:l});(l=$.extend({},{id:null,class:null,href:null,onclick:null,label:null,icon:null,img:null},l)).heading&&console.warn("ns.navbar.brand has heading");var n=[l.img?{tag:"img",attr:{src:l.img,width:30,height:24,alt:""}}:null,l.icon?e.icon(l.icon):null,l.label&&(l.img||l.icon)?{tag:"span",class:"ms-2",elems:l.label}:l.label].removeEmpty();return l.href?{tag:"a",class:["navbar-brand",l.class],attr:{href:l.href?l.href:"javascript:void(0)",id:l.id?l.id:null,onclick:l.onclick},elems:n}:{tag:"span",class:["navbar-brand","mb-0","h1",l.class],attr:{id:l.id?l.id:null,onclick:l.onclick},elems:n}},toggler:function(l){return"string"==typeof l?e.navbar.toggler({id:l}):{tag:"button",class:["navbar-toggler",(l=$.extend({},{id:null,class:null,icon:e.icon("bars"),toggle:"collapse"},l)).class],attr:{type:"button","data-bs-toggle":l.toggle?l.toggle:null,"data-bs-target":l.id?`#${l.id}`:null,"aria-controls":l.id?l.id:null,"aria-expanded":"false","aria-label":"Toggle navigation"},elems:l.icon}},formcontainer:function(l){return Array.isArray(l)?e.navbar.formcontainer({elems:l}):{tag:"form",class:["d-flex",(l=$.extend({},{id:null,class:null,elems:null},l)).class],attr:{id:l.id?l.id:null},elems:l.elems}},collapsecontainer:function(l){return Array.isArray(l)?e.navbar.collapsecontainer({elems:l}):(l=$.extend({},{id:null,class:null,elems:null},l),e.div(["collapse","navbar-collapse",l.class],{id:l.id},l.elems))},offcanvascontainer:function(l){return Array.isArray(l)?e.navbar.offcanvascontainer({elems:l}):(l=$.extend({},{id:null,title:null,class:null,elems:null},l),e.div(["offcanvas","offcanvas-end",l.class],{id:l.id?l.id:null,tabindex:"-1","aria-labelledby":l.id?`${l.id}-label`:null},[e.div("offcanvas-header",[{tag:"h5",class:"offcanvas-title",attr:{id:l.id?`${l.id}-label`:null},elems:l.title},{tag:"button",class:"btn-close text-reset",attr:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}}]),e.div("offcanvas-body",l.elems)]))},itemcontainer:function(l){return Array.isArray(l)?e.navbar.itemcontainer({elems:l}):(l=$.extend({},{id:null,class:null,scroll:null,mxauto:!0,parenttype:null,elems:null},l),e.div(["navbar-nav",l.mxauto?"me-auto":null,"collapse"===l.parenttype?"mb-2 mb-lg-0":null,"offcanvas"===l.parenttype?"justify-content-end flex-grow-1 pe-3":null,l.class,l.scroll?"navbar-nav-scroll":null],{style:l.scroll?`--bs-scroll-height: ${l.scroll};`:null},l.elems))},item:function(l){return"string"==typeof l?e.navbar.item({label:l}):((l=$.extend({},{id:null,class:null,option:null,href:"javascript:void(0)",onclick:null,icon:null,largeicon:!1,label:null,labelshow:null,active:!1,disabled:!1},l)).option&&null===l.id&&(l.id=e.core.UUID()),e.div(["nav-item d-flex align-content-center flex-wrap",l.option?"dropdown":null],{id:l.id&&null===l.option?l.id:null,onclick:l.onclick?l.onclick:null},[{tag:"a",class:["nav-link text-md-center",l.active?"active":null,l.disabled?"disabled":null,l.option?"dropdown-toggle":null],attr:{"aria-current":l.active?"page":null,href:l.href?l.href:null,id:l.id?l.id:null,role:"button","data-bs-toggle":l.option?"dropdown":null,"aria-expanded":l.option?"false":null},elems:[{tag:l.largeicon?"span":null,class:l.largeicon?["d-md-block h4-md",l.label?"mb-0":null].combine(" "):null,elems:l.icon?e.icon(l.icon):null},e.span([l.icon&&!l.largeicon?"ms-2":null,l.icon&&l.largeicon?"ms-2 ms-md-0":null,l.option?"me-2":null,l.labelshow?`d-none d-${l.labelshow}-inline`:null],l.label)].removeEmpty()},l.option?{tag:"ul",class:"dropdown-menu w-100 w-md-auto",attr:{"aria-labelledby":l.id?l.id:null},elems:e.ddoption(l.option)}:null]))},text:function(l){return e.span("navbar-text",l)}}}(ns),function(e){var l={build:function(l){(l=$.extend({},{id:null,class:null,color:null,textcolor:null,placement:"start",close:!0,title:null,scroll:!0,backdrop:!1,elems:null,padding:null,margin:null},l)).id=l.id?l.id:e.core.UUID();var n=null;(l.close||l.title)&&(n=e.div("offcanvas-header",[l.title?{tag:"h5",class:"offcanvas-title",attr:{id:`${l.id}-label`},elems:l.title}:null,l.close?{tag:"button",class:"btn-close text-reset",attr:{"data-bs-dismiss":"offcanvas","aria-label":"Close"}}:null]));var t=null;return l.elems&&(t=e.div(["offcanvas-body",l.padding?`p-${l.padding}`:null].combine(" "),l.elems)),e.div(["offcanvas",l.placement?`offcanvas-${l.placement}`:null,l.margin?`m-0 m-md-${l.margin}`:null,l.class?l.class:null,l.color?`bg-${l.color}`:null,l.textcolor?`text-${l.textcolor}`:null],{id:l.id,"aria-labelledby":`${l.id}-label`,"data-bs-scroll":l.scroll?"true":"false","data-bs-backdrop":l.backdrop?"true":"false",tabindex:"-1"},[n,t])},destroy:function(e){if(e)if("string"==typeof e)l.destroy($(e)[0]);else{var n=bootstrap.Offcanvas.getInstance(e);if(n){try{$(n).destroy()}catch{}$(e).remove()}}},show:function(e){var n=$(`#${e}`)[0],t=new bootstrap.Offcanvas($(`#${e}`)[0]);$(n).on("hidden.bs.offcanvas",(function(e){setTimeout((function(e){l.destroy(e)}),3e3,n)})),t.show()}};e.offcanvas=function(n){n.id=n.id||e.core.UUID(),e.build.append(document.body,l.build(n)),l.show(n.id)}}(ns),function(e){e.option=function(l,n){if(l){if("string"==typeof l)return l;if(!n||Array.isArray(n)){var t=[];return l.forEach((l=>{"string"==typeof l?t.push({tag:"option",attr:{value:l,selected:n&&n.length>0&&n.indexOf(l)>-1?"selected":null},elems:l}):l.value||null===l.value||""===l.value?t.push({tag:"option",attr:{value:l.value,selected:n&&n.length>0&&n.indexOf(l.value)>-1?"selected":null},elems:l.label?l.label:null}):l.label&&l.option&&t.push({tag:"optgroup",attr:{label:l.label},elems:e.option(l.option,n)})})),t}return e.option(l,[n])}},e.ddoption=function(l,n){if(l){var t=[];return l.forEach((l=>{if("string"==typeof l){var a=l;(l={}).label=a}"-"===(l=$.extend({},{elems:null,label:null,value:null,icon:null,disabled:!1,active:!1,href:null,onclick:null,interactive:!0},l)).value?l.label?t.push({tag:"li",elems:{tag:"h6",class:"dropdown-header",elems:l.label}}):t.push({tag:"li",elems:{tag:"hr",class:"dropdown-divider"}}):l.elems?t.push({tag:"li",elems:e.div(Array.isArray(l.elems)?l.elems:[l.elems])}):(n&&!l.active&&(Array.isArray(n)?n.indexOf(l.value)>-1&&(active=!0):n===l.value&&(active=!0)),t.push({tag:"li",elems:{tag:l.href?"a":l.interactive?"button":"span",class:[l.interactive?"dropdown-item":"dropdown-item-text",l.disabled?"disabled":null,l.active?"active":null].combine(" "),attr:{href:l.href,onclick:l.onclick,type:!l.href&&l.interactive?"button":null},elems:[l.icon?e.icon(l.icon):null,l.label||l.value?{tag:"span",class:l.icon?"ms-2":null,elems:l.label?l.label:l.value}:null].removeEmpty()}}))})),t}}}(ns),function(e){var l=function(l,n){var t=$(n).closest(".ns-list-page").attr("id");if(t){var a=e.data.get(t);a&&(a.skip=l,e.data.set(t,a),e.core.isFunction(a.onchange)&&a.onchange(l,n),e.build.replace($(n).closest(".ns-list-page").get(),e.pagination(a),!0))}};e.pagination=function(n){var t=(n=$.extend({},{id:null,total:0,skip:0,limit:0,max:5,weight:null,align:"center",overflow:!0,onchange:null,showfirstlast:!0,shownextprev:!0,firstlabel:null,lastlabel:null,nextlabel:null,prevlabel:null},n)).skip/n.limit+1,a=parseInt(n.total/n.limit,10)+(n.total%n.limit>0?1:0);if(n.id=n.id?n.id:e.core.UUID(),n.total>n.limit){var o=[];n.showfirstlast&&o.push({tag:"li",class:["page-item",t>1?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:t>1?null:"-1","aria-disabled":!(t>1)||null,"aria-label":"First Page",href:"javascript:void(0)",onclick:function(e){l(0,e)}},elems:n.firstlabel?n.firstlabel:e.icon("angle-double-left")}}),n.shownextprev&&o.push({tag:"li",class:["page-item",t>1?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:t>1?null:"-1","aria-disabled":!(t>1)||null,"aria-label":"Previous Page",href:"javascript:void(0)",onclick:function(e){l((t-2)*n.limit,e)}},elems:n.prevlabel?n.prevlabel:e.icon("angle-left")}});var i=1,r=a,s=t;if(n.max>a&&(n.max=a),n.max<3&&(n.max=3),n.max%2==0&&(n.max=n.max+1),r>n.max){var c=parseInt(n.max/2,10)+1;r=s+c-1,(i=s-c+1)<1&&(i=1,r=n.max),r>a&&(i=(r=a)-n.max+1),i<1&&(i=1)}for(;i<=r;i++)o.push({tag:"li",class:["page-item",i===s?"active":null].combine(" "),elems:{tag:"a",class:"page-link",attr:{"aria-label":"Page "+i.toString(),href:"javascript:void(0)",onclick:function(e){var t=parseInt($(e).text(),10);l((t-1)*n.limit,e)}},elems:i.toString()}});return n.shownextprev&&o.push({tag:"li",class:["page-item",t<a?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:t<a?null:"-1","aria-disabled":!(t<a)||null,"aria-label":"Next Page",href:"javascript:void(0)",onclick:function(e){l(t*n.limit,e)}},elems:n.nextlabel?n.nextlabel:e.icon("angle-right")}}),n.showfirstlast&&o.push({tag:"li",class:["page-item",t<a?null:"disabled"].combine(" "),elems:{tag:"a",class:"page-link",attr:{tabindex:t<a?null:"-1","aria-disabled":!(t<a)||null,"aria-label":"Last Page",href:"javascript:void(0)",onclick:function(e){l((a-1)*n.limit,e)}},elems:n.lastlabel?n.lastlabel:e.icon("angle-double-right")}}),e.data.set(n.id,n),e.div(["d-flex","p-1","ns-list-page",n.align?"justify-content-"+n.align:null,n.overflow?"overflow-auto":null],{id:n.id},{tag:"ul",class:["pagination",n.weight?`pagination-${n.weight}`:null,n.overflow?"mx-5":null].combine(" "),elems:o})}return null}}(ns),function(e){var l={container:function(n){return Array.isArray(n)?l.container({bar:n}):"number"==typeof n?l.container({bar:[n]}):(n=$.extend({},{id:null,class:null,data:null,tooltip:null,bar:null},n),e.tooltip(n.tooltip,e.div(["progress",n.class],{id:n.id},{height:n.height>0?`${n.height}px`:null},Array.isArray(n.bar)?n.bar.map((function(e){return l.bar(e)})):l.bar(n.bar))))},bar:function(n){if("number"==typeof n)return l.bar({value:n});(n=$.extend({},{id:null,class:null,data:null,tooltip:null,label:!1,stripe:!1,animate:!1,min:0,max:100,value:0},n)).value>n.max&&(n.value=n.max),n.value<n.min&&(n.value=n.min);var t=n.max-n.min>0?parseInt(n.value/(n.max-n.min)*100,10):0;return e.tooltip(n.tooltip,e.div({class:["progress-bar",n.class?n.class:null,n.color?`bg-${n.color}`:null,n.stripe?["progress-bar-striped",n.animate?"progress-bar-animated":null].combine(" "):null],data:n.data,attr:{id:n.id?n.id:null,role:"progressbar"},style:{width:`${t}%`},elems:n.label?`${t}%`:"&nbsp;"}))}};e.progress=l.container}(ns),function(e){var l={isPrototypeExists:function(e,l){if(e&&"object"==typeof e)try{if(void 0!==e[l])return!0}catch(e){return!1}return!1},filter:{opr:function(e,l){var n=null;if(l)switch(l){case"text":case"tel":case"email":n=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"},{value:"$eqlike",label:e?"&#xf52c; &#xf069;":"Like"},{value:"$nelike",label:e?"&#xf53e; &#xf069;":"Not Like"}];break;case"select":case"check":n=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"}];break;case"date":case"number":n=[{value:"$eq",label:e?"&#xf52c;":"Equal"},{value:"$ne",label:e?"&#xf53e;":"Not Equal"},{value:"$gte",label:e?"&#xf532;":"More Than"},{value:"$lte",label:e?"&#xf537;":"Less Than"}];break;default:console.error("Unhandle query.fn.filter.opr itemtype : "+l)}return n},item:function(n,t,a,o,i){a||(a=t[0].value);var r,s=t.map((function(e){return{value:e.value,label:e.label}})),c=e.input({type:"select",name:"from",onchange:function(e){l.filter.change(e,n)},option:s,value:a,size:""}),u=t.find((e=>e.value===a));r=l.filter.opr(n,u?u.type:null),(o=o||(r?r[0].value:null))&&"$regex"===o?i.startsWith("^((?!")?(o="$nelike",i=i.substring(5,i.length-5)):(o="$eqlike",i=i):o&&"$exists"===o&&(o=i?"$ne":"$eq",i="");var d=e.input({class:[n?"font-fa":null].combine(" "),type:"select",name:"opr",option:r,value:o,size:n?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2"});return e.div("d-flex",[e.div("container p-0",[e.div("row g-2",e.div("d-flex",[c,d,e.button({color:"danger",icon:"trash",onclick:function(e){l.filter.remove(e)}})])),e.div("row mt-2",[e.input({type:u&&u.type?u.type:"text",name:"value",value:i,size:"col-12",placeholder:u.placeholder?u.placeholder:null,option:u&&u.option?u.option:null})])])])},add:function(n,t){var a=$(n).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`);e.build.prepend($(n).closest(".item")[0],e.div(["item col-12",t?"ns-fadeslidein":null].combine(" "),l.filter.item(o.useopricon,o.field,null,null,null))),setTimeout((function(e){$(e).closest(".container").find(".ns-fadeslidein").removeClass("ns-fadeslidein")}),500,n)},change:function(n,t){var a=$(n).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`),i=$(n).closest(".item").find("select[name='opr']"),r=$(n).closest(".item").find("[name='value']"),s=$(n).val(),c=o.field.find((e=>e.value===s)),u=l.filter.opr(o.useopricon,c?c.type:null);e.build.replace($(i).parent(),e.input({class:[o.useopricon?"font-fa":null].combine(" "),type:"select",name:"opr",size:t?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2",value:$(i).val(),option:u})),e.build.replace(r,e.input({type:c&&c.type?c.type:"text",name:"value",size:"",placeholder:c.placeholder?c.placeholder:null,value:e.core.getvalue(r),option:c&&c.option?c.option:null}))},remove:function(e){$(e).closest(".item").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).closest(".item").remove()}),500,e)}},sort:{opr:function(e,l){var n=null;if(l)if(e)switch(l){case"text":case"email":case"select":n=[{value:1,label:"&#xf15d;"},{value:-1,label:"&#xf15e;"}];break;case"tel":case"check":n=[{value:1,label:"&#xf884;"},{value:-1,label:"&#xf885;"}];break;case"date":case"number":n=[{value:1,label:"&#xf162;"},{value:-1,label:"&#xf163;"}];break;default:console.error("Unhandle query.fn.sort.opr itemtype : "+l)}else n=[{value:1,label:"Ascending"},{value:-1,label:"Descending"}];return n},item:function(n,t,a,o){a||(a=t[0].value);var i,r=t.map((function(e){return{value:e.value,label:e.label}})),s=e.input({type:"select",name:"from",onchange:function(e){l.sort.change(e,n)},option:r,value:a,size:""}),c=t.find((e=>e.value===a));i=l.sort.opr(n,c?c.type:null);var u=e.input({class:[n?"font-fa":null].combine(" "),type:"select",name:"opr",option:i,value:o||(i?i[0].value:null),size:n?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2"});return e.div("d-flex",[s,u,e.button({color:"danger",icon:"trash",onclick:function(e){l.sort.remove(e)}})])},add:function(n,t){var a=$(n).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`);e.build.prepend($(n).closest(".item")[0],e.div(["item col-12",t?"ns-fadeslidein":null].combine(" "),l.sort.item(o.useopricon,o.field,null,null))),setTimeout((function(e){$(e).closest(".container").find(".ns-fadeslidein").removeClass("ns-fadeslidein")}),500,n)},change:function(n,t){var a=$(n).closest(".modal[id]").attr("id"),o=e.data.get(`${a}-data`),i=$(n).parent().find("select[name='opr']"),r=$(n).val(),s=o.field.find((e=>e.value===r)),c=l.sort.opr(o.useopricon,s?s.type:null);e.build.replace($(i).parent(),e.input({class:[o.useopricon?"font-fa":null].combine(" "),type:"select",name:"opr",size:t?"col-4 col-lg-3 px-2":"col-sm-5 col-md-4 col-lg-3 px-2",value:$(i).val(),option:c}))},remove:function(e){$(e).closest(".item").addClass("ns-fadeslideout"),setTimeout((function(e){$(e).closest(".item").remove()}),500,e)}},get:function(n){var t=null,a=$(n).find(".ns-filter-rule"),o=$(a).find("select[name='from']");if(o&&o.length>0){var i=[];$.each(o,(function(l,n){var t=$(n).closest(".item").find("select[name='opr']"),a=$(t).val(),o=$(n).closest(".item").find("[name='value']");"$eqlike"===a||"$nelike"===a?"$eqlike"===a?(a="$eq",o={$regex:$(o).val(),$options:"i"}):(a="$ne",o={$regex:"^((?!"+$(o).val()+").)*$",$options:"i"}):null===(o=e.core.getvalue(o))&&("$eq"===a?o={$exists:!1,$eq:null}:"$ne"===a&&(o={$exists:!0,$ne:null})),i.push({f:$(n).val(),o:a,v:o})})),i.sort(((e,l)=>e.f>l.f?1:l.f>e.f?-1:0));var r=[],s=null;i.forEach((e=>{null===s||s!=e.f?l.isPrototypeExists(e.v,"$regex")||l.isPrototypeExists(e.v,"$exists")?r.push([{[e.f]:e.v}]):r.push([{[e.f]:{[e.o]:e.v}}]):l.isPrototypeExists(e.v,"$regex")||l.isPrototypeExists(e.v,"$exists")?r[r.length-1].push({[e.f]:e.v}):r[r.length-1].push({[e.f]:{[e.o]:e.v}}),s=e.f})),t={$and:[]},r.forEach((e=>{if(1===e.length)t.$and.push(e[0]);else{var l=[];e.forEach((e=>{l.push(e)})),t.$and.push({$or:l})}}))}var c=null,u=$(n).find(".ns-sort-rule"),d=$(u).find("select[name='from']");d&&d.length>0&&(c={},$.each(d,(function(e,l){var n=$(l).closest(".item").find("select[name='opr']");c[$(l).val()]=parseInt($(n).val(),10)})));var p=null,m=$(n).find(".ns-field-rule"),f=$(m).find("input[name]");f&&f.length>0&&(p={},$.each(f,(function(l,n){e.core.getvalue(n)||(p[$(n).attr("name")]=0)})));var b=e.core.getvalue($(n).find("input[name='limit']")),g=(e.core.getvalue($(n).find("input[name='step']"))-1)*b;return{filter:t,sort:c,field:p,limit:b,skip:g}}};e.query=function(n,t){t=$.extend({},{callback:null,onshow:null,data:{filter:null,sort:null,limit:10,skip:0,field:{__v:0}},limit:{min:1,max:100,step:5},skip:{min:1,max:100,step:1},field:[{value:"_id",label:"ID",type:"text"}],useopricon:!1},t);var a=e.core.UUID();e.data.set(`${a}-data`,t);var o=[];t.data.filter&&t.data.filter.$and&&t.data.filter.$and.forEach((n=>{if(n.$or)n.$or.forEach((n=>{var a=Object.keys(n)[0],i=n[a],r=Object.keys(i)[0],s=i[r];o.push(e.div("item col-12",l.filter.item(t.useopricon,t.field,a,r,s)))}));else{var a=Object.keys(n)[0],i=n[a],r=Object.keys(i)[0],s=i[r];o.push(e.div("item col-12",l.filter.item(t.useopricon,t.field,a,r,s)))}})),o.push(e.div("item col-12",e.button({icon:"plus",color:"primary",class:"col-12",label:"Add New Filter Rule",onclick:function(e){l.filter.add(e,!0)}})));var i=[];t.data.sort&&Object.keys(t.data.sort).forEach((n=>{t.data.sort[n]&&i.push(e.div("item col-12",l.sort.item(t.useopricon,t.field,n,t.data.sort[n])))})),i.push(e.div("item col-12",e.button({icon:"plus",color:"primary",class:"col-12",label:"Add New Sort Rule",onclick:function(e){l.sort.add(e,!0)}})));var r=[];r.push(e.input({type:"checkbox",label:"Version",name:"__v",size:"col-6",checked:!t.data||!l.isPrototypeExists(t.data.field,"__v")||0!==t.data.field.__v})),$.each(t.field,(function(n,a){r.push(e.input({type:"checkbox",label:a.label,name:a.value,size:"col-6",checked:!t.data||!l.isPrototypeExists(t.data.field,a.value)||0!==t.data.field[a.value]}))})),e.dlg.box({title:"Query",id:a,hastab:!0,onshow:function(e){"function"==typeof t.onshow&&t.onshow(e)},elems:e.nav({border:!1,rounded:!1,align:"center",style:"pill",elems:[{label:"Filter",icon:"filter",elems:[e.div("container ns-filter-rule p-0",e.div("row g-2",o))]},{label:"Sort",icon:"sort",elems:[e.div("container ns-sort-rule p-0",e.div("row g-2",i))]},{label:"Fields",icon:"tasks",elems:[e.div("container ns-field-rule p-0",e.div("row g-2",r))]},{label:"Page",icon:"list-ol",elems:[e.div("container ns-page-rule p-0",e.div("row g-2",[e.input({type:"number",name:"limit",min:t.limit.min,max:t.limit.max,step:t.limit.step,value:t.data.limit,numctl:!0,size:"col-6",label:"Record per Page"}),e.input({type:"number",name:"step",min:t.skip.min,max:t.skip.max,step:t.skip.step,value:t.data.skip/t.data.limit+1,numctl:!0,size:"col-6",label:"Current Page"})]))]}]}),button:"okaycancel"}).then((e=>{t.callback(n,l.get(e.dlg))})).catch((e=>{}))}}(ns),function(e){var l=["Ben","Sammie","Darryl","Mohammad","Felton","Neville","Ward","Len","Ethan","Fredric","Chang","Ira","Robby","Austin","Cletus","Everette","Freeman","Byron","Ismael","Lino","Hobert","Odell","Valentin","Gil","Van","Sydney","Hipolito","Arnold","Donte","Drew","Dewayne","Mike","Brent","Carlos","Bennett","Mario","Chet","Davis","Ramon","Efrain","Rayford","Fred","Emmitt","Willian","Marcelo","Cornell","Gustavo","Scotty","Pete","Edward","Jean","Albert","Carlo","Joel","Rolf","Chadwick","Rashad","Kareem","Seymour","Marion","Andre","Quinton","Marty","Jarrod","Allan","Cedrick","Heath","Ned","Harrison","Matt","Loyd","Jefferson","Fidel","Len","Brandon","Curt","Johnie","Pasquale","Francisco","Drew","Roberto","Micah","Carrol","Fritz","Vince","Chance","Simon","Dane","Randell","Weldon","Milton","Gail","Patricia","Wilson","Edgar","Darrel","Anderson","Sandy","Armand","Mikel","Burton","Bernardo","Neal","Tracy","Vern","Barry","James","Brain","Sergio","Gregorio","Sean","Rupert","Alejandro","Kasey","Marcellus","Arnold","Garland","Clement","Lloyd","August","Raleigh","Art","Otto","Robbie","Chadwick","Hugo","Odell","Darrin","Hershel","Mohammed","Gerry","Ramiro","Cristobal","Ambrose","Wilson","Eugenio","Wes","Olen","Dewey","Cordell","Lorenzo","Prince","Darrell","Hayden","Jerold","Jordan","Juan","Jesse","Thanh","Aldo","Alexander","Bill","Robin","Dalton","Terrance","Cordell","Quinton","Raleigh","Dallas","Bert","Titus","Demarcus","Brady","Elvis","Truman","Hugh","Sid","Amos","Jamel","Tomas","Rocco","Gus","Bradford","Jarod","Percy","Horacio","Robert","Oren","Bret","Wilton","Oscar","Antonio","Gregg","Wilfredo","Armand","Barrett","Everette","Isaac","Hershel","Reginald","Frank","Kory","Jeff","Herschel","Zachariah","Charlie","Ty","Berry","Connie","Rickie"],n=["Marjory","Ok","Hillary","Helene","Vinita","Evelyne","Shemika","Larisa","Vicenta","Adelia","Alline","Annamaria","Nicolle","Iva","Niesha","Therese","Janell","Kerri","Sasha","Shawna","Leighann","Alexandra","Lashandra","Tammera","Jeanette","Maura","Signe","Bonnie","Cassie","Sherita","Liberty","Hannah","Micha","Charlyn","Irmgard","Elisabeth","Rossana","Tobie","Lisbeth","Keitha","Yasmin","Letha","Kathi","Janine","Fernanda","Marianela","Mora","Angelina","Sophie","Patrice","Patria","Maricela","Shenita","Yuette","Rosetta","Herma","Kandra","Voncile","Terese","Emely","Flora","Lynne","Karole","Regina","Elfriede","Delaine","Hanh","Candice","Alysa","Vi","Tai","Yukiko","Noelle","Marketta","Tonia","Lacey","Maxine","Venice","Ashleigh","Alice","Lynell","Danna","Josephine","Maye","Keturah","Lyn","Lucina","Georgina","Verlie","Idell","Katherin","Ela","Luna","Li","Arlena","Marylyn","Lenita","Manuela","Allena","Adah"],t=["@gmail.com","@yahoo.com","@live.com","@outlook.com","@aol.com","@tm.com.my","@kdn.gov.my"];e.rdata={name:()=>{if(ns.core.rndBetween(1,100)>50){for(var e=ns.core.rndBetween(0,l.length-1),t=ns.core.rndBetween(0,l.length-1);e===t;)e=ns.core.rndBetween(0,l.length-1);return[l[e],l[t]].join(" ")}e=ns.core.rndBetween(0,n.length-1),t=ns.core.rndBetween(0,l.length-1);return[n[e],l[t]].join(" ")},email:l=>{l||(l=e.rdata.name());var n=l.split(" "),a=ns.core.rndBetween(0,3),o=ns.core.rndBetween(0,t.length-1),i=ns.core.rndBetween(0,100)>50?ns.core.rndBetween(1,9999):"";return n.join(["_",".","","-"][a]).toLowerCase()+i+t[o]},phone:()=>["0","1",ns.core.rndBetween(0,9),ns.core.rndBetween(1,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9),ns.core.rndBetween(0,9)].join(""),dob:()=>[ns.core.rndBetween(1965,2019),ns.core.pad(ns.core.rndBetween(1,12),2),ns.core.pad(ns.core.rndBetween(1,28),2)].join("-"),opt:e=>e&&e.length>0?e[ns.core.rndBetween(0,e.length-1)].value:null}}($),function(e){e.spinner=function(l){return l=$.extend({},{id:null,class:null,color:null,weight:null,style:null,grow:!1,elems:null,label:"Loading..."},l),e.div(["spinner-"+(l.grow?"grow":"border"),l.color?`text-${l.color}`:null,l.class,l.weight?`spinner-${l.grow?"grow":"border"}-${l.weight}`:null],{role:"status",id:l.id,"aria-label":""===l.label?"true":null},l.style,""===l.label?null:{tag:"span",class:"visually-hidden",elems:l.label})}}(ns),function(e){var l={tr:function(e){return"object"==typeof e?{tag:"tr",class:[(e=$.extend({},{id:null,class:null,color:null,elems:null},e)).class?e.class:null,e.color?`table-${e.color}`:null],elems:e.elems?e.elems:null}:{tag:"tr",elems:e}},td:function(e){return"object"==typeof e?{tag:(e=$.extend({},{type:"td",scope:null,id:null,class:null,colspan:null,rowspan:null,elems:null},e)).type,class:e.class?e.class:null,attr:{scope:e.scope,colspan:e.colspan?e.colspan:null,rowspan:e.rowspan?e.rowspan:null},elems:e.elems?e.elems:"&nbsp;"}:{tag:"td",elems:e||"&nbsp;"}}};e.table=function(...n){if(n){var t=null,a=null;if(2===n.length?(t=n[0],a=n[1]):1===n.length&&(a=n[0]),t=$.extend({},{id:null,class:null,headclass:null,bodyclass:null,footerclass:null,color:null,striped:!1,align:null,rownumber:!1,responsive:!0,hover:!1,border:null,bordercolor:null,caption:null,captiontop:!1,header:!0,footer:!1},t),Array.isArray(a)){var o=null;if(t.header){var i=[];i=a[0].map((function(e){return"object"==typeof e?(e=$.extend({},{id:null,type:"th",scope:"col",class:null,colspan:null,rowspan:null,elems:null},e),l.td(e)):l.td({type:"th",scope:"col",elems:e})})),t.rownumber&&i.unshift(l.td({type:"th",scope:"col",elems:"#"})),o={tag:"thead",class:t.headclass?t.headclass:null,elems:l.tr({elems:i})}}for(var r=[],s=t.header?1:0,c=a.length-(t.footer?1:0);s<c;s++){var u=[];t.rownumber&&u.push(l.td({type:"th",scope:"row",elems:s.toString()})),$.each(a[s],(function(e,n){u.push(l.td(n))})),r.push(l.tr({elems:u}))}var d={tag:"tbody",class:t.bodyclass?t.bodyclass:null,elems:r},p=null;if(t.footer){var m=[];t.rownumber&&m.push(l.td({type:"th",scope:"row",elems:null})),$.each(a[c-1],(function(e,n){m.push(l.td(n))})),p={tag:"tfoot",class:t.footerclass?t.footerclass:null,elems:l.tr({elems:m})}}var f={tag:"table",class:["table",t.class?t.class:null,t.color?`table-${t.color}`:null,t.striped?"table-striped":null,t.hover?"table-hover":null,t.align?`align-${t.align}`:null,t.border?"none"===t.border?"table-borderless":"borderd"===t.border?"table-bordered":null:null,t.bordercolor?`border-${t.bordercolor}`:null,t.captiontop?"caption-top":null,t.size?`table-${t.size}`:null],elems:[t.caption?{tag:"caption",elems:t.caption}:null,o,d,p].removeEmpty()};return t.responsive?e.div(["string"==typeof t.responsive?`tbl-responsive-${t.responsive}`:"table-responsive"],f):f}}}}(ns),function(e){e.div=function(...l){return e.tag("div",...l)},e.p=function(...l){return e.tag("p",...l)},e.span=function(...l){return e.tag("span",...l)},e.ol=function(...l){return e.tag("ol",...l)},e.ul=function(...l){return e.tag("ul",...l)},e.li=function(...l){return e.tag("li",...l)},e.tag=function(l,...n){if(l&&n){if(4===n.length)return e.tag(l,{class:n[0],attr:n[1],style:n[2],elems:n[3]});if(3===n.length)return e.tag(l,{class:n[0],attr:n[1],elems:n[2]});if(2===n.length)return e.tag(l,{class:n[0],elems:n[1]});if(1===n.length&&"string"==typeof n[0]||Array.isArray(n[0]))return e.tag(l,{elems:n[0]});if(1===n.length&&"object"==typeof n[0]){var t=n[0];return(t=$.extend({},{tag:l,id:null,style:null,attr:null,data:null,class:null,elems:null},t)).hasOwnProperty("ns")&&0===t.ns?{tag:t.tag,id:t.id,class:t.class?Array.isArray(t.class)?t.class.combine(" "):t.class:null,style:t.style,data:t.data,attr:t.attr,elems:t.elems?Array.isArray(t.elems)?t.elems.removeEmpty():t.elems:null}:{ns:1,tag:t.tag,id:t.id,class:t.class?Array.isArray(t.class)?t.class.combine(" "):t.class:null,style:t.style,data:t.data,attr:t.attr,elems:t.elems?Array.isArray(t.elems)?t.elems.removeEmpty():t.elems:null}}console.error("Unsupported arg.length")}else console.error("Unsupported tag and arg.length")}}(ns),function(e){var l={build:function(l){(l=$.extend({},{id:null,class:null,animate:!0,title:null,icon:null,msg:null,autohide:!0,delay:5e3,color:null,textcolor:null,date:new Date},l)).id=l.id?l.id:e.core.UUID();var n=[];return l.icon&&("string"==typeof l.icon?n.push(e.icon({icon:l.icon,size:"lg",class:"me-2"})):n.push(e.icon(l.icon))),l.title&&n.push({tag:"strong",class:["me-auto",l.icon?"ms-2":null],elems:l.title}),!l.title&&!l.icon||l.autoclose||(l.title||n.push({tag:"strong",class:"me-auto",elems:"&nbsp;"}),n.push({tag:"small",class:"text-muted timer",attr:{"data-ns-time":l.date,id:`${l.id}-timer`},elems:"Just now"})),(l.title||l.icon)&&n.push({tag:"button",class:"btn-close",attr:{type:"button","data-bs-dismiss":"toast"}}),(l.title||l.icon)&&(n=[e.div("toast-header",n.slice())]),n.push(e.div("toast-body",l.msg)),e.div(["toast",l.class?l.class:null,l.color?[`bg-${l.color}`,l.textcolor?`text-${l.textcolor}`:null].combine(" "):null],{id:l.id,"data-bs-animation":l.animate?"true":null,"data-bs-autohide":l.autohide?"true":"false","data-bs-delay":l.delay?l.delay:null},n)},timer:function(e){if(e){var n=new Date,t=new Date($(e).attr("data-ns-time"));if(n>t){var a=n.getTime()-t.getTime(),o=parseInt(a/1e3,10),i=1e3;if(o<1)i=1e3,$(e).html("Just now");else if(o>=1&&o<60)i=1e3,$(e).html(`${o} second${o>1?"s":""} ago`);else if(o>=60&&o<3600){i=6e4;let l=parseInt(o/60,10);$(e).html(`${l} minute${l>1?"s":""} ago`)}else if(o>=3600&&o<86400){i=36e5;let l=parseInt(o/3600,10);$(e).html(`${l} hour${l>1?"s":""} ago`)}else{i=-1;let l=parseInt(o/86400,10);$(e).html(`${l} day${l>1?"s":""} ago`)}i>0&&setTimeout((function(e){l.timer(e)}),i,e)}}},show:function(e){new bootstrap.Toast(e);var n=bootstrap.Toast.getInstance(e);n&&($(e).on("hidden.bs.toast",(function(){setTimeout((function(e){l.destroy(e)}),1e3,e)})),l.timer($(e).find("[data-ns-time]")[0]),n.show())},hide:function(e){var l=bootstrap.Toast.getInstance(e);l&&l.hide()},destroy:function(e){var l=bootstrap.Toast.getInstance(e);if(l){try{$(l).destroy()}catch{}$(e).remove()}},toastmsg:function(...l){if(l&&l.length>0){var n=null,t=null;if(1===l.length?n=l[0]:l.length>1&&(t=l[0],n=l[1]),t){var a=e.sIcon(t);return{color:a?a.color:null,textcolor:a?a.textcolor:null,elems:e.div("row g-0",[e.div("col-auto align-self-start me-3",e.icon({icon:a?a.icon:t,size:"lg"})),e.div("col align-self-center",n)])}}return{textcolor:null,color:null,elems:n}}}};e.toast=function(...n){if(n&&n.length>0)if(2===n.length&&"string"==typeof n[0]&&"string"==typeof n[1]){var t=l.toastmsg(n[0],n[1]);if(t)return e.toast({msg:t.elems,color:t.color,textcolor:t.textcolor})}else if(1===n.length&&"object"==typeof n[0]){var a=n[0];(a=$.extend({},{id:null,msg:null,color:null,textcolor:null,delay:null,position:"top-0 end-0"},a)).id=a.id||e.core.UUID(),a.color&&!a.textcolor&&(["primary","secondary","danger","success","dark"].indexOf(a.color)>-1?a.textcolor="light":["warning","light"].indexOf(a.color)>-1&&(a.textcolor="dark"));var o=[".toast-container",a.position?"."+a.position.split(" ").join("."):null].combine(""),i=$(o).get();i&&0!==i.length||(e.build.append(document.body,e.div("position-relative",{"aria-live":"polite","aria-atomic":"true"},{zIndex:"1031"},e.div(["toast-container position-fixed p-3",a.position],null))),i=$(o).get()),e.build.append(i,l.build(a)),l.show(document.getElementById(a.id))}else console.error("Unsupported argument")}}(ns),function(e){e.toc=function(l){return Array.isArray(l)?e.toc({elems:l}):(l=$.extend({},{id:null,class:null,label:null,elems:null},l)).elems?e.div(["text-muted ns-toc",l.class],{id:l.id},[{tag:"h6",elems:l.label?l.label:"Table of content"},{tag:"hr",class:"mx-1"},{tag:"ul",class:"list-unstyled small",elems:l.elems.map((function(e){return{tag:"li",class:[1===e.level?null:"fw-bold","mx-1","text-truncate"],elems:{tag:"a",class:"text-muted",attr:{onclick:e.onclick,href:e.href?e.href:"javascript:void(0)"},elems:e.label}}}))}]):void 0}}(ns),function(e){e.tooltip=function(l,n){if("string"==typeof l){var t=l;(l={}).msg=t}return(l=$.extend({},{title:null,msg:null,type:null,placement:"top",trigger:"focus"},l)).msg&&n&&(n.attr||(n.attr={}),"popover"===l.type?l.title&&(n.attr.title=l.title):n.attr.title=l.msg,l.type&&(n.attr["data-bs-toggle"]=l.type,"popover"===l.type&&(n.attr["data-bs-content"]=l.msg,l.trigger&&(n.attr["data-bs-trigger"]=l.trigger)),l.placement&&(n.attr["data-bs-placement"]=l.placement),e.core.isHTML(l.msg)&&(n.attr["data-bs-html"]="true"))),n}}(ns),function(e){e.validate=function(l){return new Promise(((n,t)=>{var a=$(l).find("[name]").get();a&&($(l).removeClass("was-validated"),$.each(a,(function(l,n){$(n).attr("required")&&(e.core.getvalue(n)?$(n).addClass("is-valid").removeClass("is-invalid"):$(n).addClass("is-invalid").removeClass("is-valid"))})),$(l).addClass("was-validated"));var o=$(l).find(".is-invalid");o&&o.length>0?t():n()}))}}(ns);